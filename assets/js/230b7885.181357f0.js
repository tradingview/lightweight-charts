"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["8218"],{45237:function(e,r,n){n.r(r),n.d(r,{default:()=>o,frontMatter:()=>a,metadata:()=>i,assets:()=>c,toc:()=>h,contentTitle:()=>l});var i=JSON.parse('{"id":"migrations/from-v4-to-v5","title":"From v4 to v5","description":"In this document you can find the migration guide from the previous version v4","source":"@site/docs/migrations/from-v4-to-v5.md","sourceDirName":"migrations","slug":"/migrations/from-v4-to-v5","permalink":"/lightweight-charts/docs/next/migrations/from-v4-to-v5","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"From v3 to v4","permalink":"/lightweight-charts/docs/next/migrations/from-v3-to-v4"},"next":{"title":"iOS","permalink":"/lightweight-charts/docs/next/ios"}}'),s=n("85893"),t=n("50065");let a={},l="From v4 to v5",c={},h=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Series changes",id:"series-changes",level:2},{value:"Overview of Changes",id:"overview-changes-series",level:3},{value:"Migration Steps",id:"migration-steps-series",level:3},{value:"Before (v4)",id:"v4-series",level:4},{value:"After (v5)",id:"v5-series",level:4},{value:"Migration Reference",id:"migration-reference-series",level:4},{value:"Usage Examples",id:"usage-examples-series",level:3},{value:"Series Markers",id:"series-markers",level:2},{value:"Overview of Changes",id:"overview-changes-markers",level:3},{value:"Migration Steps",id:"migration-steps-markers",level:3},{value:"Before (v4)",id:"v4-markers",level:4},{value:"After (v5)",id:"v5-markers",level:4},{value:"Key Changes",id:"key-changes-markers",level:3},{value:"Watermarks",id:"watermarks",level:2},{value:"Overview of Changes",id:"overview-changes-watermarks",level:3},{value:"Migration Steps",id:"migration-steps-watermarks",level:3},{value:"Before (v4)",id:"v4-watermarks",level:4},{value:"After (v5)",id:"v5-watermarks",level:4},{value:"Accessing the New TextWatermark",id:"accessing-the-new-textwatermark",level:3},{value:"Changes in Options",id:"changes-in-options",level:3},{value:"Attaching the Watermark",id:"attaching-the-watermark",level:3},{value:"Example: Implementing a Text Watermark",id:"example-implementing-a-text-watermark",level:3},{value:"Plugin Typings",id:"plugin-typings",level:2},{value:"Overview of Changes",id:"overview-changes-plugins",level:3}];function d(e){let r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"from-v4-to-v5",children:"From v4 to v5"})}),"\n",(0,s.jsx)(r.p,{children:"In this document you can find the migration guide from the previous version v4\nto v5."}),"\n",(0,s.jsx)(r.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"#series-changes",children:"Series changes"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"#series-markers",children:"Series Markers"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"#watermarks",children:"Watermarks"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"#plugin-typings",children:"Plugin Typings"})}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"series-changes",children:"Series changes"}),"\n",(0,s.jsx)(r.h3,{id:"overview-changes-series",children:"Overview of Changes"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Unified series creation API using single ",(0,s.jsx)(r.code,{children:"addSeries"})," function"]}),"\n",(0,s.jsx)(r.li,{children:"Better tree-shaking support"}),"\n",(0,s.jsx)(r.li,{children:"Individual series types must now be imported separately (for ESM)"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"migration-steps-series",children:"Migration Steps"}),"\n",(0,s.jsxs)(r.p,{children:["Replace all series creation calls with the new ",(0,s.jsx)(r.code,{children:"addSeries"})," syntax. Here's how the migration works for each series type:"]}),"\n",(0,s.jsx)(r.h4,{id:"v4-series",children:"Before (v4)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"// Example with Line Series in v4\nimport { createChart } from 'lightweight-charts';\nconst chart = createChart(container, {});\nconst lineSeries = chart.addLineSeries({ color: 'red' });\n"})}),"\n",(0,s.jsx)(r.h4,{id:"v5-series",children:"After (v5)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"// Example with Line Series in v5\nimport { createChart, LineSeries } from 'lightweight-charts';\nconst chart = createChart(container, {});\nconst lineSeries = chart.addSeries(LineSeries, { color: 'red' });\n"})}),"\n",(0,s.jsx)(r.h4,{id:"migration-reference-series",children:"Migration Reference"}),"\n",(0,s.jsx)(r.p,{children:"Here's how to migrate each series type:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"v4 Method"}),(0,s.jsx)(r.th,{children:"v5 Method"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addLineSeries(options)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addSeries(LineSeries, options)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addAreaSeries(options)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addSeries(AreaSeries, options)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addBarSeries(options)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addSeries(BarSeries, options)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addBaselineSeries(options)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addSeries(BaselineSeries, options)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addCandlestickSeries(options)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addSeries(CandlestickSeries, options)"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addHistogramSeries(options)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chart.addSeries(HistogramSeries, options)"})})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"usage-examples-series",children:"Usage Examples"}),"\n",(0,s.jsx)(r.p,{children:"ESM (ES Modules):"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"import { createChart, LineSeries } from 'lightweight-charts';\n\nconst chart = createChart(container, {});\nconst lineSeries = chart.addSeries(LineSeries, { color: 'red' });\n"})}),"\n",(0,s.jsx)(r.p,{children:"UMD (Universal Module Definition):"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"const chart = LightweightCharts.createChart(container, {});\nconst lineSeries = chart.addSeries(LightweightCharts.LineSeries, { color: 'red' });\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Note: Make sure to import the specific series type (e.g., ",(0,s.jsx)(r.code,{children:"LineSeries"}),", ",(0,s.jsx)(r.code,{children:"AreaSeries"}),") along with ",(0,s.jsx)(r.code,{children:"createChart"})," when using ES Modules. For UMD builds, all series types are available under the ",(0,s.jsx)(r.code,{children:"LightweightCharts"})," namespace."]}),"\n",(0,s.jsx)(r.h2,{id:"series-markers",children:"Series Markers"}),"\n",(0,s.jsx)(r.h3,{id:"overview-changes-markers",children:"Overview of Changes"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Markers moved to separate primitive for optimized bundle size"}),"\n",(0,s.jsxs)(r.li,{children:["New \u2060",(0,s.jsx)(r.code,{children:"createSeriesMarkers"})," function required"]}),"\n",(0,s.jsx)(r.li,{children:"Marker management through dedicated primitive instance"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"migration-steps-markers",children:"Migration Steps"}),"\n",(0,s.jsx)(r.h4,{id:"v4-markers",children:"Before (v4)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"// Markers were directly managed through the series instance\nseries.setMarkers([\n    {\n        time: '2019-04-09',\n        position: 'aboveBar',\n        color: 'black',\n        shape: 'arrowDown',\n    },\n]);\n\n// Getting markers\nconst markers = series.markers();\n"})}),"\n",(0,s.jsx)(r.h4,{id:"v5-markers",children:"After (v5)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"// Import the markers primitive\nimport { createSeriesMarkers } from 'lightweight-charts';\n\n// Create a markers primitive instance\nconst seriesMarkers = createSeriesMarkers(series, [\n    {\n        time: '2019-04-09',\n        position: 'aboveBar',\n        color: 'black',\n        shape: 'arrowDown',\n    },\n]);\n\n// Getting markers\nconst markers = seriesMarkers.markers();\n\n// Updating markers\nseriesMarkers.setMarkers([/* new markers */]);\n\n// Remove all markers\nseriesMarkers.setMarkers([]);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"key-changes-markers",children:"Key Changes"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["You must now import ",(0,s.jsx)(r.code,{children:"createSeriesMarkers"})," separately"]}),"\n",(0,s.jsxs)(r.li,{children:["Instead of calling methods directly on the series instance, create a markers primitive using ",(0,s.jsx)(r.code,{children:"createSeriesMarkers"})]}),"\n",(0,s.jsx)(r.li,{children:"The markers API is now accessed through the markers primitive instance"}),"\n",(0,s.jsx)(r.li,{children:"The marker configuration object format remains the same"}),"\n",(0,s.jsx)(r.li,{children:"This change results in smaller bundle sizes when markers aren't used"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"If your application doesn't use markers, you can now benefit from a smaller bundle size as this functionality is no longer included in the core package."}),"\n",(0,s.jsx)(r.h2,{id:"watermarks",children:"Watermarks"}),"\n",(0,s.jsx)(r.h3,{id:"overview-changes-watermarks",children:"Overview of Changes"}),"\n",(0,s.jsx)(r.p,{children:"In the new version of Lightweight Charts, the watermark feature has undergone significant changes:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Extraction from Core: The watermark functionality has been extracted from the core library."}),"\n",(0,s.jsx)(r.li,{children:"Re-implementation: It's now re-implemented as a Pane Primitive (plugin) included within the library."}),"\n",(0,s.jsx)(r.li,{children:"Improved Tree-shaking: This change makes the feature more tree-shakeable, potentially reducing bundle sizes for users who don't need watermarks."}),"\n",(0,s.jsxs)(r.li,{children:["Added an Image Watermark Primitive: In addition to the usual text based watermark, there is now\nan image watermark feature provided by the ",(0,s.jsx)(r.a,{href:"/lightweight-charts/docs/next/api/functions/createImageWatermark",children:(0,s.jsx)(r.code,{children:"createImageWatermark"})})," plugin."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"migration-steps-watermarks",children:"Migration Steps"}),"\n",(0,s.jsx)(r.h4,{id:"v4-watermarks",children:"Before (v4)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"const chart = createChart(container, {\n    watermark: {\n        text: 'Watermark Text',\n        color: 'rgba(255,0,0,0.5)',\n    },\n});\n"})}),"\n",(0,s.jsx)(r.h4,{id:"v5-watermarks",children:"After (v5)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"import { createChart, createTextWatermark } from 'lightweight-charts';\n\nconst chart = createChart(container, options);\nconst firstPane = chart.panes()[0];\n\ncreateTextWatermark(firstPane, {\n    horzAlign: 'center',\n    vertAlign: 'center',\n    lines: [{\n        text: 'Watermark Text',\n        color: 'rgba(255,0,0,0.5)',\n        fontSize: 50,\n    }],\n});\n\n"})}),"\n",(0,s.jsx)(r.h3,{id:"accessing-the-new-textwatermark",children:"Accessing the New TextWatermark"}),"\n",(0,s.jsx)(r.p,{children:"The TextWatermark plugin is now available as follows:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"ESM builds"}),": Import ",(0,s.jsx)(r.a,{href:"/lightweight-charts/docs/next/api/functions/createTextWatermark",children:(0,s.jsx)(r.code,{children:"createTextWatermark"})})," directly."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Standalone script build"}),": Access via ",(0,s.jsx)(r.code,{children:"LightweightCharts.createTextWatermark"}),"."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"changes-in-options",children:"Changes in Options"}),"\n",(0,s.jsx)(r.p,{children:"The options structure for watermarks has been revised:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Multiple Lines"}),": The plugin now supports multiple lines of text."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Text Options"}),": Text-related options are now defined per line within the ",(0,s.jsx)(r.code,{children:"lines"})," property of the options object."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"attaching-the-watermark",children:"Attaching the Watermark"}),"\n",(0,s.jsxs)(r.p,{children:["To use the plugin, you need pass a pane object to the ",(0,s.jsx)(r.code,{children:"createTextWatermark"})," function. The pane object specifies where the watermark should be attached:"]}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Single Pane"}),": If you're using only one pane, you can easily fetch it using ",(0,s.jsx)(r.code,{children:"chart.panes()[0]"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Multiple Panes"}),": For charts with multiple panes, you'll need to specify which pane to attach the watermark to."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"example-implementing-a-text-watermark",children:"Example: Implementing a Text Watermark"}),"\n",(0,s.jsx)(r.p,{children:"Here's a comprehensive example demonstrating how to implement a text watermark in the new version:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:"const chart = createChart(container, options);\nconst mainSeries = chart.addSeries(LineSeries);\nmainSeries.setData(generateData());\n\nconst firstPane = chart.panes()[0];\ncreateTextWatermark(firstPane, {\n    horzAlign: 'center',\n    vertAlign: 'center',\n    lines: [\n        {\n            text: 'Hello',\n            color: 'rgba(255,0,0,0.5)',\n            fontSize: 100,\n            fontStyle: 'bold',\n        },\n        {\n            text: 'This is a text watermark',\n            color: 'rgba(0,0,255,0.5)',\n            fontSize: 50,\n            fontStyle: 'italic',\n            fontFamily: 'monospace',\n        },\n    ],\n});\n"})}),"\n",(0,s.jsx)(r.h2,{id:"plugin-typings",children:"Plugin Typings"}),"\n",(0,s.jsx)(r.h3,{id:"overview-changes-plugins",children:"Overview of Changes"}),"\n",(0,s.jsx)(r.p,{children:"Some of the plugin types and interfaces have been renamed due to the additional\nof Pane Primitives."}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"ISeriesPrimitivePaneView"})," \u2192 ",(0,s.jsx)(r.code,{children:"IPrimitivePaneView"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"ISeriesPrimitivePaneRenderer"})," \u2192 ",(0,s.jsx)(r.code,{children:"IPrimitivePaneRenderer"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"SeriesPrimitivePaneViewZOrder"})," \u2192 ",(0,s.jsx)(r.code,{children:"PrimitivePaneViewZOrder"})]}),"\n"]})]})}function o(e={}){let{wrapper:r}={...(0,t.a)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},50065:function(e,r,n){n.d(r,{Z:function(){return l},a:function(){return a}});var i=n(67294);let s={},t=i.createContext(s);function a(e){let r=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:r},e.children)}}}]);