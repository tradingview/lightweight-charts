"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["48706"],{50260:function(t,i,e){e.r(i),e.d(i,{default:()=>N});var s=e("85893"),h=e("11199"),r=e("57459"),l=e("67294");function n(t){return(0,s.jsxs)("a",{className:"Banner_RpyO",href:t.link,children:[(0,s.jsx)("div",{className:"BannerContent_bHEU",children:t.text}),(0,s.jsx)("div",{className:"BannerButton_rLff",children:t.linkText})]})}function o(){return(0,s.jsxs)("svg",{height:28,width:28,children:[(0,s.jsx)("g",{clipPath:"url(#clip0_1507_70976)",children:(0,s.jsx)("path",{d:"M11 8L17 14L11 20",stroke:"var(--arrow-fill-color, #131722)",fill:"none",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_1507_70976",children:(0,s.jsx)("rect",{width:"28",height:"28",fill:"white"})})})]})}function a(t){return(0,s.jsxs)("a",{href:t.link,className:"Card_rT3V",children:[(0,s.jsxs)("div",{className:"CardHeader_K7l4",children:[(0,s.jsx)("h2",{children:t.title}),(0,s.jsx)(o,{})]}),(0,s.jsx)("p",{children:t.content})]})}function u(t){let i=t.cardLinks.map(t=>(0,s.jsx)(a,{...t},t.title));return(0,s.jsx)("section",{className:"CardsContainer_VA1i",children:i})}function c(){return(0,s.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 8.75C7.5 8.05964 8.05964 7.5 8.75 7.5H12V6H8.75C7.23122 6 6 7.23122 6 8.75V19.25C6 20.7688 7.23122 22 8.75 22H19.25C20.7688 22 22 20.7688 22 19.25V16H20.5V19.25C20.5 19.9404 19.9404 20.5 19.25 20.5H8.75C8.05964 20.5 7.5 19.9404 7.5 19.25V8.75ZM14.9993 7.5H19.4387L12.6455 14.2932L13.7061 15.3539L20.4993 8.56066V13.045H21.9993V6.75V6H21.2493H14.9993V7.5Z",fill:"currentColor"})})}function d(t){return(0,s.jsxs)("a",{className:"SquareButton_KZv4",href:t.link,"data-primary":t.primary,children:[(0,s.jsx)("span",{children:t.title}),t.external?(0,s.jsx)(c,{}):""]})}var f=e("79207"),m=e("3768");function p(t){let{canSelect:i,canCopy:e,name:h,style:r,startLineNumber:l,lines:n,lineNumberOverrides:o}=t,a=l??1;return(0,s.jsx)("aside",{className:"Block_utv9","data-can-select":i,"data-can-copy":e,"data-name":h,style:{...r},children:(0,s.jsx)("div",{className:"BlockContent_i0oD",children:n.map((t,i)=>(0,s.jsxs)("div",{className:"Line_EWm5",children:[(0,s.jsx)("div",{className:"LineNumber_NepB",children:o&&o.length>i?o[i]:i+a}),t]},i))})})}var g=JSON.parse('{"V":[22.75105,22.7028,22.91657,22.89733,22.58714,22.79207,22.4285,22.12538,22.12127,22.29012,22.47304,22.124,22.62265,22.27654,22.42059,22.21117,22.0404,22.00526,21.98259,21.59455,21.60589,21.3791,21.37931,21.13736,21.09146,20.95892,21.061,21.48838,21.3507,21.7702,21.59947,21.8053,21.88469,21.74813,21.60216,21.37173,21.3791,21.45597,21.50142,21.44207,21.4204,21.4408,21.55359,21.26584,21.4968,21.45966,21.3538,21.35801,21.34126,21.43016,21.19969,21.0912,21.07892,21.05726,21.22916,21.17957,21.0097,20.93522,20.92252,20.59067,20.62412,20.49867,20.23011,20.71467,20.66167,20.50267,20.42967,20.20874,20.39063,20.49467,20.40828,20.44799,20.50617,20.2971,20.23607,20.29511,20.29441,20.58167,20.44466,20.43449,20.38262,20.40917,20.24517,20.00318,20.03567,19.95968,20.0185,20.03165,20.01767,20.009,19.88399,19.62125,19.64218,19.58718,19.68618,19.76699,19.7022,19.66419,19.86817,19.89925,20.07668,20.0164,19.97018,20.40667,20.46167,20.93717,20.73963,20.97367,20.80217,20.78125,20.65367,20.66471,20.58367,20.40367,20.34212,20.51013,20.72114,20.83417,20.6876,20.88618,20.86166,20.76212,20.57017,20.45612,20.38862,20.50012,20.36022,20.42267,20.34317,20.40212,20.20812,20.12014,20.08661,20.37017,20.27117,20.38267,20.57112,20.63462,20.51712,20.49662,21.00767,21.02463,20.8812,20.8221,21.03767,21.25467,21.24567,21.45216,21.23017,20.99112,20.74162,20.76225,20.64774,20.64169,20.41452,20.4991,20.369,20.3724,20.42232,20.42278,20.64722,20.659,20.487,20.443,20.31207,20.2099,20.253,20.2158,20.05311,19.99909,19.93543,19.995,20.02418,19.93575,19.84162,19.51315,19.7631,19.87511,19.90737,19.81483,19.77618,19.7819,19.82768,19.97561,19.7944,19.93861,19.9987,20.02961,20.08661,19.9376,19.70901,19.6249,19.78662,19.7815,19.8271,19.84815,19.8998,19.94024,19.84582,19.89418,19.80646,19.7286,19.67346,19.59882,19.3981,19.52426,19.5284,19.50768,19.45412,19.133,19.2128,18.9867,19.13962,19.17998,19.3486,19.2539,19.2824,19.42142,19.38443,19.59812,19.6082,19.8457,19.8301,19.89561,19.8315,19.74523,19.5896,19.7819,19.806,19.7194,19.8403,19.6886,19.71648,19.80061,19.7486,19.7085,19.6782,19.99051,20.3173,20.04726,20.12367,19.8798,19.8887,19.85975,19.9346,20.23566,20.3803,20.42912,20.4911,20.48312,20.3258,20.2319,20.06612,19.8821,19.90975,20.2144,20.2576,20.42986,20.46866,20.28111,20.3781,20.3959,20.53012,20.4399,20.5466,20.69761,20.8134,20.7169,20.56397,20.56436,20.413,20.2267,20.12912,19.9352,19.8157,19.9533,19.8117,19.68147,19.71811,19.5188,19.65362,19.6144,19.56761,19.712,19.94311,20.11861,20.2737,20.1426,20.25974,20.1544,20.23462,20.4116,20.4735,20.402,20.3606,20.2686,20.1415,20.43947,20.3957,20.34712,20.32312,20.3014,20.48524,20.3139,20.19211,20.2086,20.0495,20.13312,19.9941,19.90511,20.23912,20.3622,20.22447,20.4146,20.677,20.8501,20.9158,21.05812,20.98412,20.88212,20.5114,20.2944,20.22912,20.34551,20.64401,20.41499,20.56167,20.4168,20.83267,20.87124,21.07966,21.11825,21.23516,21.17262,21.17117,21.26562,21.68819,21.49866,21.12875,21.2776,21.1911,21.26817,21.04075,20.98861,20.71917,21.054,21.17097,21.16817,21.27475,21.1621,21.23617,20.99471,20.79351,20.97217,20.9955,20.98875,20.75619,20.8541,21.12849,21.44499,21.46674,21.52774,21.38549,21.60966,21.49149,21.24575,21.14967,21.28462,21.16367,20.95416,21.10482,20.99775,20.97867,21.08117,20.8621,20.68235,20.43553,20.57967,20.53117,20.64162,20.65199,20.88266,20.66024,20.60367,20.81067,20.74746,20.90295,20.96825,20.7816,20.58375,20.55561,20.58396,20.45875,20.44812,20.35825,20.35342,20.5258,20.56024,20.4671,20.4961,20.51725,20.2908,20.60257,20.51649,20.52325,20.28075,20.2275,20.10024,19.97799,19.76576,19.67076,19.59337,19.65561,19.63576,19.60676,19.60862,19.7086,19.61876,19.65261,19.4346,19.13526,19.1797,19.19825,19.02462,19.01076,19.19062,19.1031,19.13262,19.19912,19.1524,19.2408,19.0645,18.9816,18.87626,19.05776,19.15226,19.0539,19.08175,19.4081,19.62287,20.03562,20.0334,19.98025,19.87342,19.90411,19.86439,19.854,20.08262,19.70626,19.51662,19.74962,19.7329,19.98975,19.84857,19.68925,19.61076,19.7883,19.89333,19.86425,19.81625,19.71683,19.7418,19.80781,19.60226,19.76626,19.76265,19.658,19.58296,19.67433,19.4153,19.43279,19.3895,19.30975,19.34562,19.15076,19.36976,19.4901,19.53098,19.24061,19.17408,19.76511,19.5626,19.59857,19.5196,19.51463,19.56075,19.3641,19.41942,19.58826,19.66676,19.81326,19.7829,19.76211,19.76311,19.97766,20.10525,20.2722,20.2716,20.17135,20.07311,20.3157,20.2264,20.39676,20.4625,20.50312,20.3677,20.1765,20.2096,20.35267,20.2996,20.1336,20.2238,20.17076,20.4563,20.3733,20.19123,20.2265,20.088,20.00712,19.79225,19.8315,19.6296,19.81115,19.8027,20.04111,20.12554,20.0872,19.97929,20.06232,19.96875,19.8285,19.7951,19.7092,19.80896,19.87468,19.93682,19.8848,19.77461,19.91834,19.91344,20.11499,20.0363,19.98339,20.04612,20.15542,20.14014,20.0757,20.20916,20.15754,19.9329,19.77726,19.4439,19.2639,19.33584,19.38604,19.9823,20.1534,20.1505,20.2411,20.0882,20.06004,20.0718,19.9922,19.9429,20.29474,20.64345,20.4973,20.4995,20.4925,20.5518,20.56334,20.4018,20.76615,20.89018,20.8361,20.7883,21.0405,21.0438,20.91084,20.75973,20.53584,20.3443,20.4036,20.4276,20.2046,20.33574,20.3885,20.31212,20.54012,20.55962,20.59762,20.4891,20.4921,20.47799,20.43309,20.5816,20.6245,20.49362,20.28501,20.73262,21.58076,21.5319,21.19974,21.0166,20.9161,20.9851,21.2885,21.54462,21.30551,21.30862,21.28351,21.387,21.0151,21.0401,20.7551,20.6306,20.46024,20.5156,20.62751,20.54362,20.42851,20.48999]}');let v=function(){let t=Date.now().valueOf()-972e5*g.V.length;return g.V.map((i,e)=>({time:(t+972e5*e)/1e3,value:i}))}(),w=v.slice(0,-90),b=v.slice(-90);function M(t,i){return{from:i+.5,to:t+i}}function y(t){return t?{background:{color:"#010512"},textColor:"#D1D1D1"}:{background:{color:"#F5F8FF"},textColor:"#2E2E2E"}}function S(){let t=l.useRef(null),i=function(){let{colorMode:t}=(0,f.I)(),i="dark"===t,[e,s]=l.useState(y(i));return l.useEffect(()=>{s(y(i))},[i]),e}(),[e,h]=l.useState(null),[r,n]=l.useState(null),[o,a]=l.useState(0);return l.useEffect(()=>{let e=t.current;if(!e)return;let s=(0,m.createChart)(e,{layout:i,rightPriceScale:{borderVisible:!1,autoScale:!1},grid:{horzLines:{visible:!1},vertLines:{visible:!1}},timeScale:{borderVisible:!1,fixLeftEdge:!0,fixRightEdge:!0},handleScroll:!1,handleScale:!1}),r=s.addSeries(m.AreaSeries,{lineColor:"#2962ff",topColor:"#2962ff",bottomColor:"rgba(41, 98, 255, 0.28)",lineWidth:2});r.setData(w);let l=M(w.length,0);return s.timeScale().setVisibleLogicalRange(l),h(s),n(r),e.setAttribute("reveal","true"),()=>{s.remove(),h(null)}},[]),l.useEffect(()=>{if(!e||!t.current)return;let i=t.current,s=()=>{let{width:t,height:s}=i.getBoundingClientRect();e.resize(t,s);let h=window.innerWidth;e.applyOptions({timeScale:{visible:t>495},rightPriceScale:{visible:h>299}}),e.applyOptions({layout:{fontSize:h<568?6:h<1024?8:12}});let r=M(w.length,o);e.timeScale().setVisibleLogicalRange(r)};return window.addEventListener("resize",s),window.requestAnimationFrame(s),()=>{window.removeEventListener("resize",s)}},[e]),l.useEffect(()=>{e&&e.applyOptions({layout:i})},[i,e]),l.useEffect(()=>{r&&e&&(o>=0&&(r.update(b[o]),e.timeScale().setVisibleLogicalRange(M(w.length,o))),o<b.length-1&&setTimeout(()=>{a(o+1)},1e3))},[r,o,e]),(0,s.jsx)("div",{className:"ChartContainer_Q2nW",ref:t})}function x(t){return(0,s.jsxs)("section",{className:"HeroChartSection_enX5",children:[(0,s.jsx)("div",{className:"HeroChartGradient_LGAa"}),(0,s.jsx)("div",{className:"HeroChartGlass_XXJX"}),(0,s.jsx)("figure",{className:"HeroChartFigure_YLjc",children:(0,s.jsx)(S,{})}),t.codeBlocks.map(t=>(0,s.jsx)(p,{...t},t.name)),(0,s.jsx)("div",{className:"HeroChartFadeBottom_BbBJ"}),(0,s.jsx)("div",{className:"HeroChartFadeBottomDeep_u09S"})]})}function _(t){let{header:i,paragraph:e,ctaLinks:h,codeBlocks:r}=t;return(0,s.jsxs)("section",{className:"HeroContainer_V2Ap",children:[(0,s.jsxs)("main",{className:"HeroMain__yG0",children:[(0,s.jsx)("h1",{children:i}),(0,s.jsx)("p",{children:e}),(0,s.jsx)("nav",{className:"HeroButtons_NXTe",children:h.map(t=>(0,s.jsx)(d,{...t},t.link))})]}),(0,s.jsx)(x,{codeBlocks:r??[]})]})}let C=[{title:"Getting started",link:"docs",content:"Discover how to install the library, and create your first chart"},{title:"Tutorials",link:"tutorials",content:"Tutorials, examples, and framework integrations"},{title:"API reference",link:"docs/api",content:"View the API reference documentation"},{title:"GitHub issues",link:"https://github.com/tradingview/lightweight-charts/issues",content:"Report a bug, or get answers to your questions"}],j=[{title:"Get started",link:"docs",primary:!0},{title:"Explore features",link:"https://www.tradingview.com/lightweight-charts/",external:!0}],E=[{startLineNumber:1,lineNumberOverrides:["~$",""],canCopy:!0,canSelect:!0,style:{left:"20%",bottom:-28,transformOrigin:"center left"},name:"npm",lines:[(0,s.jsx)("span",{children:"npm install"},"1"),(0,s.jsx)("span",{children:"\xa0\xa0\xa0\xa0--save lightweight-charts"},"2")]},{startLineNumber:1,canCopy:!1,canSelect:!1,style:{right:"var(--right-code-block-position)",top:"var(--import-code-block-top-position)",transformOrigin:"center right"},name:"import",lines:[(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{children:"import"}),(0,s.jsx)("span",{children:" { "}),"createChart",(0,s.jsx)("span",{children:" } "}),(0,s.jsx)("span",{children:" from"})]},"1"),(0,s.jsxs)("span",{children:["\xa0\xa0",(0,s.jsx)("span",{children:"'lightweight-charts'"}),";"]},"2"),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{children:"const"})," chart ="]},"3"),(0,s.jsxs)("span",{children:["\xa0\xa0",(0,s.jsx)("span",{children:"createChart"}),(0,s.jsx)("span",{children:"("}),"container",(0,s.jsx)("span",{children:")"}),";"]},"4")]},{startLineNumber:39,canCopy:!1,canSelect:!1,style:{left:"calc(-1 * var(--hero-chart-padding-left) + var(--main-code-block-left-adjustment))",top:-20,transformOrigin:"top left",maxWidth:"489px"},name:"chart-code",lines:[(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{"data-c3":!0,children:"const"})," chartOptions =",(0,s.jsx)("span",{children:" { "}),"layout: ",(0,s.jsx)("span",{children:" { "})," background:"]},"1"),(0,s.jsxs)("span",{children:["\xa0\xa0",(0,s.jsx)("span",{children:" { "}),"type: ",(0,s.jsx)("span",{"data-c1":!0,children:"'solid'"}),", color: ",(0,s.jsx)("span",{"data-c1":!0,children:"'transparent'"}),(0,s.jsx)("span",{children:" } "}),(0,s.jsx)("span",{children:" } "}),(0,s.jsx)("span",{children:" }"}),";"]},"2"),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{"data-c3":!0,children:"const"})," chart = ",(0,s.jsx)("span",{"data-c4":!0,children:"createChart"}),(0,s.jsx)("span",{children:"("}),"container, chartOptions",(0,s.jsx)("span",{children:")"}),";"]},"3"),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{"data-c3":!0,children:"const"})," areaSeries = chart.",(0,s.jsx)("span",{"data-c4":!0,children:"addSeries"}),(0,s.jsx)("span",{children:"(AreaSeries, "}),(0,s.jsx)("span",{children:"{ "})]},"4"),(0,s.jsxs)("span",{children:["\xa0\xa0lineColor: ",(0,s.jsx)("span",{"data-c1":!0,children:"'#2962ff'"}),", topColor:"," ",(0,s.jsx)("span",{"data-c1":!0,children:"'#2962ff'"}),","]},"5"),(0,s.jsxs)("span",{children:["\xa0\xa0bottomColor:"," ",(0,s.jsx)("span",{"data-c1":!0,children:"'rgba(41, 98, 255, 0.28)'"}),(0,s.jsx)("span",{children:" }"}),(0,s.jsx)("span",{children:")"}),";"]},"6")]},{startLineNumber:38,canCopy:!1,canSelect:!1,style:{right:-12,top:-8,transformOrigin:"top right",maxWidth:"calc(100vw - 60px)"},name:"chart-code-phone",lines:[(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{"data-c4":!0,children:"createChart"}),(0,s.jsx)("span",{children:"("}),"container, chartOptions",(0,s.jsx)("span",{children:")"}),";"]},"3"),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{"data-c3":!0,children:"const"})," areaSeries ="]},"4"),(0,s.jsxs)("span",{children:["\xa0\xa0chart.",(0,s.jsx)("span",{"data-c4":!0,children:"addSeries"}),(0,s.jsx)("span",{children:"(AreaSeries, "}),(0,s.jsx)("span",{children:"{ "}),"lineColor:"]},"5"),(0,s.jsxs)("span",{children:["\xa0\xa0\xa0\xa0",(0,s.jsx)("span",{"data-c1":!0,children:"'#2962ff'"}),", topColor:"," ",(0,s.jsx)("span",{"data-c1":!0,children:"'#2962ff'"}),","]},"6"),(0,s.jsxs)("span",{children:["\xa0\xa0\xa0\xa0bottomColor:"," ",(0,s.jsx)("span",{"data-c1":!0,children:"'rgba(41, 98, 255,'"})]},"7"),(0,s.jsxs)("span",{children:["\xa0\xa0\xa0\xa0",(0,s.jsx)("span",{"data-c1":!0,children:"'0.28)'"}),(0,s.jsx)("span",{children:" }"}),(0,s.jsx)("span",{children:")"}),";"]},"8")]}],z=`Lightweight Charts\u{2122} is a library for creating interactive financial charts. This documentation site provides all the information needed to get started with Lightweight Charts\u{2122} and help you make the most of its features.`;function k(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n,{text:"Exciting Update: Version 5.0 now available, introducing pane support and decreased bundle size.",link:"https://tradingview.github.io/lightweight-charts/docs/release-notes#500",linkText:"Read more"}),(0,s.jsxs)("div",{className:"RootContainer_A6Cr",children:[(0,s.jsx)(_,{ctaLinks:j,codeBlocks:E,header:"Lightweight Charts\u2122 Documentation",paragraph:z}),(0,s.jsx)(u,{cardLinks:C})]})]})}let N=function(){return(0,s.jsxs)(r.Z,{title:"Home",description:z,children:[(0,s.jsxs)(h.Z,{children:[(0,s.jsx)("link",{rel:"preload",href:"https://fonts.cdnfonts.com/s/60249/Euclid Circular B SemiBold.woff",as:"font",type:"font/woff",crossOrigin:"anonymous"}),(0,s.jsx)("link",{rel:"preload",href:"https://fonts.cdnfonts.com/s/13494/Menlo-Regular.woff",as:"font",type:"font/woff",crossOrigin:"anonymous"})]}),(0,s.jsx)(k,{})]})}},3768:function(t,i,e){function s(t){var i=t.width,e=t.height;if(i<0)throw Error("Negative width is not allowed for Size");if(e<0)throw Error("Negative height is not allowed for Size");return{width:i,height:e}}function h(t,i){return t.width===i.width&&t.height===i.height}e.r(i),e.d(i,{PriceScaleMode:()=>b,AreaSeries:()=>sQ,createYieldCurveChart:()=>sT,createSeriesMarkers:()=>h_,createOptionsChart:()=>sL,createUpDownMarkers:()=>hB,createChart:()=>sv,createTextWatermark:()=>hs,LastPriceAnimationMode:()=>y,TrackingModeExitMode:()=>M,defaultHorzScaleBehavior:()=>sw,isUTCTimestamp:()=>iH,LineSeries:()=>sE,createImageWatermark:()=>ha,BarSeries:()=>sY,CandlestickSeries:()=>sX,ColorType:()=>x,HistogramSeries:()=>s2,LineStyle:()=>g,isBusinessDay:()=>i$,MismatchDirection:()=>w,CrosshairMode:()=>v,createChartEx:()=>sg,LineType:()=>p,customSeriesDefaultOptions:()=>hT,TickMarkType:()=>_,BaselineSeries:()=>s$,version:()=>hP,PriceLineSource:()=>S});var r,l,n,o,a,u,c,d,f,m,p,g,v,w,b,M,y,S,x,_,C=function(){function t(t){var i=this;this._resolutionListener=function(){return i._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var i=this,e={next:t};return this._observers.push(e),{unsubscribe:function(){i._observers=i._observers.filter(function(t){return t!==e})}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(i){return i.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}(),j=function(){function t(t,i,e){var h;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=s({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=i?i:function(t){return t},this._allowResizeObserver=null===(h=null==e?void 0:e.allowResizeObserver)||void 0===h||h,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,i;if(null===this._canvasElement)throw Error("Object is disposed");null===(t=this._canvasElementResizeObserver)||void 0===t||t.disconnect(),this._canvasElementResizeObserver=null,null===(i=this._devicePixelRatioObservable)||void 0===i||i.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return s({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=s(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(i){return i!==t})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(i){return i!==t})},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var i=this.bitmapSize;!h(i,t)&&(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(i,t))},t.prototype._emitBitmapSizeChanged=function(t,i){var e=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(e,t,i)})},t.prototype._suggestNewBitmapSize=function(t){var i=this._suggestedBitmapSize,e=s(this._transformBitmapSize(t,this._canvasElementClientSize)),r=h(this.bitmapSize,e)?null:e;!(null===i&&null===r||null!==i&&null!==r&&h(i,r))&&(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(i,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,i){var e=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(e,t,i)})},t.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}new Promise(function(t){var i=new ResizeObserver(function(e){t(e.every(function(t){return"devicePixelContentBoxSize"in t})),i.disconnect()});i.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1}).then(function(i){return i?t._initResizeObserver():t._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var i=E(this._canvasElement);if(null===i)throw Error("No window is associated with the canvas");this._devicePixelRatioObservable=new C(i),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){if(null!==this._canvasElement){var t,i,e=E(this._canvasElement);if(null!==e){var h,r,l=null!==(i=null===(t=this._devicePixelRatioObservable)||void 0===t?void 0:t.value)&&void 0!==i?i:e.devicePixelRatio,n=this._canvasElement.getClientRects(),o=void 0!==n[0]?(h=n[0],r=l,s({width:Math.round(h.left*r+h.width*r)-Math.round(h.left*r),height:Math.round(h.top*r+h.height*r)-Math.round(h.top*r)})):s({width:this._canvasElementClientSize.width*l,height:this._canvasElementClientSize.height*l});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver(function(i){var e=i.find(function(i){return i.target===t._canvasElement});if(e&&e.devicePixelContentBoxSize&&e.devicePixelContentBoxSize[0]){var h=e.devicePixelContentBoxSize[0],r=s({width:h.inlineSize,height:h.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function E(t){return t.ownerDocument.defaultView}var z=function(){function t(t,i,e){if(0===i.width||0===i.height)throw TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=i,0===e.width||0===e.height)throw TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=e,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function k(t,i){var e=t.canvasElementClientSize;if(0===e.width||0===e.height)return null;var s=t.bitmapSize;if(0===s.width||0===s.height)return null;var h=t.canvasElement.getContext("2d",i);return null===h?null:new z(h,e,s)}let N={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};function R(t,i){let e={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[i];t.setLineDash(e)}function B(t,i,e,s){t.beginPath();let h=t.lineWidth%2?.5:0;t.moveTo(e,i+h),t.lineTo(s,i+h),t.stroke()}function T(t,i){if(!t)throw Error("Assertion failed"+(i?": "+i:""))}function P(t){if(void 0===t)throw Error("Value is undefined");return t}function W(t){if(null===t)throw Error("Value is null");return t}function L(t){return W(P(t))}(r=p||(p={}))[r.Simple=0]="Simple",r[r.WithSteps=1]="WithSteps",r[r.Curved=2]="Curved",(l=g||(g={}))[l.Solid=0]="Solid",l[l.Dotted=1]="Dotted",l[l.Dashed=2]="Dashed",l[l.LargeDashed=3]="LargeDashed",l[l.SparseDotted=4]="SparseDotted";class I{constructor(){this.t=[]}i(t,i,e){this.t.push({h:t,l:i,o:!0===e})}_(t){let i=this.t.findIndex(i=>t===i.h);i>-1&&this.t.splice(i,1)}u(t){this.t=this.t.filter(i=>i.l!==t)}p(t,i,e){let s=[...this.t];this.t=this.t.filter(t=>!t.o),s.forEach(s=>s.h(t,i,e))}v(){return this.t.length>0}m(){this.t=[]}}function F(t,...i){for(let e of i)for(let i in e)void 0!==e[i]&&Object.prototype.hasOwnProperty.call(e,i)&&!["__proto__","constructor","prototype"].includes(i)&&("object"!=typeof e[i]||void 0===t[i]||Array.isArray(e[i])?t[i]=e[i]:F(t[i],e[i]));return t}function O(t){return"number"==typeof t&&isFinite(t)}function D(t){return"number"==typeof t&&t%1==0}function V(t){return"string"==typeof t}function G(t){return"boolean"==typeof t}function $(t){let i,e,s;if(!t||"object"!=typeof t)return t;for(e in i=Array.isArray(t)?[]:{},t)t.hasOwnProperty(e)&&(s=t[e],i[e]=s&&"object"==typeof s?$(s):s);return i}function H(t){return null!==t}function A(t){return null===t?void 0:t}let Q="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function U(t,i,e){return void 0===i&&(i=Q),`${e=void 0!==e?`${e} `:""}${t}px ${i}`}class q{constructor(t){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=t}N(){let t=this.M,i=this.F(),e=this.W();return t.k===i&&t.T===e||(t.k=i,t.T=e,t.P=U(i,e),t.A=2.5/12*i,t.I=t.A,t.V=i/12*t.C,t.B=i/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function K(t){return t<0?0:t>255?255:Math.round(t)||0}function Y(t){return .199*t[0]+.687*t[1]+.114*t[2]}class Z{constructor(t,i){this.q=new Map,this.j=t,i&&(this.q=i)}Y(t,i){if("transparent"===t)return t;let e=this.K(t),s=e[3];return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${i*s})`}Z(t){let i=this.K(t);return{G:`rgb(${i[0]}, ${i[1]}, ${i[2]})`,X:Y(i)>160?"black":"white"}}J(t){return Y(this.K(t))}tt(t,i,e){var s;let[h,r,l,n]=this.K(t),[o,a,u,c]=this.K(i),d=[K(h+e*(o-h)),K(r+e*(a-r)),K(l+e*(u-l)),(s=n+e*(c-n))<=0||s>1?Math.min(Math.max(s,0),1):Math.round(1e4*s)/1e4];return`rgba(${d[0]}, ${d[1]}, ${d[2]}, ${d[3]})`}K(t){let i=this.q.get(t);if(i)return i;let e=(function(t){let i=document.createElement("div");i.style.display="none",document.body.appendChild(i),i.style.color=t;let e=window.getComputedStyle(i).color;return document.body.removeChild(i),e})(t).match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!e){if(this.j.length)for(let i of this.j){let e=i(t);if(e)return this.q.set(t,e),e}throw Error(`Failed to parse color: ${t}`)}let s=[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),e[4]?parseFloat(e[4]):1];return this.q.set(t,s),s}}class J{constructor(){this.it=[]}st(t){this.it=t}nt(t,i,e){this.it.forEach(s=>{s.nt(t,i,e)})}}class X{nt(t,i,e){t.useBitmapCoordinateSpace(t=>this.et(t,i,e))}}class tt extends X{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:i,verticalPixelRatio:e}){if(null===this.rt||null===this.rt.lt)return;let s=this.rt.lt,h=this.rt,r=Math.max(1,Math.floor(i))%2/2,l=l=>{t.beginPath();for(let n=s.to-1;n>=s.from;--n){let s=h.ot[n],o=Math.round(s._t*i)+r,a=s.ut*e,u=l*e+r;t.moveTo(o,a),t.arc(o,a,u,0,2*Math.PI)}t.fill()};h.ct>0&&(t.fillStyle=h.dt,l(h.ft+h.ct)),t.fillStyle=h.vt,l(h.ft)}}function ti(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}let te={from:0,to:1};class ts{constructor(t,i,e){this.Mt=new J,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=i,this.yt=e,this.Mt.st(this.bt)}kt(t){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){let t=this.yt.Dt();t.length!==this.bt.length&&(this.St=t.map(ti),this.bt=this.St.map(t=>{let i=new tt;return i.ht(t),i}),this.Mt.st(this.bt))}Rt(){let t=2===this.Ct.N().mode||!this.Ct.It(),i=this.yt.Vt(),e=this.Ct.Bt(),s=this.O.Et();this.Pt(),i.forEach((i,h)=>{let r=this.St[h],l=i.At(e),n=i.Lt();!t&&null!==l&&i.It()&&null!==n?(r.vt=l.zt,r.ft=l.ft,r.ct=l.Ot,r.ot[0].gt=l.gt,r.ot[0].ut=i.Ft().Nt(l.gt,n.Wt),r.dt=l.Ht??this.O.Ut(r.ot[0].ut/i.Ft().$t()),r.ot[0].wt=e,r.ot[0]._t=s.qt(e),r.lt=te):r.lt=null})}}class th extends X{constructor(t){super(),this.jt=t}et({context:t,bitmapSize:i,horizontalPixelRatio:e,verticalPixelRatio:s}){if(null===this.jt)return;let h=this.jt.Yt.It,r=this.jt.Kt.It;if(!h&&!r)return;let l=Math.round(this.jt._t*e),n=Math.round(this.jt.ut*s);t.lineCap="butt",h&&l>=0&&(t.lineWidth=Math.floor(this.jt.Yt.ct*e),t.strokeStyle=this.jt.Yt.R,t.fillStyle=this.jt.Yt.R,R(t,this.jt.Yt.Zt),function(t,i,e,s){t.beginPath();let h=t.lineWidth%2?.5:0;t.moveTo(i+h,0),t.lineTo(i+h,s),t.stroke()}(t,l,0,i.height)),r&&n>=0&&(t.lineWidth=Math.floor(this.jt.Kt.ct*s),t.strokeStyle=this.jt.Kt.R,t.fillStyle=this.jt.Kt.R,R(t,this.jt.Kt.Zt),B(t,n,0,i.width))}}class tr{constructor(t,i){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new th(this.Gt),this.Jt=t,this.yt=i}kt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){let t=this.Jt.It(),i=this.yt.Qt().N().crosshair,e=this.Gt;if(2===i.mode)return e.Kt.It=!1,void(e.Yt.It=!1);e.Kt.It=t&&this.Jt.ti(this.yt),e.Yt.It=t&&this.Jt.ii(),e.Kt.ct=i.horzLine.width,e.Kt.Zt=i.horzLine.style,e.Kt.R=i.horzLine.color,e.Yt.ct=i.vertLine.width,e.Yt.Zt=i.vertLine.style,e.Yt.R=i.vertLine.color,e._t=this.Jt.si(),e.ut=this.Jt.ni()}}function tl(t,i,e,s,h,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,e,s,h),t.restore()}function tn(t,i,e,s,h,r){t.beginPath(),t.roundRect?t.roundRect(i,e,s,h,r):(t.lineTo(i+s-r[1],e),0!==r[1]&&t.arcTo(i+s,e,i+s,e+r[1],r[1]),t.lineTo(i+s,e+h-r[2]),0!==r[2]&&t.arcTo(i+s,e+h,i+s-r[2],e+h,r[2]),t.lineTo(i+r[3],e+h),0!==r[3]&&t.arcTo(i,e+h,i,e+h-r[3],r[3]),t.lineTo(i,e+r[0]),0!==r[0]&&t.arcTo(i,e,i+r[0],e,r[0]))}function to(t,i,e,s,h,r,l=0,n=[0,0,0,0],o=""){var a;if(t.save(),!l||!o||o===r)return tn(t,i,e,s,h,n),t.fillStyle=r,t.fill(),void t.restore();let u=l/2;tn(t,i+u,e+u,s-l,h-l,(a=-u,n.map(t=>0===t?t:t+a))),"transparent"!==r&&(t.fillStyle=r,t.fill()),"transparent"!==o&&(t.lineWidth=l,t.strokeStyle=o,t.closePath(),t.stroke()),t.restore()}function ta(t,i,e,s,h,r,l){t.save(),t.globalCompositeOperation="copy";let n=t.createLinearGradient(0,0,0,h);n.addColorStop(0,r),n.addColorStop(1,l),t.fillStyle=n,t.fillRect(i,e,s,h),t.restore()}class tu{constructor(t,i){this.ht(t,i)}ht(t,i){this.jt=t,this.ei=i}$t(t,i){return this.jt.It?t.k+t.A+t.I:0}nt(t,i,e,s){if(!this.jt.It||0===this.jt.ri.length)return;let h=this.jt.R,r=this.ei.G,l=t.useBitmapCoordinateSpace(t=>{let l=t.context;l.font=i.P;let n=this.hi(t,i,e,s),o=n.ai;return n.li?to(l,o.oi,o._i,o.ui,o.ci,r,o.di,[o.ft,0,0,o.ft],r):to(l,o.fi,o._i,o.ui,o.ci,r,o.di,[0,o.ft,o.ft,0],r),this.jt.pi&&(l.fillStyle=h,l.fillRect(o.fi,o.mi,o.wi-o.fi,o.gi)),this.jt.Mi&&(l.fillStyle=i.D,l.fillRect(n.li?o.bi-o.di:0,o._i,o.di,o.Si-o._i)),n});t.useMediaCoordinateSpace(({context:t})=>{let e=l.xi;t.font=i.P,t.textAlign=l.li?"right":"left",t.textBaseline="middle",t.fillStyle=h,t.fillText(this.jt.ri,e.Ci,(e._i+e.Si)/2+e.yi)})}hi(t,i,e,s){let h,r,l;let{context:n,bitmapSize:o,mediaSize:a,horizontalPixelRatio:u,verticalPixelRatio:c}=t,d=this.jt.pi||!this.jt.ki?i.C:0,f=this.jt.Pi?i.S:0,m=i.A+this.ei.Ti,p=i.I+this.ei.Ri,g=i.V,v=i.B,w=this.jt.ri,b=i.k,M=e.Di(n,w),y=Math.ceil(e.Ii(n,w)),S=i.S+g+v+y+d,x=Math.max(1,Math.floor(c)),_=Math.round((b+m+p)*c);_%2!=x%2&&(_+=1);let C=f>0?Math.max(1,Math.floor(f*u)):0,j=Math.round(S*u),E=Math.round(d*u),z=Math.round((this.ei.Vi??this.ei.Bi)*c)-Math.floor(.5*c),k=Math.floor(z+x/2-_/2),N=k+_,R="right"===s,B=R?a.width-f:f,T=R?o.width-C:C;return R?(h=T-j,r=T-E,l=B-d-g-f):(h=T+j,r=T+E,l=B+d+g),{li:R,ai:{_i:k,mi:z,Si:N,ui:j,ci:_,ft:2*u,di:C,oi:h,fi:T,wi:r,gi:x,bi:o.width},xi:{_i:k/c,Si:N/c,Ci:l,yi:M}}}}class tc{constructor(t){this.Ei={Bi:0,G:"#000",Ri:0,Ti:0},this.Ai={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.Li={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.zi=new(t||tu)(this.Ai,this.Ei),this.Oi=new(t||tu)(this.Li,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Bi(){return this.Ni(),this.Ei.Bi}kt(){this.xt=!0}$t(t,i=!1){return Math.max(this.zi.$t(t,i),this.Oi.$t(t,i))}Fi(){return this.Ei.Vi||0}Wi(t){this.Ei.Vi=t}Hi(){return this.Ni(),this.Ai.It||this.Li.It}Ui(){return this.Ni(),this.Ai.It}Tt(t){return this.Ni(),this.Ai.pi=this.Ai.pi&&t.N().ticksVisible,this.Li.pi=this.Li.pi&&t.N().ticksVisible,this.zi.ht(this.Ai,this.Ei),this.Oi.ht(this.Li,this.Ei),this.zi}$i(){return this.Ni(),this.zi.ht(this.Ai,this.Ei),this.Oi.ht(this.Li,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.Li.pi=!1,this.qi(this.Ai,this.Li,this.Ei))}}class td extends tc{constructor(t,i,e){super(),this.Jt=t,this.ji=i,this.Yi=e}qi(t,i,e){if(t.It=!1,2===this.Jt.N().mode)return;let s=this.Jt.N().horzLine;if(!s.labelVisible)return;let h=this.ji.Lt();if(!this.Jt.It()||this.ji.Ki()||null===h)return;let r=this.ji.Zi().Z(s.labelBackgroundColor);e.G=r.G,t.R=r.X;let l=2/12*this.ji.k();e.Ti=l,e.Ri=l;let n=this.Yi(this.ji);e.Bi=n.Bi,t.ri=this.ji.Gi(n.gt,h),t.It=!0}}let tf=/[1-9]/g;class tm{constructor(){this.jt=null}ht(t){this.jt=t}nt(t,i){if(null===this.jt||!1===this.jt.It||0===this.jt.ri.length)return;let e=t.useMediaCoordinateSpace(({context:t})=>(t.font=i.P,Math.round(i.Xi.Ii(t,W(this.jt).ri,tf))));if(e<=0)return;let s=i.Ji,h=e+2*s,r=h/2,l=this.jt.Qi,n=this.jt.Bi,o=Math.floor(n-r)+.5;o<0?(n+=Math.abs(0-o),o=Math.floor(n-r)+.5):o+h>l&&(n-=Math.abs(l-(o+h)),o=Math.floor(n-r)+.5);let a=o+h,u=Math.ceil(0+i.S+i.C+i.A+i.k+i.I);t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:e,verticalPixelRatio:s})=>{let h=W(this.jt);t.fillStyle=h.G;let r=Math.round(o*e),l=Math.round(0*s),n=Math.round(a*e),c=Math.round(u*s),d=Math.round(2*e);if(t.beginPath(),t.moveTo(r,l),t.lineTo(r,c-d),t.arcTo(r,c,r+d,c,d),t.lineTo(n-d,c),t.arcTo(n,c,n,c-d,d),t.lineTo(n,l),t.fill(),h.pi){let r=Math.round(h.Bi*e),n=Math.round((l+i.C)*s);t.fillStyle=h.R;let o=Math.max(1,Math.floor(e)),a=Math.floor(.5*e);t.fillRect(r-a,l,o,n-l)}}),t.useMediaCoordinateSpace(({context:t})=>{let e=W(this.jt),h=0+i.S+i.C+i.A+i.k/2;t.font=i.P,t.textAlign="left",t.textBaseline="middle",t.fillStyle=e.R;let r=i.Xi.Di(t,"Apr0");t.translate(o+s,h+r),t.fillText(e.ri,0,0)})}}class tp{constructor(t,i,e){this.xt=!0,this.Xt=new tm,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=t,this.ts=i,this.Yi=e}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){let t=this.Gt;if(t.It=!1,2===this.Ct.N().mode)return;let i=this.Ct.N().vertLine;if(!i.labelVisible)return;let e=this.ts.Et();if(e.Ki())return;t.Qi=e.Qi();let s=this.Yi();if(null===s)return;t.Bi=s.Bi;let h=e.ss(this.Ct.Bt());t.ri=e.ns(W(h)),t.It=!0;let r=this.ts.Zi().Z(i.labelBackgroundColor);t.G=r.G,t.R=r.X,t.pi=e.N().ticksVisible}}class tg{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(t){this.rs=t}Ft(){return this.es}_s(t){this.es=t}us(t){return[]}cs(){return[]}It(){return!0}}(n=v||(v={}))[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC";class tv extends tg{constructor(t,i){let e,s,h,r;super(),this.yt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=t,this.ys=i,this.ks=(e=()=>this.ds,s=()=>this.Ss,t=>{let i=s(),h=e();if(t===W(this.yt).Ps())return{gt:h,Bi:i};{let e=W(t.Lt());return{gt:t.Ts(i,e),Bi:i}}});let l=(h=()=>this.fs,r=()=>this.si(),()=>{let t=this.ts.Et().Rs(h()),i=r();return t&&Number.isFinite(i)?{wt:t,Bi:i}:null});this.Ds=new tp(this,t,l)}N(){return this.ys}Is(t,i){this.xs=t,this.Cs=i}Vs(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}Es(){return this.Cs}As(t,i,e){this.ws||(this.ws=!0),this.ps=!0,this.Ls(t,i,e)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}It(){return this.ps}zs(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.yt=null,this.Vs(),this.Ns()}Fs(t){if(!this.ys.doNotSnapToHiddenSeriesIndices)return t;let i=this.ts,e=i.Et(),s=null,h=null;for(let e of i.Ws()){let i=e.Us().Hs(t,-1);if(i){if(i.$s===t)return t;(null===s||i.$s>s)&&(s=i.$s)}let r=e.Us().Hs(t,1);if(r){if(r.$s===t)return t;(null===h||r.$s<h)&&(h=r.$s)}}let r=[s,h].filter(H);if(0===r.length)return t;let l=e.qt(t),n=r.map(t=>Math.abs(l-e.qt(t)));return r[n.indexOf(Math.min(...n))]}qs(t){let i=this.gs.get(t);i||(i=new tr(this,t),this.gs.set(t,i));let e=this.Ms.get(t);return e||(e=new ts(this.ts,this,t),this.Ms.set(t,e)),[i,e]}ti(t){return t===this.yt&&this.ys.horzLine.visible}ii(){return this.ys.vertLine.visible}js(t,i){this.ps&&this.yt===t||this.vs.clear();let e=[];return this.yt===t&&e.push(this.Ys(this.vs,i,this.ks)),e}cs(){return this.ps?[this.Ds]:[]}Ks(){return this.yt}Ns(){this.ts.Zs().forEach(t=>{this.gs.get(t)?.kt(),this.Ms.get(t)?.kt()}),this.vs.forEach(t=>t.kt()),this.Ds.kt()}Gs(t){return t&&!t.Ps().Ki()?t.Ps():null}Ls(t,i,e){this.Xs(t,i,e)&&this.Ns()}Xs(t,i,e){let s=this.bs,h=this.Ss,r=this.ds,l=this.fs,n=this.yt,o=this.Gs(e);this.fs=t,this.bs=isNaN(t)?NaN:this.ts.Et().qt(t),this.yt=e;let a=null!==o?o.Lt():null;return null!==o&&null!==a?(this.ds=i,this.Ss=o.Nt(i,a)):(this.ds=NaN,this.Ss=NaN),s!==this.bs||h!==this.Ss||l!==this.fs||r!==this.ds||n!==this.yt}Os(){let t=this.ts.Js().map(t=>t.Us().Qs()).filter(H),i=0===t.length?null:Math.max(...t);this.fs=null!==i?i:NaN}Ys(t,i,e){let s=t.get(i);return void 0===s&&(s=new td(this,i,e),t.set(i,s)),s}}function tw(t){return"left"===t||"right"===t}class tb{constructor(t){this.tn=new Map,this.sn=[],this.nn=t}en(t,i){var e;let s=void 0===(e=this.tn.get(t))?i:{rn:Math.max(e.rn,i.rn),hn:e.hn||i.hn};this.tn.set(t,s)}an(){return this.nn}ln(t){let i=this.tn.get(t);return void 0===i?{rn:this.nn}:{rn:Math.max(this.nn,i.rn),hn:i.hn}}_n(){this.un(),this.sn=[{cn:0}]}dn(t){this.un(),this.sn=[{cn:1,Wt:t}]}fn(t){this.pn(),this.sn.push({cn:5,Wt:t})}un(){this.pn(),this.sn.push({cn:6})}vn(){this.un(),this.sn=[{cn:4}]}mn(t){this.un(),this.sn.push({cn:2,Wt:t})}wn(t){this.un(),this.sn.push({cn:3,Wt:t})}gn(){return this.sn}Mn(t){for(let i of t.sn)this.bn(i);this.nn=Math.max(this.nn,t.nn),t.tn.forEach((t,i)=>{this.en(i,t)})}static Sn(){return new tb(2)}static xn(){return new tb(3)}bn(t){switch(t.cn){case 0:this._n();break;case 1:this.dn(t.Wt);break;case 2:this.mn(t.Wt);break;case 3:this.wn(t.Wt);break;case 4:this.vn();break;case 5:this.fn(t.Wt);break;case 6:this.pn()}}pn(){let t=this.sn.findIndex(t=>5===t.cn);-1!==t&&this.sn.splice(t,1)}}class tM{formatTickmarks(t){return t.map(t=>this.format(t))}}function ty(t,i){if(!O(t))return"n/a";if(!D(i)||i<0||i>16)throw TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}class tS extends tM{constructor(t,i){if(super(),i||(i=1),O(t)&&D(t)||(t=100),t<0)throw TypeError("invalid base");this.ji=t,this.Cn=i,this.yn()}format(t){let i=t<0?"\u2212":"";return t=Math.abs(t),i+this.kn(t)}yn(){if(this.Pn=0,this.ji>0&&this.Cn>0){let t=this.ji;for(;t>1;)t/=10,this.Pn++}}kn(t){let i=this.ji/this.Cn,e=Math.floor(t),s="",h=void 0!==this.Pn?this.Pn:NaN;if(i>1){let r=+(Math.round(t*i)-e*i).toFixed(this.Pn);r>=i&&(r-=i,e+=1),s="."+ty(+r.toFixed(this.Pn)*this.Cn,h)}else e=Math.round(e*i)/i,h>0&&(s="."+ty(0,h));return e.toFixed(0)+s}}class tx extends tS{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class t_ extends tM{constructor(t){super(),this.Tn=t}format(t){let i="";return t<0&&(i="-",t=-t),t<995?i+this.Rn(t):t<999995?i+this.Rn(t/1e3)+"K":t<0x3b9ac9fb?(t=1e3*Math.round(t/1e3),i+this.Rn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Rn(t/1e9)+"B")}Rn(t){let i=Math.pow(10,this.Tn);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Tn).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(t,i)=>i)}}let tC=/[2-9]/g;class tj{constructor(t=50){this.Dn=0,this.In=1,this.Vn=1,this.Bn={},this.En=new Map,this.An=t}Ln(){this.Dn=0,this.En.clear(),this.In=1,this.Vn=1,this.Bn={}}Ii(t,i,e){return this.zn(t,i,e).width}Di(t,i,e){let s=this.zn(t,i,e);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}zn(t,i,e){let s=String(i).replace(e||tC,"0");if(this.En.has(s))return P(this.En.get(s)).On;if(this.Dn===this.An){let t=this.Bn[this.Vn];delete this.Bn[this.Vn],this.En.delete(t),this.Vn++,this.Dn--}t.save(),t.textBaseline="middle";let h=t.measureText(s);return t.restore(),0===h.width&&i.length||(this.En.set(s,{On:h,Nn:this.In}),this.Bn[this.In]=s,this.Dn++,this.In++),h}}class tE{constructor(t){this.Fn=null,this.M=null,this.Wn="right",this.Hn=t}Un(t,i,e){this.Fn=t,this.M=i,this.Wn=e}nt(t){null!==this.M&&null!==this.Fn&&this.Fn.nt(t,this.M,this.Hn,this.Wn)}}class tz{constructor(t,i,e){this.$n=t,this.Hn=new tj(50),this.qn=i,this.O=e,this.F=-1,this.Xt=new tE(this.Hn)}Tt(){let t=this.O.jn(this.qn);if(null===t)return null;let i=t.Yn(this.qn)?t.Kn():this.qn.Ft();if(null===i)return null;let e=t.Zn(i);if("overlay"===e)return null;let s=this.O.Gn();return s.k!==this.F&&(this.F=s.k,this.Hn.Ln()),this.Xt.Un(this.$n.$i(),s,e),this.Xt}}class tk extends X{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}Xn(t,i){if(!this.jt?.It)return null;let{ut:e,ct:s,Jn:h}=this.jt;return i>=e-s-7&&i<=e+s+7?{Qn:this.jt,Jn:h}:null}et({context:t,bitmapSize:i,horizontalPixelRatio:e,verticalPixelRatio:s}){if(null===this.jt||!1===this.jt.It)return;let h=Math.round(this.jt.ut*s);h<0||h>i.height||(t.lineCap="butt",t.strokeStyle=this.jt.R,t.lineWidth=Math.floor(this.jt.ct*e),R(t,this.jt.Zt),B(t,h,0,i.width))}}class tN{constructor(t){this.te={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ie=new tk,this.xt=!0,this.se=t,this.ne=t.Qt(),this.ie.ht(this.te)}kt(){this.xt=!0}Tt(){return this.se.It()?(this.xt&&(this.ee(),this.xt=!1),this.ie):null}}class tR extends tN{constructor(t){super(t)}ee(){this.te.It=!1;let t=this.se.Ft(),i=t.re().re;if(2!==i&&3!==i)return;let e=this.se.N();if(!e.baseLineVisible||!this.se.It())return;let s=this.se.Lt();null!==s&&(this.te.It=!0,this.te.ut=t.Nt(s.Wt,s.Wt),this.te.R=e.baseLineColor,this.te.ct=e.baseLineWidth,this.te.Zt=e.baseLineStyle)}}class tB extends X{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}he(){return this.jt}et({context:t,horizontalPixelRatio:i,verticalPixelRatio:e}){let s=this.jt;if(null===s)return;let h=Math.max(1,Math.floor(i)),r=h%2/2,l=Math.round(s.ae.x*i)+r,n=s.ae.y*e;t.fillStyle=s.le,t.beginPath();let o=Math.max(2,1.5*s.oe)*i;t.arc(l,n,o,0,2*Math.PI,!1),t.fill(),t.fillStyle=s._e,t.beginPath(),t.arc(l,n,s.ft*i,0,2*Math.PI,!1),t.fill(),t.lineWidth=h,t.strokeStyle=s.ue,t.beginPath(),t.arc(l,n,s.ft*i+h/2,0,2*Math.PI,!1),t.stroke()}}let tT=[{ce:0,de:.25,fe:4,pe:10,ve:.25,me:0,we:.4,ge:.8},{ce:.25,de:.525,fe:10,pe:14,ve:0,me:0,we:.8,ge:0},{ce:.525,de:1,fe:14,pe:14,ve:0,me:0,we:0,ge:0}];class tP{constructor(t){this.Xt=new tB,this.xt=!0,this.Me=!0,this.be=performance.now(),this.Se=this.be-1,this.xe=t}Ce(){this.Se=this.be-1,this.kt()}ye(){if(this.kt(),2===this.xe.N().lastPriceAnimation){let t=performance.now(),i=this.Se-t;if(i>0)return void(i<650&&(this.Se+=2600));this.be=t,this.Se=t+2600}}kt(){this.xt=!0}ke(){this.Me=!0}It(){return 0!==this.xe.N().lastPriceAnimation}Pe(){switch(this.xe.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Se}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Me=!1):this.Me&&(this.Te(),this.Me=!1),this.Xt}Rt(){this.Xt.ht(null);let t=this.xe.Qt().Et(),i=t.Re(),e=this.xe.Lt();if(null===i||null===e)return;let s=this.xe.De(!0);if(s.Ie||!i.Ve(s.$s))return;let h={x:t.qt(s.$s),y:this.xe.Ft().Nt(s.gt,e.Wt)},r=s.R,l=this.xe.N().lineWidth,n=this.Be(this.Ee(),r);this.Xt.ht({le:r,oe:l,_e:n._e,ue:n.ue,ft:n.ft,ae:h})}Te(){let t=this.Xt.he();if(null!==t){let i=this.Be(this.Ee(),t.le);t._e=i._e,t.ue=i.ue,t.ft=i.ft}}Ee(){return this.Pe()?performance.now()-this.be:2599}Ae(t,i,e,s){return this.xe.Qt().Zi().Y(t,e+(s-e)*i)}Be(t,i){var e;let s;let h=t%2600/2600;for(let t of tT)if(h>=t.ce&&h<=t.de){s=t;break}T(void 0!==s,"Last price animation internal logic error");let r=(h-s.ce)/(s.de-s.ce);return{_e:this.Ae(i,r,s.ve,s.me),ue:this.Ae(i,r,s.we,s.ge),ft:(e=s.fe)+(s.pe-e)*r}}}class tW extends tN{constructor(t){super(t)}ee(){let t=this.te;t.It=!1;let i=this.se.N();if(!i.priceLineVisible||!this.se.It())return;let e=this.se.De(0===i.priceLineSource);e.Ie||(t.It=!0,t.ut=e.Bi,t.R=this.se.Le(e.R),t.ct=i.priceLineWidth,t.Zt=i.priceLineStyle)}}class tL extends tc{constructor(t){super(),this.Jt=t}qi(t,i,e){t.It=!1,i.It=!1;let s=this.Jt;if(!s.It())return;let h=s.N(),r=h.lastValueVisible,l=""!==s.ze(),n=0===h.seriesLastValueMode,o=s.De(!1);if(o.Ie)return;r&&(t.ri=this.Oe(o,r,n),t.It=0!==t.ri.length),(l||n)&&(i.ri=this.Ne(o,r,l,n),i.It=i.ri.length>0);let a=s.Le(o.R),u=this.Jt.Qt().Zi().Z(a);e.G=u.G,e.Bi=o.Bi,i.Ht=s.Qt().Ut(o.Bi/s.Ft().$t()),t.Ht=a,t.R=u.X,i.R=u.X}Ne(t,i,e,s){let h="",r=this.Jt.ze();return e&&0!==r.length&&(h+=`${r} `),i&&s&&(h+=this.Jt.Ft().Fe()?t.We:t.He),h.trim()}Oe(t,i,e){return i?e?this.Jt.Ft().Fe()?t.He:t.We:t.ri:""}}function tI(t,i,e,s){let h=Number.isFinite(i),r=Number.isFinite(e);return h&&r?t(i,e):h||r?h?i:e:s}class tF{constructor(t,i){this.Ue=t,this.$e=i}qe(t){return null!==t&&this.Ue===t.Ue&&this.$e===t.$e}je(){return new tF(this.Ue,this.$e)}Ye(){return this.Ue}Ke(){return this.$e}Ze(){return this.$e-this.Ue}Ki(){return this.$e===this.Ue||Number.isNaN(this.$e)||Number.isNaN(this.Ue)}Mn(t){return null===t?this:new tF(tI(Math.min,this.Ye(),t.Ye(),-1/0),tI(Math.max,this.Ke(),t.Ke(),1/0))}Ge(t){if(!O(t)||0==this.$e-this.Ue)return;let i=.5*(this.$e+this.Ue),e=this.$e-i,s=this.Ue-i;e*=t,s*=t,this.$e=i+e,this.Ue=i+s}Xe(t){O(t)&&(this.$e+=t,this.Ue+=t)}Je(){return{minValue:this.Ue,maxValue:this.$e}}static Qe(t){return null===t?null:new tF(t.minValue,t.maxValue)}}class tO{constructor(t,i){this.tr=t,this.ir=i||null}sr(){return this.tr}nr(){return this.ir}Je(){return{priceRange:null===this.tr?null:this.tr.Je(),margins:this.ir||void 0}}static Qe(t){return null===t?null:new tO(tF.Qe(t.priceRange),t.margins)}}let tD=[2,4,8,16,32,64,128,256,512];class tV extends tN{constructor(t,i){super(t),this.er=i}ee(){let t=this.te;t.It=!1;let i=this.er.N();if(!this.se.It()||!i.lineVisible)return;let e=this.er.rr();null!==e&&(t.It=!0,t.ut=e,t.R=i.color,t.ct=i.lineWidth,t.Zt=i.lineStyle,t.Jn=this.er.N().id)}}class tG extends tc{constructor(t,i){super(),this.xe=t,this.er=i}qi(t,i,e){t.It=!1,i.It=!1;let s=this.er.N(),h=s.axisLabelVisible,r=""!==s.title,l=this.xe;if(!h||!l.It())return;let n=this.er.rr();if(null===n)return;r&&(i.ri=s.title,i.It=!0),i.Ht=l.Qt().Ut(n/l.Ft().$t()),t.ri=this.hr(s.price),t.It=!0;let o=this.xe.Qt().Zi().Z(s.axisLabelColor||s.color);e.G=o.G;let a=s.axisLabelTextColor||o.X;t.R=a,i.R=a,e.Bi=n}hr(t){let i=this.xe.Lt();return null===i?"":this.xe.Ft().Gi(t,i.Wt)}}class t${constructor(t,i){this.xe=t,this.ys=i,this.ar=new tV(t,this),this.$n=new tG(t,this),this.lr=new tz(this.$n,t,t.Qt())}_r(t){F(this.ys,t),this.kt(),this.xe.Qt().ur()}N(){return this.ys}cr(){return this.ar}dr(){return this.lr}pr(){return this.$n}kt(){this.ar.kt(),this.$n.kt()}rr(){let t=this.xe,i=t.Ft();if(t.Qt().Et().Ki()||i.Ki())return null;let e=t.Lt();return null===e?null:i.Nt(this.ys.price,e.Wt)}}class tH{constructor(){this.vr=new WeakMap}mr(t,i,e){let s=1/i*e;return t>=s?1:Math.min(Math.pow(2,Math.floor(Math.log2(s/t))),512)}wr(t,i,e,s=!1,h){if(0===t.length||i<=1)return t;let r=this.gr(i);if(r<=1)return t;let l=this.Mr(t),n=l.br.get(r);return void 0!==n||(n=this.Sr(t,r,e,s,h,l.br),l.br.set(r,n)),n}Cr(t,i,e,s,h=!1,r){if(e<1||0===t.length)return t;let l=this.Mr(t),n=l.br.get(e);if(!n)return this.wr(t,e,s,h,r);let o=this.yr(t,i,e,n,h,s,r);return l.br.set(e,o),o}gr(t){if(t<=2)return 2;for(let i of tD)if(t<=i)return i;return 512}kr(t){if(0===t.length)return 0;let i=t[0],e=t[t.length-1];return 31*t.length+17*i.$s+13*e.$s}Sr(t,i,e,s=!1,h,r=new Map){if(2===i)return this.Pr(t,2,e,s,h);let l=i/2,n=r.get(l);return n||(n=this.Sr(t,l,e,s,h,r),r.set(l,n)),this.Tr(n,e,s,h)}Pr(t,i,e,s=!1,h){let r=this.Rr(t,i,e,s,h);return this.Dr(r,s)}Tr(t,i,e=!1,s){let h=this.Rr(t,2,i,e,s);return this.Dr(h,e)}Rr(t,i,e,s=!1,h){let r=[];for(let l=0;l<t.length;l+=i)if(t.length-l>=i){let i=this.Ir(t[l],t[l+1],e,s,h);i.Vr=!1,r.push(i)}else if(0===r.length)r.push(this.Br(t[l],!0));else{let i=r[r.length-1];r[r.length-1]=this.Er(i,t[l],e,s,h)}return r}Ar(t,i){return(t??1)+(i??1)}Ir(t,i,e,s=!1,h){if(!s||!e||!h){let e=t.Wt[1]>i.Wt[1]?t.Wt[1]:i.Wt[1],s=t.Wt[2]<i.Wt[2]?t.Wt[2]:i.Wt[2];return{Lr:t.$s,zr:i.$s,Or:t.wt,Nr:i.wt,Fr:t.Wt[0],Wr:e,Hr:s,Ur:i.Wt[3],$r:this.Ar(t.$r,i.$r),qr:void 0,Vr:!1}}let r=e(this.jr(t,h),this.jr(i,h)),l=h(r),n=l.length?l[l.length-1]:0;return{Lr:t.$s,zr:i.$s,Or:t.wt,Nr:i.wt,Fr:t.Wt[0],Wr:Math.max(t.Wt[1],n),Hr:Math.min(t.Wt[2],n),Ur:n,$r:this.Ar(t.$r,i.$r),qr:r,Vr:!1}}Er(t,i,e,s=!1,h){if(!s||!e||!h)return{Lr:t.Lr,zr:i.$s,Or:t.Or,Nr:i.wt,Fr:t.Fr,Wr:t.Wr>i.Wt[1]?t.Wr:i.Wt[1],Hr:t.Hr<i.Wt[2]?t.Hr:i.Wt[2],Ur:i.Wt[3],$r:t.$r+(i.$r??1),qr:t.qr,Vr:!1};let r=t.qr,l=this.jr(i,h),n=r?{data:r,index:t.Lr,originalTime:t.Or,time:t.Or,priceValues:h(r)}:null,o=n?e(n,l):l.data,a=n?h(o):l.priceValues,u=a.length?a[a.length-1]:0;return{Lr:t.Lr,zr:i.$s,Or:t.Or,Nr:i.wt,Fr:t.Fr,Wr:Math.max(t.Wr,u),Hr:Math.min(t.Hr,u),Ur:u,$r:t.$r+(i.$r??1),qr:o,Vr:!1}}Yr(t,i,e,s,h,r,l=!1,n){let o=i===s?h:t[i];if(e-i==1)return this.Br(o,!0);let a=i+1===s?h:t[i+1],u=this.Ir(o,a,r,l,n);for(let o=i+2;o<e;o++){let i=o===s?h:t[o];u=this.Er(u,i,r,l,n)}return u}jr(t,i){let e=t.he??{};return{data:t.he,index:t.$s,originalTime:t.Kr,time:t.wt,priceValues:i(e)}}Zr(t,i=!1){let e=!0===i,s=!!t.qr;return{$s:t.Lr,wt:t.Or,Kr:t.Or,Wt:[e?t.Ur:t.Fr,t.Wr,t.Hr,t.Ur],$r:t.$r,he:e?s?t.qr:{wt:t.Or}:void 0}}Dr(t,i=!1){return t.map(t=>this.Zr(t,i))}yr(t,i,e,s,h=!1,r,l){if(0===s.length)return s;let n=t.length-1,o=Math.floor(n/e)*e;if(Math.min(o+e,t.length)-o<e&&t.length>e){let s=t.slice();return s[s.length-1]=i,this.wr(t,e,r,h,l)}if(Math.floor((n-1)/e)===Math.floor(n/e)||1===s.length){let a=Math.min(o+e,t.length),u=a-o;if(u<=0)return s;let c=1===u?this.Br(o===n?i:t[o],!0):this.Yr(t,o,a,n,i,r,h,l);return s[s.length-1]=this.Zr(c,h),s}{let s=t.slice();return s[s.length-1]=i,this.wr(s,e,r,h,l)}}Br(t,i=!1){return{Lr:t.$s,zr:t.$s,Or:t.wt,Nr:t.wt,Fr:t.Wt[0],Wr:t.Wt[1],Hr:t.Wt[2],Ur:t.Wt[3],$r:t.$r??1,qr:t.he,Vr:i}}Mr(t){let i=this.Gr(t),e=this.kr(t);return i.Xr!==e&&(i.br.clear(),i.Xr=e),i}Gr(t){let i=this.vr.get(t);return void 0===i&&(i={Xr:this.kr(t),br:new Map},this.vr.set(t,i)),i}}class tA extends tg{constructor(t){super(),this.ts=t}Qt(){return this.ts}}let tQ={Bar:(t,i,e,s)=>{let h=i.upColor,r=i.downColor,l=W(t(e,s)),n=L(l.Wt[0])<=L(l.Wt[3]);return{Jr:l.R??(n?h:r)}},Candlestick:(t,i,e,s)=>{let h=i.upColor,r=i.downColor,l=i.borderUpColor,n=i.borderDownColor,o=i.wickUpColor,a=i.wickDownColor,u=W(t(e,s)),c=L(u.Wt[0])<=L(u.Wt[3]);return{Jr:u.R??(c?h:r),Qr:u.Ht??(c?l:n),th:u.ih??(c?o:a)}},Custom:(t,i,e,s)=>({Jr:W(t(e,s)).R??i.color}),Area:(t,i,e,s)=>{let h=W(t(e,s));return{Jr:h.vt??i.lineColor,vt:h.vt??i.lineColor,sh:h.sh??i.topColor,nh:h.nh??i.bottomColor}},Baseline:(t,i,e,s)=>{let h=W(t(e,s));return{Jr:h.Wt[3]>=i.baseValue.price?i.topLineColor:i.bottomLineColor,eh:h.eh??i.topLineColor,rh:h.rh??i.bottomLineColor,hh:h.hh??i.topFillColor1,ah:h.ah??i.topFillColor2,oh:h.oh??i.bottomFillColor1,_h:h._h??i.bottomFillColor2}},Line:(t,i,e,s)=>{let h=W(t(e,s));return{Jr:h.R??i.color,vt:h.R??i.color}},Histogram:(t,i,e,s)=>({Jr:W(t(e,s)).R??i.color})};class tU{constructor(t){this.uh=(t,i)=>void 0!==i?i.Wt:this.xe.Us().dh(t),this.xe=t,this.fh=tQ[t.ph()]}mh(t,i){return this.fh(this.uh,this.xe.N(),t,i)}}function tq(t,i,e,s,h=0,r=i.length){let l=r-h;for(;0<l;){let r=l>>1,n=h+r;s(i[n],e)===t?(h=n+1,l-=r+1):l=r}return h}let tK=tq.bind(null,!0),tY=tq.bind(null,!1);(o=w||(w={}))[o.NearestLeft=-1]="NearestLeft",o[o.None=0]="None",o[o.NearestRight=1]="NearestRight";class tZ{constructor(){this.wh=[],this.gh=new Map,this.Mh=new Map,this.bh=[]}Sh(){return this.xh()>0?this.wh[this.wh.length-1]:null}Ch(){return this.xh()>0?this.yh(0):null}Qs(){return this.xh()>0?this.yh(this.wh.length-1):null}xh(){return this.wh.length}Ki(){return 0===this.xh()}Ve(t){return null!==this.kh(t,0)}dh(t){return this.Hs(t)}Hs(t,i=0){let e=this.kh(t,i);return null===e?null:{...this.Ph(e),$s:this.yh(e)}}Th(){return this.wh}Rh(t,i,e){if(this.Ki())return null;let s=null;for(let h of e)s=tJ(s,this.Dh(t,i,h));return s}ht(t){this.Mh.clear(),this.gh.clear(),this.wh=t,this.bh=t.map(t=>t.$s)}Ih(){return this.bh}yh(t){return this.wh[t].$s}Ph(t){return this.wh[t]}kh(t,i){let e=this.Vh(t);if(null===e&&0!==i)switch(i){case -1:return this.Bh(t);case 1:return this.Eh(t);default:throw TypeError("Unknown search mode")}return e}Bh(t){let i=this.Ah(t);return i>0&&(i-=1),i!==this.wh.length&&this.yh(i)<t?i:null}Eh(t){let i=this.Lh(t);return i!==this.wh.length&&t<this.yh(i)?i:null}Vh(t){let i=this.Ah(t);return i===this.wh.length||t<this.wh[i].$s?null:i}Ah(t){return tK(this.wh,t,(t,i)=>t.$s<i)}Lh(t){return tY(this.wh,t,(t,i)=>t.$s>i)}zh(t,i,e){let s=null;for(let h=t;h<i;h++){let t=this.wh[h].Wt[e];Number.isNaN(t)||(null===s?s={Oh:t,Nh:t}:(t<s.Oh&&(s.Oh=t),t>s.Nh&&(s.Nh=t)))}return s}Dh(t,i,e){if(this.Ki())return null;let s=null,h=W(this.Ch()),r=W(this.Qs()),l=Math.max(t,h),n=Math.min(i,r),o=30*Math.ceil(l/30),a=Math.max(o,30*Math.floor(n/30));{let t=this.Ah(l),h=this.Lh(Math.min(n,o,i));s=tJ(s,this.zh(t,h,e))}let u=this.gh.get(e);void 0===u&&(u=new Map,this.gh.set(e,u));for(let t=Math.max(o+1,l);t<a;t+=30){let i=Math.floor(t/30),h=u.get(i);if(void 0===h){let t=this.Ah(30*i),s=this.Lh((i+1)*30-1);h=this.zh(t,s,e),u.set(i,h)}s=tJ(s,h)}{let t=this.Ah(a),i=this.Lh(n);s=tJ(s,this.zh(t,i,e))}return s}}function tJ(t,i){return null===t?i:null===i?t:{Oh:Math.min(t.Oh,i.Oh),Nh:Math.max(t.Nh,i.Nh)}}let tX={setLineStyle:R};class t0{constructor(t){this.Fh=t}nt(t,i,e){this.Fh.draw(t,tX)}Wh(t,i,e){this.Fh.drawBackground?.(t,tX)}}class t1{constructor(t){this.En=null,this.Hh=t}Tt(){let t=this.Hh.renderer();if(null===t)return null;if(this.En?.Uh===t)return this.En.$h;let i=new t0(t);return this.En={Uh:t,$h:i},i}qh(){return this.Hh.zOrder?.()??"normal"}}class t2{constructor(t){this.jh=null,this.Yh=t}Kh(){return this.Yh}Ns(){this.Yh.updateAllViews?.()}qs(){let t=this.Yh.paneViews?.()??[];if(this.jh?.Uh===t)return this.jh.$h;let i=t.map(t=>new t1(t));return this.jh={Uh:t,$h:i},i}Xn(t,i){return this.Yh.hitTest?.(t,i)??null}}let t9=class extends t2{us(){return[]}};class t5{constructor(t){this.Fh=t}nt(t,i,e){this.Fh.draw(t,tX)}Wh(t,i,e){this.Fh.drawBackground?.(t,tX)}}class t6{constructor(t){this.En=null,this.Hh=t}Tt(){let t=this.Hh.renderer();if(null===t)return null;if(this.En?.Uh===t)return this.En.$h;let i=new t5(t);return this.En={Uh:t,$h:i},i}qh(){return this.Hh.zOrder?.()??"normal"}}function t3(t){return{ri:t.text(),Bi:t.coordinate(),Vi:t.fixedCoordinate?.(),R:t.textColor(),G:t.backColor(),It:t.visible?.()??!0,pi:t.tickVisible?.()??!0}}class t4{constructor(t,i){this.Xt=new tm,this.Zh=t,this.Gh=i}Tt(){return this.Xt.ht({Qi:this.Gh.Qi(),...t3(this.Zh)}),this.Xt}}class t7 extends tc{constructor(t,i){super(),this.Zh=t,this.ji=i}qi(t,i,e){let s=t3(this.Zh);e.G=s.G,t.R=s.R;let h=2/12*this.ji.k();e.Ti=h,e.Ri=h,e.Bi=s.Bi,e.Vi=s.Vi,t.ri=s.ri,t.It=s.It,t.pi=s.pi}}class t8 extends t2{constructor(t,i){super(t),this.Xh=null,this.Jh=null,this.Qh=null,this.ta=null,this.xe=i}cs(){let t=this.Yh.timeAxisViews?.()??[];if(this.Xh?.Uh===t)return this.Xh.$h;let i=this.xe.Qt().Et(),e=t.map(t=>new t4(t,i));return this.Xh={Uh:t,$h:e},e}js(){let t=this.Yh.priceAxisViews?.()??[];if(this.Jh?.Uh===t)return this.Jh.$h;let i=this.xe.Ft(),e=t.map(t=>new t7(t,i));return this.Jh={Uh:t,$h:e},e}ia(){let t=this.Yh.priceAxisPaneViews?.()??[];if(this.Qh?.Uh===t)return this.Qh.$h;let i=t.map(t=>new t6(t));return this.Qh={Uh:t,$h:i},i}sa(){let t=this.Yh.timeAxisPaneViews?.()??[];if(this.ta?.Uh===t)return this.ta.$h;let i=t.map(t=>new t6(t));return this.ta={Uh:t,$h:i},i}na(t,i){return this.Yh.autoscaleInfo?.(t,i)??null}}function it(t,i,e,s){t.forEach(t=>{i(t).forEach(t=>{t.qh()===e&&s.push(t)})})}function ii(t){return t.qs()}function ie(t){return t.ia()}function is(t){return t.sa()}let ih=["Area","Line","Baseline"];class ir extends tA{constructor(t,i,e,s,h){super(t),this.jt=new tZ,this.ar=new tW(this),this.ea=[],this.ra=new tR(this),this.ha=null,this.aa=null,this.la=null,this.oa=[],this._a=new tH,this.ua=new Map,this.ca=null,this.ys=e,this.da=i;let r=new tL(this);if(this.vs=[r],this.lr=new tz(r,this,t),ih.includes(this.da)&&(this.ha=new tP(this)),this.fa(),this.Hh=s(this,this.Qt(),h),"Custom"===this.da){let t=this.Hh;t.pa&&this.va(t.pa)}}m(){null!==this.la&&clearTimeout(this.la)}Le(t){return this.ys.priceLineColor||t}De(t){let i,e;let s={Ie:!0},h=this.Ft();if(this.Qt().Et().Ki()||h.Ki()||this.jt.Ki())return s;let r=this.Qt().Et().Re(),l=this.Lt();if(null===r||null===l)return s;if(t){let t=this.jt.Sh();if(null===t)return s;i=t,e=t.$s}else{let t=this.jt.Hs(r.bi(),-1);if(null===t||null===(i=this.jt.dh(t.$s)))return s;e=t.$s}let n=i.Wt[3],o=this.ma().mh(e,{Wt:i}),a=h.Nt(n,l.Wt);return{Ie:!1,gt:n,ri:h.Gi(n,l.Wt),We:h.wa(n),He:h.ga(n,l.Wt),R:o.Jr,Bi:a,$s:e}}ma(){return null!==this.aa||(this.aa=new tU(this)),this.aa}N(){return this.ys}_r(t){let i=this.Qt(),{priceScaleId:e,visible:s,priceFormat:h}=t;void 0!==e&&e!==this.ys.priceScaleId&&i.Ma(this,e),void 0!==s&&s!==this.ys.visible&&i.ba();let r=void 0!==t.conflationThresholdFactor;F(this.ys,t),r&&(this.ua.clear(),this.Qt().ur()),void 0!==h&&(this.fa(),i.Sa()),i.xa(this),i.Ca(),this.Hh.kt("options")}ht(t,i){this.jt.ht(t),this.ua.clear();let e=this.Qt().Et().N();e.enableConflation&&e.precomputeConflationOnInit&&this.ya(e.precomputeConflationPriority),this.Hh.kt("data"),null!==this.ha&&(i&&i.ka?this.ha.ye():0===t.length&&this.ha.Ce());let s=this.Qt().jn(this);this.Qt().Pa(s),this.Qt().xa(this),this.Qt().Ca(),this.Qt().ur()}Ta(t){let i=new t$(this,t);return this.ea.push(i),this.Qt().xa(this),i}Ra(t){let i=this.ea.indexOf(t);-1!==i&&this.ea.splice(i,1),this.Qt().xa(this)}Da(){return this.ea}ph(){return this.da}Lt(){let t=this.Ia();return null===t?null:{Wt:t.Wt[3],Va:t.wt}}Ia(){let t=this.Qt().Et().Re();if(null===t)return null;let i=t.Ba();return this.jt.Hs(i,1)}Us(){return this.jt}va(t){this.ca=t,this.ua.clear()}Ea(){return!!this.Qt().Et().N().enableConflation&&this.Aa()>1}Cr(t){if(!this.Ea())return;let i=this.Aa();if(!this.ua.has(i))return;let e="Custom"===this.da,s=e&&this.ca||void 0,h=e&&this.Hh.La?t=>{let i=this.Hh.La(t);return Array.isArray(i)?i:["number"==typeof i?i:0]}:void 0,r=this._a.Cr(this.jt.Th(),t,i,s,e,h),l=new tZ;l.ht(r),this.ua.set(i,l)}za(){let t=this.Qt().Et().N().enableConflation;if("Custom"===this.da&&null===this.ca||!t)return this.jt;let i=this.Aa(),e=this.ua.get(i);return e||(this.Oa(i),this.ua.get(i)??this.jt)}Na(t){let i=this.jt.dh(t);return null===i?null:"Bar"===this.da||"Candlestick"===this.da||"Custom"===this.da?{Fr:i.Wt[0],Wr:i.Wt[1],Hr:i.Wt[2],Ur:i.Wt[3]}:i.Wt[3]}Fa(t){let i=[];it(this.oa,ii,"top",i);let e=this.ha;return null!==e&&e.It()&&(null===this.la&&e.Pe()&&(this.la=setTimeout(()=>{this.la=null,this.Qt().Wa()},0)),e.ke(),i.unshift(e)),i}qs(){let t=[];this.Ha()||t.push(this.ra),t.push(this.Hh,this.ar);let i=this.ea.map(t=>t.cr());return t.push(...i),it(this.oa,ii,"normal",t),t}Ua(){return this.$a(ii,"bottom")}qa(t){return this.$a(ie,t)}ja(t){return this.$a(is,t)}Ya(t,i){return this.oa.map(e=>e.Xn(t,i)).filter(t=>null!==t)}us(){return[this.lr,...this.ea.map(t=>t.dr())]}js(t,i){if(i!==this.es&&!this.Ha())return[];let e=[...this.vs];for(let t of this.ea)e.push(t.pr());return this.oa.forEach(t=>{e.push(...t.js())}),e}cs(){let t=[];return this.oa.forEach(i=>{t.push(...i.cs())}),t}na(t,i){if(void 0!==this.ys.autoscaleInfoProvider){let e=this.ys.autoscaleInfoProvider(()=>{let e=this.Ka(t,i);return null===e?null:e.Je()});return tO.Qe(e)}return this.Ka(t,i)}Uh(){let t=this.ys.priceFormat;return t.base??1/t.minMove}Za(){return this.Ga}Ns(){for(let t of(this.Hh.kt(),this.vs))t.kt();for(let t of this.ea)t.kt();this.ar.kt(),this.ra.kt(),this.ha?.kt(),this.oa.forEach(t=>t.Ns())}Ft(){return W(super.Ft())}At(t){if(!(("Line"===this.da||"Area"===this.da||"Baseline"===this.da)&&this.ys.crosshairMarkerVisible))return null;let i=this.jt.dh(t);return null===i?null:{gt:i.Wt[3],ft:this.Xa(),Ht:this.Ja(),Ot:this.Qa(),zt:this.tl(t)}}ze(){return this.ys.title}It(){return this.ys.visible}il(t){this.oa.push(new t8(t,this))}sl(t){this.oa=this.oa.filter(i=>i.Kh()!==t)}nl(){if("Custom"===this.da)return t=>this.Hh.La(t)}el(){if("Custom"===this.da)return t=>this.Hh.rl(t)}hl(){return this.jt.Ih()}Ha(){return!tw(this.Ft().al())}Ka(t,i){if(!D(t)||!D(i)||this.jt.Ki())return null;let e="Line"===this.da||"Area"===this.da||"Baseline"===this.da||"Histogram"===this.da?[3]:[2,1],s=this.jt.Rh(t,i,e),h=null!==s?new tF(s.Oh,s.Nh):null,r=null;if("Histogram"===this.ph()){let t=this.ys.base,i=new tF(t,t);h=null!==h?h.Mn(i):i}return this.oa.forEach(e=>{let s=e.na(t,i);if(s?.priceRange){let t=new tF(s.priceRange.minValue,s.priceRange.maxValue);h=null!==h?h.Mn(t):t}s?.margins&&(r=s.margins)}),new tO(h,r)}Xa(){switch(this.da){case"Line":case"Area":case"Baseline":return this.ys.crosshairMarkerRadius}return 0}Ja(){switch(this.da){case"Line":case"Area":case"Baseline":{let t=this.ys.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}Qa(){switch(this.da){case"Line":case"Area":case"Baseline":return this.ys.crosshairMarkerBorderWidth}return 0}tl(t){switch(this.da){case"Line":case"Area":case"Baseline":{let t=this.ys.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.ma().mh(t).Jr}fa(){switch(this.ys.priceFormat.type){case"custom":{let t=this.ys.priceFormat.formatter;this.Ga={format:t,formatTickmarks:this.ys.priceFormat.tickmarksFormatter??(i=>i.map(t))};break}case"volume":this.Ga=new t_(this.ys.priceFormat.precision);break;case"percent":this.Ga=new tx(this.ys.priceFormat.precision);break;default:{let t=Math.pow(10,this.ys.priceFormat.precision);this.Ga=new tS(t,this.ys.priceFormat.minMove*t)}}null!==this.es&&this.es.ll()}$a(t,i){let e=[];return it(this.oa,t,i,e),e}Aa(){let{ol:t,_l:i,ul:e}=this.cl();return this._a.mr(t,i,e)}cl(){let t=this.Qt().Et(),i=t.ol(),e=window.devicePixelRatio||1,s=t.N().conflationThresholdFactor;return{ol:i,_l:e,ul:this.ys.conflationThresholdFactor??s??1}}dl(t){let i;let e=this.jt.Th();if("Custom"===this.da&&null!==this.ca){let s=this.nl();if(!s)throw Error("Custom series with conflation reducer must have a priceValueBuilder method");i=this._a.wr(e,t,this.ca,!0,t=>s(t))}else i=this._a.wr(e,t);let s=new tZ;return s.ht(i),s}Oa(t){let i=this.dl(t);this.ua.set(t,i)}ya(t){if("Custom"!==this.da||null!==this.ca&&this.nl())for(let i of(this.ua.clear(),this.Qt().Et().fl())){let e=()=>{this.pl(i)},s="object"==typeof window&&window||"object"==typeof self&&self;s?.ml?.vl?s.ml.vl(()=>{e()},{wl:t}):Promise.resolve().then(()=>e())}}pl(t){if(this.ua.has(t)||0===this.jt.Th().length)return;let i=this.dl(t);this.ua.set(t,i)}}let il=[3],io=[0,1,2,3];class ia{constructor(t){this.ys=t}gl(t,i,e){if(0===this.ys.mode)return t;let s=e.Ps(),h=s.Lt();if(null===h)return t;let r=s.Nt(t,h),l=e.Ml().filter(t=>t instanceof ir).reduce((t,s)=>{if(e.Yn(s)||!s.It())return t;let h=s.Ft(),r=s.Us();if(h.Ki()||!r.Ve(i))return t;let l=r.dh(i);if(null===l)return t;let n=L(s.Lt()),o=3===this.ys.mode?io:il;return t.concat(o.map(t=>h.Nt(l.Wt[t],n.Wt)))},[]);if(0===l.length)return t;l.sort((t,i)=>Math.abs(t-r)-Math.abs(i-r));let n=l[0];return s.Ts(n,h)}}function iu(t,i,e){return Math.min(Math.max(t,i),e)}function ic(t){let i=Math.ceil(t);return i%2==0?i-1:i}class id extends X{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}et({context:t,bitmapSize:i,horizontalPixelRatio:e,verticalPixelRatio:s}){var h;if(null===this.jt)return;let r=Math.max(1,Math.floor(e));t.lineWidth=r,h=()=>{let h=W(this.jt);if(h.bl){for(let s of(t.strokeStyle=h.Sl,R(t,h.xl),t.beginPath(),h.Cl)){let h=Math.round(s.yl*e);t.moveTo(h,-r),t.lineTo(h,i.height+r)}t.stroke()}if(h.kl){for(let e of(t.strokeStyle=h.Pl,R(t,h.Tl),t.beginPath(),h.Rl)){let h=Math.round(e.yl*s);t.moveTo(-r,h),t.lineTo(i.width+r,h)}t.stroke()}},t.save(),t.lineWidth%2&&t.translate(.5,.5),h(),t.restore()}}class im{constructor(t){this.Xt=new id,this.xt=!0,this.yt=t}kt(){this.xt=!0}Tt(){if(this.xt){let t=this.yt.Qt().N().grid,i={kl:t.horzLines.visible,bl:t.vertLines.visible,Pl:t.horzLines.color,Sl:t.vertLines.color,Tl:t.horzLines.style,xl:t.vertLines.style,Rl:this.yt.Ps().Dl(),Cl:(this.yt.Qt().Et().Dl()||[]).map(t=>({yl:t.coord}))};this.Xt.ht(i),this.xt=!1}return this.Xt}}class ip{constructor(t){this.Hh=new im(t)}cr(){return this.Hh}}let ig={Il:4,Vl:1e-4};function iv(t,i){let e=100*(t-i)/i;return i<0?-e:e}function iw(t,i){let e=100*(t-i)/i+100;return i<0?-e:e}function ib(t,i){let e=Math.abs(t);if(e<1e-15)return 0;let s=Math.log10(e+i.Vl)+i.Il;return t<0?-s:s}function iM(t,i){let e=Math.abs(t);if(e<1e-15)return 0;let s=Math.pow(10,e-i.Il)-i.Vl;return t<0?-s:s}function iy(t,i){return null===t?null:new tF(ib(t.Ye(),i),ib(t.Ke(),i))}function iS(t,i){return null===t?null:new tF(iM(t.Ye(),i),iM(t.Ke(),i))}function ix(t){if(null===t)return ig;let i=Math.abs(t.Ke()-t.Ye());if(i>=1||i<1e-15)return ig;let e=Math.ceil(Math.abs(Math.log10(i))),s=ig.Il+e;return{Il:s,Vl:1/Math.pow(10,s)}}class i_{constructor(t,i){if(this.Bl=t,this.El=i,function(t){if(t<0)return!1;if(t>1e18)return!0;for(let i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Bl))this.Al=[2,2.5,2];else{this.Al=[];for(let t=this.Bl;1!==t;){if(t%2==0)this.Al.push(2),t/=2;else{if(t%5!=0)throw Error("unexpected base");this.Al.push(2,2.5),t/=5}if(this.Al.length>100)throw Error("something wrong with base")}}}Ll(t,i,e){let s=0===this.Bl?0:1/this.Bl,h=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-i)))),r=0,l=this.El[0];for(;;){let t=s-h<=1e-14&&h>s+1e-14,i=e*l-h<=1e-14,n=1-h<=1e-14;if(!(t&&i&&n))break;h/=l,l=this.El[++r%this.El.length]}if(h<=s+1e-14&&(h=s),h=Math.max(1,h),this.Al.length>0&&1e-14>Math.abs(h-1))for(r=0,l=this.Al[0];e*l-h<=1e-14&&h>s+1e-14;)h/=l,l=this.Al[++r%this.Al.length];return h}}class iC{constructor(t,i,e,s){this.zl=[],this.ji=t,this.Bl=i,this.Ol=e,this.Nl=s}Ll(t,i){if(t<i)throw Error("high < low");let e=this.ji.$t(),s=(t-i)*this.Fl()/e,h=new i_(this.Bl,[2,2.5,2]),r=new i_(this.Bl,[2,2,2.5]),l=new i_(this.Bl,[2.5,2,2]),n=[];return n.push(h.Ll(t,i,s),r.Ll(t,i,s),l.Ll(t,i,s)),function(t){if(t.length<1)throw Error("array is empty");let i=t[0];for(let e=1;e<t.length;++e)t[e]<i&&(i=t[e]);return i}(n)}Wl(){let t=this.ji,i=t.Lt();if(null===i)return void(this.zl=[]);let e=t.$t(),s=this.Ol(e-1,i),h=this.Ol(0,i),r=this.ji.N().entireTextOnly?this.Hl()/2:0,l=e-1-r,n=Math.max(s,h),o=Math.min(s,h);if(n===o)return void(this.zl=[]);let a=this.Ll(n,o);if(this.Ul(i,a,n,o,r,l),t.$l()&&this.ql(a,o,n)){let t=this.ji.jl();this.Yl(i,a,r,l,t,2*t)}let u=this.zl.map(t=>t.Kl),c=this.ji.Zl(u);for(let t=0;t<this.zl.length;t++)this.zl[t].Gl=c[t]}Dl(){return this.zl}Hl(){return this.ji.k()}Fl(){return Math.ceil(2.5*this.Hl())}Ul(t,i,e,s,h,r){let l=this.zl,n=this.ji,o=e%i;o+=o<0?i:0;let a=e>=s?1:-1,u=null,c=0;for(let d=e-o;d>s;d-=i){let e=this.Nl(d,t,!0);null!==u&&Math.abs(e-u)<this.Fl()||e<h||e>r||(c<l.length?(l[c].yl=e,l[c].Gl=n.Xl(d),l[c].Kl=d):l.push({yl:e,Gl:n.Xl(d),Kl:d}),c++,u=e,n.Jl()&&(i=this.Ll(d*a,s)))}l.length=c}Yl(t,i,e,s,h,r){let l=this.zl,n=this.Ql(t,e,h,r),o=this.Ql(t,s,-r,-h),a=this.Nl(0,t,!0)-this.Nl(i,t,!0);l.length>0&&l[0].yl-n.yl<a/2&&l.shift(),l.length>0&&o.yl-l[l.length-1].yl<a/2&&l.pop(),l.unshift(n),l.push(o)}Ql(t,i,e,s){let h=this.Ol(i+e,t),r=this.Ol(i+s,t),l=Math.min(h,r),n=Math.max(h,r),o=Math.max(.1,this.Ll(n,l)),a=this.Ol(i+(e+s)/2,t),u=a-a%o,c=this.Nl(u,t,!0);return{Gl:this.ji.Xl(u),yl:c,Kl:u}}ql(t,i,e){let s=L(this.ji.sr());return this.ji.Jl()&&(s=iS(s,this.ji.io())),s.Ye()-i<t&&e-s.Ke()<t}}function ij(t){return t.slice().sort((t,i)=>W(t.hs())-W(i.hs()))}(a=b||(b={}))[a.Normal=0]="Normal",a[a.Logarithmic=1]="Logarithmic",a[a.Percentage=2]="Percentage",a[a.IndexedTo100=3]="IndexedTo100";let iE=new tx,iz=new tS(100,1);class ik{constructor(t,i,e,s,h){this.so=0,this.no=null,this.tr=null,this.eo=null,this.ro={ho:!1,ao:null},this.lo=!1,this.oo=0,this._o=0,this.uo=new I,this.co=new I,this.do=[],this.fo=null,this.po=null,this.vo=null,this.mo=null,this.wo=null,this.Ga=iz,this.Mo=ix(null),this.bo=t,this.ys=i,this.So=e,this.xo=s,this.Co=h,this.yo=new iC(this,100,this.ko.bind(this),this.Po.bind(this))}al(){return this.bo}N(){return this.ys}_r(t){if(F(this.ys,t),this.ll(),void 0!==t.mode&&this.To({re:t.mode}),void 0!==t.scaleMargins){let i=P(t.scaleMargins.top),e=P(t.scaleMargins.bottom);if(i<0||i>1)throw Error(`Invalid top margin - expect value between 0 and 1, given=${i}`);if(e<0||e>1)throw Error(`Invalid bottom margin - expect value between 0 and 1, given=${e}`);if(i+e>1)throw Error(`Invalid margins - sum of margins must be less than 1, given=${i+e}`);this.Ro(),this.vo=null}}Do(){return this.ys.autoScale}Io(){return this.lo}Jl(){return 1===this.ys.mode}Fe(){return 2===this.ys.mode}Vo(){return 3===this.ys.mode}io(){return this.Mo}re(){return{hn:this.ys.autoScale,Bo:this.ys.invertScale,re:this.ys.mode}}To(t){let i=this.re(),e=null;void 0!==t.hn&&(this.ys.autoScale=t.hn),void 0!==t.re&&(this.ys.mode=t.re,2!==t.re&&3!==t.re||(this.ys.autoScale=!0),this.ro.ho=!1),1===i.re&&t.re!==i.re&&(function(t,i){if(null===t)return!1;let e=iM(t.Ye(),i),s=iM(t.Ke(),i);return isFinite(e)&&isFinite(s)}(this.tr,this.Mo)?null!==(e=iS(this.tr,this.Mo))&&this.Eo(e):this.ys.autoScale=!0),1===t.re&&t.re!==i.re&&null!==(e=iy(this.tr,this.Mo))&&this.Eo(e);let s=i.re!==this.ys.mode;s&&(2===i.re||this.Fe())&&this.ll(),s&&(3===i.re||this.Vo())&&this.ll(),void 0!==t.Bo&&i.Bo!==t.Bo&&(this.ys.invertScale=t.Bo,this.Ao()),this.co.p(i,this.re())}Lo(){return this.co}k(){return this.So.fontSize}$t(){return this.so}zo(t){this.so!==t&&(this.so=t,this.Ro(),this.vo=null)}Oo(){if(this.no)return this.no;let t=this.$t()-this.No()-this.Fo();return this.no=t,t}sr(){return this.Wo(),this.tr}Eo(t,i){let e=this.tr;(i||null===e&&null!==t||null!==e&&!e.qe(t))&&(this.vo=null,this.tr=t)}Ho(t){this.Eo(t),this.Uo(null!==t)}Ki(){return this.Wo(),0===this.so||!this.tr||this.tr.Ki()}$o(t){return this.Bo()?t:this.$t()-1-t}Nt(t,i){return this.Fe()?t=iv(t,i):this.Vo()&&(t=iw(t,i)),this.Po(t,i)}qo(t,i,e){this.Wo();let s=this.Fo(),h=W(this.sr()),r=h.Ye(),l=h.Ke(),n=this.Oo()-1,o=this.Bo(),a=n/(l-r),u=void 0===e?0:e.from,c=void 0===e?t.length:e.to,d=this.jo();for(let e=u;e<c;e++){let h=t[e],l=h.gt;if(isNaN(l))continue;let n=l;null!==d&&(n=d(h.gt,i));let u=s+a*(n-r),c=o?u:this.so-1-u;h.ut=c}}Yo(t,i,e){this.Wo();let s=this.Fo(),h=W(this.sr()),r=h.Ye(),l=h.Ke(),n=this.Oo()-1,o=this.Bo(),a=n/(l-r),u=void 0===e?0:e.from,c=void 0===e?t.length:e.to,d=this.jo();for(let e=u;e<c;e++){let h=t[e],l=h.Fr,n=h.Wr,u=h.Hr,c=h.Ur;null!==d&&(l=d(h.Fr,i),n=d(h.Wr,i),u=d(h.Hr,i),c=d(h.Ur,i));let f=s+a*(l-r),m=o?f:this.so-1-f;h.Ko=m,f=s+a*(n-r),m=o?f:this.so-1-f,h.Zo=m,f=s+a*(u-r),m=o?f:this.so-1-f,h.Go=m,f=s+a*(c-r),m=o?f:this.so-1-f,h.Xo=m}}Ts(t,i){let e=this.ko(t,i);return this.Jo(e,i)}Jo(t,i){var e,s;let h=t;return this.Fe()?(e=h,i<0&&(e=-e),h=e/100*i+i):this.Vo()&&(s=h-100,i<0&&(s=-s),h=s/100*i+i),h}Ml(){return this.do}Dt(){return this.po||(this.po=ij(this.do)),this.po}Qo(t){-1===this.do.indexOf(t)&&(this.do.push(t),this.ll(),this.t_())}i_(t){let i=this.do.indexOf(t);if(-1===i)throw Error("source is not attached to scale");this.do.splice(i,1),0===this.do.length&&(this.To({hn:!0}),this.Eo(null)),this.ll(),this.t_()}Lt(){let t=null;for(let i of this.do){let e=i.Lt();null!==e&&(null===t||e.Va<t.Va)&&(t=e)}return null===t?null:t.Wt}Bo(){return this.ys.invertScale}Dl(){let t=null===this.Lt();if(null!==this.vo&&(t||this.vo.s_===t))return this.vo.Dl;this.yo.Wl();let i=this.yo.Dl();return this.vo={Dl:i,s_:t},this.uo.p(),i}n_(){return this.uo}e_(t){this.Fe()||this.Vo()||null===this.mo&&null===this.eo&&(this.Ki()||(this.mo=this.so-t,this.eo=W(this.sr()).je()))}r_(t){if(this.Fe()||this.Vo()||null===this.mo)return;this.To({hn:!1}),(t=this.so-t)<0&&(t=0);let i=(this.mo+.2*(this.so-1))/(t+.2*(this.so-1)),e=W(this.eo).je();i=Math.max(i,.1),e.Ge(i),this.Eo(e)}h_(){this.Fe()||this.Vo()||(this.mo=null,this.eo=null)}a_(t){this.Do()||null===this.wo&&null===this.eo&&(this.Ki()||(this.wo=t,this.eo=W(this.sr()).je()))}l_(t){if(this.Do()||null===this.wo)return;let i=W(this.sr()).Ze()/(this.Oo()-1),e=t-this.wo;this.Bo()&&(e*=-1);let s=e*i,h=W(this.eo).je();h.Xe(s),this.Eo(h,!0),this.vo=null}o_(){this.Do()||null!==this.wo&&(this.wo=null,this.eo=null)}Za(){return this.Ga||this.ll(),this.Ga}Gi(t,i){switch(this.ys.mode){case 2:return this.__(iv(t,i));case 3:return this.Za().format(iw(t,i));default:return this.hr(t)}}Xl(t){switch(this.ys.mode){case 2:return this.__(t);case 3:return this.Za().format(t);default:return this.hr(t)}}Zl(t){switch(this.ys.mode){case 2:return this.u_(t);case 3:return this.Za().formatTickmarks(t);default:return this.c_(t)}}wa(t){return this.hr(t,W(this.fo).Za())}ga(t,i){return t=iv(t,i),this.__(t,iE)}d_(){return this.do}f_(t){this.ro={ao:t,ho:!1}}Ns(){this.do.forEach(t=>t.Ns())}$l(){return this.ys.ensureEdgeTickMarksVisible&&this.Do()}jl(){return this.k()/2}ll(){this.vo=null;let t=1/0;for(let i of(this.fo=null,this.do))i.hs()<t&&(t=i.hs(),this.fo=i);let i=100;null!==this.fo&&(i=Math.round(this.fo.Uh())),this.Ga=iz,this.Fe()?(this.Ga=iE,i=100):this.Vo()?(this.Ga=new tS(100,1),i=100):null!==this.fo&&(this.Ga=this.fo.Za()),this.yo=new iC(this,i,this.ko.bind(this),this.Po.bind(this)),this.yo.Wl()}t_(){this.po=null}p_(){return null===this.fo||this.Fe()||this.Vo()?1:1/this.fo.Uh()}Zi(){return this.Co}Uo(t){this.lo=t}No(){return this.Bo()?this.ys.scaleMargins.bottom*this.$t()+this._o:this.ys.scaleMargins.top*this.$t()+this.oo}Fo(){return this.Bo()?this.ys.scaleMargins.top*this.$t()+this.oo:this.ys.scaleMargins.bottom*this.$t()+this._o}Wo(){this.ro.ho||(this.ro.ho=!0,this.v_())}Ro(){this.no=null}Po(t,i){if(this.Wo(),this.Ki())return 0;t=this.Jl()&&t?ib(t,this.Mo):t;let e=W(this.sr()),s=this.Fo()+(this.Oo()-1)*(t-e.Ye())/e.Ze();return this.$o(s)}ko(t,i){if(this.Wo(),this.Ki())return 0;let e=this.$o(t),s=W(this.sr()),h=s.Ye()+s.Ze()*((e-this.Fo())/(this.Oo()-1));return this.Jl()?iM(h,this.Mo):h}Ao(){this.vo=null,this.yo.Wl()}v_(){var t,i,e,s,h;if(this.Io()&&!this.Do())return;let r=this.ro.ao;if(null===r)return;let l=null,n=this.d_(),o=0,a=0;for(let t of n){if(!t.It())continue;let n=t.Lt();if(null===n)continue;let u=t.na(r.Ba(),r.bi()),c=u&&u.sr();if(null!==c){switch(this.ys.mode){case 1:c=iy(c,this.Mo);break;case 2:i=c,e=n.Wt,c=new tF(iv(i.Ye(),e),iv(i.Ke(),e));break;case 3:s=c,h=n.Wt,c=new tF(iw(s.Ye(),h),iw(s.Ke(),h))}if(l=null===l?c:l.Mn(W(c)),null!==u){let t=u.nr();null!==t&&(o=Math.max(o,t.above),a=Math.max(a,t.below))}}}if(this.$l()&&(o=Math.max(o,this.jl()),a=Math.max(a,this.jl())),o===this.oo&&a===this._o||(this.oo=o,this._o=a,this.vo=null,this.Ro()),null!==l){if(l.Ye()===l.Ke()){let t=5*this.p_();this.Jl()&&(l=iS(l,this.Mo)),l=new tF(l.Ye()-t,l.Ke()+t),this.Jl()&&(l=iy(l,this.Mo))}if(this.Jl()){let i=iS(l,this.Mo),e=ix(i);if(t=this.Mo,e.Il!==t.Il||e.Vl!==t.Vl){let t=null!==this.eo?iS(this.eo,this.Mo):null;this.Mo=e,l=iy(i,e),null!==t&&(this.eo=iy(t,e))}}this.Eo(l)}else null===this.tr&&(this.Eo(new tF(-.5,.5)),this.Mo=ix(null))}jo(){return this.Fe()?iv:this.Vo()?iw:this.Jl()?t=>ib(t,this.Mo):null}m_(t,i,e){return void 0===i?(void 0===e&&(e=this.Za()),e.format(t)):i(t)}w_(t,i,e){return void 0===i?(void 0===e&&(e=this.Za()),e.formatTickmarks(t)):i(t)}hr(t,i){return this.m_(t,this.xo.priceFormatter,i)}c_(t,i){let e=this.xo.priceFormatter;return this.w_(t,this.xo.tickmarksPriceFormatter??(e?t=>t.map(e):void 0),i)}__(t,i){return this.m_(t,this.xo.percentageFormatter,i)}u_(t,i){let e=this.xo.percentageFormatter;return this.w_(t,this.xo.tickmarksPercentageFormatter??(e?t=>t.map(e):void 0),i)}}function iN(t){return t instanceof ir}class iR{constructor(t,i){this.do=[],this.g_=new Map,this.so=0,this.M_=0,this.b_=1,this.po=null,this.S_=!1,this.x_=new I,this.oa=[],this.Gh=t,this.ts=i,this.C_=new ip(this);let e=i.N();this.y_=this.k_("left",e.leftPriceScale),this.P_=this.k_("right",e.rightPriceScale),this.y_.Lo().i(this.T_.bind(this,this.y_),this),this.P_.Lo().i(this.T_.bind(this,this.P_),this),this.R_(e)}R_(t){if(t.leftPriceScale&&this.y_._r(t.leftPriceScale),t.rightPriceScale&&this.P_._r(t.rightPriceScale),t.localization&&(this.y_.ll(),this.P_.ll()),t.overlayPriceScales)for(let i of Array.from(this.g_.values())){let e=W(i[0].Ft());e._r(t.overlayPriceScales),t.localization&&e.ll()}}D_(t){switch(t){case"left":return this.y_;case"right":return this.P_}return this.g_.has(t)?P(this.g_.get(t))[0].Ft():null}m(){this.Qt().I_().u(this),this.y_.Lo().u(this),this.P_.Lo().u(this),this.do.forEach(t=>{t.m&&t.m()}),this.oa=this.oa.filter(t=>{let i=t.Kh();return i.detached&&i.detached(),!1}),this.x_.p()}V_(){return this.b_}B_(t){this.b_=t}Qt(){return this.ts}Qi(){return this.M_}$t(){return this.so}E_(t){this.M_=t,this.A_()}zo(t){this.so=t,this.y_.zo(t),this.P_.zo(t),this.do.forEach(i=>{if(this.Yn(i)){let e=i.Ft();null!==e&&e.zo(t)}}),this.A_()}L_(t){this.S_=t}z_(){return this.S_}O_(){return this.do.filter(iN)}Ml(){return this.do}Yn(t){let i=t.Ft();return null===i||this.y_!==i&&this.P_!==i}Qo(t,i,e){this.N_(t,i,e?t.hs():this.do.length)}i_(t,i){let e=this.do.indexOf(t);T(-1!==e,"removeDataSource: invalid data source"),this.do.splice(e,1),i||this.do.forEach((t,i)=>t.ls(i));let s=W(t.Ft()).al();if(this.g_.has(s)){let i=P(this.g_.get(s)),e=i.indexOf(t);-1!==e&&(i.splice(e,1),0===i.length&&this.g_.delete(s))}let h=t.Ft();h&&h.Ml().indexOf(t)>=0&&(h.i_(t),this.F_(h)),this.po=null}Zn(t){return t===this.y_?"left":t===this.P_?"right":"overlay"}W_(){return this.y_}H_(){return this.P_}U_(t,i){t.e_(i)}q_(t,i){t.r_(i),this.A_()}j_(t){t.h_()}Y_(t,i){t.a_(i)}K_(t,i){t.l_(i),this.A_()}Z_(t){t.o_()}A_(){this.do.forEach(t=>{t.Ns()})}Ps(){let t=null;return this.ts.N().rightPriceScale.visible&&0!==this.P_.Ml().length?t=this.P_:this.ts.N().leftPriceScale.visible&&0!==this.y_.Ml().length?t=this.y_:0!==this.do.length&&(t=this.do[0].Ft()),null===t&&(t=this.P_),t}Kn(){let t=null;return this.ts.N().rightPriceScale.visible?t=this.P_:this.ts.N().leftPriceScale.visible&&(t=this.y_),t}F_(t){null!==t&&t.Do()&&this.G_(t)}X_(t){let i=this.Gh.Re();t.To({hn:!0}),null!==i&&t.f_(i),this.A_()}J_(){this.G_(this.y_),this.G_(this.P_)}Q_(){this.F_(this.y_),this.F_(this.P_),this.do.forEach(t=>{this.Yn(t)&&this.F_(t.Ft())}),this.A_(),this.ts.ur()}Dt(){return null===this.po&&(this.po=ij(this.do)),this.po}tu(t,i){i=iu(i,0,this.do.length-1);let e=this.do.indexOf(t);for(let s of(T(-1!==e,"setSeriesOrder: invalid data source"),this.do.splice(e,1),this.do.splice(i,0,t),this.do.forEach((t,i)=>t.ls(i)),this.po=null,[this.y_,this.P_]))s.t_(),s.ll();this.ts.ur()}Vt(){return this.Dt().filter(iN)}iu(){return this.x_}su(){return this.C_}il(t){this.oa.push(new t9(t))}sl(t){this.oa=this.oa.filter(i=>i.Kh()!==t),t.detached&&t.detached(),this.ts.ur()}nu(){return this.oa}Ya(t,i){return this.oa.map(e=>e.Xn(t,i)).filter(t=>null!==t)}G_(t){let i=t.d_();if(i&&i.length>0&&!this.Gh.Ki()){let i=this.Gh.Re();null!==i&&t.f_(i)}t.Ns()}N_(t,i,e){let s=this.D_(i);if(null===s&&(s=this.k_(i,this.ts.N().overlayPriceScales)),this.do.splice(e,0,t),!tw(i)){let e=this.g_.get(i)||[];e.push(t),this.g_.set(i,e)}t.ls(e),s.Qo(t),t._s(s),this.F_(s),this.po=null}T_(t,i,e){i.re!==e.re&&this.G_(t)}k_(t,i){let e=new ik(t,{visible:!0,autoScale:!0,...$(i)},this.ts.N().layout,this.ts.N().localization,this.ts.Zi());return e.zo(this.$t()),e}}function iB(t){return{eu:t.eu,ru:{Jn:t.hu.externalId},au:t.hu.cursorStyle}}function iT(t,i,e){let s=[t,...t.Dt()],h=function(t,i,e){var s,h;let r,l;for(let n of t)for(let t of n.Ya?.(i,e)??[])s=t.zOrder,(h=r?.zOrder)&&("top"!==s||"top"===h)&&("normal"!==s||"bottom"!==h)||(r=t,l=n);return r&&l?{hu:r,eu:l}:null}(s,i,e);if("top"===h?.hu.zOrder)return iB(h);for(let r of s){if(h&&h.eu===r&&"bottom"!==h.hu.zOrder&&!h.hu.isBackground)return iB(h);if(void 0!==r.qs){let s=function(t,i,e,s){for(let h of t){let t=h.Tt(s);if(null!==t&&t.Xn){let s=t.Xn(i,e);if(null!==s)return{lu:h,ru:s}}}return null}(r.qs(t),i,e,t);if(null!==s)return{eu:r,lu:s.lu,ru:s.ru}}if(h&&h.eu===r&&"bottom"!==h.hu.zOrder&&h.hu.isBackground)return iB(h)}return h?.hu?iB(h):null}class iP{constructor(t,i,e=50){this.Dn=0,this.In=1,this.Vn=1,this.En=new Map,this.Bn=new Map,this.ou=t,this._u=i,this.An=e}uu(t){let i=t.time,e=this._u.cacheKey(i),s=this.En.get(e);if(void 0!==s)return s.cu;if(this.Dn===this.An){let t=this.Bn.get(this.Vn);this.Bn.delete(this.Vn),this.En.delete(P(t)),this.Vn++,this.Dn--}let h=this.ou(t);return this.En.set(e,{cu:h,Nn:this.In}),this.Bn.set(this.In,e),this.Dn++,this.In++,h}}class iW{constructor(t,i){T(t<=i,"right should be >= left"),this.du=t,this.fu=i}Ba(){return this.du}bi(){return this.fu}pu(){return this.fu-this.du+1}Ve(t){return this.du<=t&&t<=this.fu}qe(t){return this.du===t.Ba()&&this.fu===t.bi()}}function iL(t,i){return null===t||null===i?t===i:t.qe(i)}class iI{constructor(){this.vu=new Map,this.En=null,this.mu=!1}wu(t){this.mu=t,this.En=null}gu(t,i){this.Mu(i),this.En=null;for(let e=i;e<t.length;++e){let i=t[e],s=this.vu.get(i.timeWeight);void 0===s&&(s=[],this.vu.set(i.timeWeight,s)),s.push({index:e,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}bu(t,i,e,s,h){let r=Math.ceil(i/t);return null!==this.En&&this.En.Su===r&&h===this.En.xu&&e===this.En.Cu||(this.En={xu:h,Cu:e,Dl:this.yu(r,e,s),Su:r}),this.En.Dl}Mu(t){if(0===t)return void this.vu.clear();let i=[];for(let e of(this.vu.forEach((e,s)=>{t<=e[0].index?i.push(s):e.splice(tK(e,t,i=>i.index<t),1/0)}),i))this.vu.delete(e)}yu(t,i,e){let s=[],h=t=>!i||e.has(t.index);for(let i of Array.from(this.vu.keys()).sort((t,i)=>i-t)){if(!this.vu.get(i))continue;let e=s;s=[];let r=e.length,l=0,n=P(this.vu.get(i)),o=n.length,a=1/0,u=-1/0;for(let i=0;i<o;i++){let o=n[i],c=o.index;for(;l<r;){let t=e[l],i=t.index;if(!(i<c&&h(t))){a=i;break}l++,s.push(t),u=i,a=1/0}if(a-c>=t&&c-u>=t&&h(o))s.push(o),u=c;else if(this.mu)return e}for(;l<r;l++)h(e[l])&&s.push(e[l])}return s}}class iF{constructor(t){this.ku=t}Pu(){return null===this.ku?null:new iW(Math.floor(this.ku.Ba()),Math.ceil(this.ku.bi()))}Tu(){return this.ku}static Ru(){return new iF(null)}}function iO(t,i){return t.weight>i.weight?t:i}class iD{constructor(t,i,e,s){this.M_=0,this.Du=null,this.Iu=[],this.wo=null,this.mo=null,this.Vu=new iI,this.Bu=new Map,this.Eu=iF.Ru(),this.Au=!0,this.Lu=new I,this.zu=new I,this.Ou=new I,this.Nu=null,this.Fu=null,this.Wu=new Map,this.Hu=-1,this.Uu=[],this.$u=1,this.ys=i,this.xo=e,this.qu=i.rightOffset,this.ju=i.barSpacing,this.ts=t,this.Yu(i),this._u=s,this.Ku(),this.Vu.wu(i.uniformDistribution),this.Zu(),this.Gu()}N(){return this.ys}Xu(t){F(this.xo,t),this.Ju(),this.Ku()}_r(t,i){F(this.ys,t),this.ys.fixLeftEdge&&this.Qu(),this.ys.fixRightEdge&&this.tc(),void 0!==t.barSpacing&&this.ts.mn(t.barSpacing),void 0!==t.rightOffset&&this.ts.wn(t.rightOffset),this.Yu(t),void 0===t.minBarSpacing&&void 0===t.maxBarSpacing||this.ts.mn(t.barSpacing??this.ju),void 0!==t.ignoreWhitespaceIndices&&t.ignoreWhitespaceIndices!==this.ys.ignoreWhitespaceIndices&&this.Gu(),this.Ju(),this.Ku(),void 0===t.enableConflation&&void 0===t.conflationThresholdFactor||this.Zu(),this.Ou.p()}Rs(t){return this.Iu[t]?.time??null}ss(t){return this.Iu[t]??null}sc(t,i){if(this.Iu.length<1)return null;if(this._u.key(t)>this._u.key(this.Iu[this.Iu.length-1].time))return i?this.Iu.length-1:null;let e=tK(this.Iu,this._u.key(t),(t,i)=>this._u.key(t.time)<i);return this._u.key(t)<this._u.key(this.Iu[e].time)?i?e:null:e}Ki(){return 0===this.M_||0===this.Iu.length||null===this.Du}nc(){return this.Iu.length>0}Re(){return this.ec(),this.Eu.Pu()}rc(){return this.ec(),this.Eu.Tu()}hc(){let t=this.Re();if(null===t)return null;let i={from:t.Ba(),to:t.bi()};return this.ac(i)}ac(t){let i=Math.round(t.from),e=Math.round(t.to),s=W(this.lc()),h=W(this.oc());return{from:W(this.ss(Math.max(s,i))),to:W(this.ss(Math.min(h,e)))}}_c(t){return{from:W(this.sc(t.from,!0)),to:W(this.sc(t.to,!0))}}Qi(){return this.M_}E_(t){if(!isFinite(t)||t<=0||this.M_===t)return;let i=this.rc(),e=this.M_;if(this.M_=t,this.Au=!0,this.ys.lockVisibleTimeRangeOnResize&&0!==e){let i=this.ju*t/e;this.ju=i}this.ys.fixLeftEdge&&null!==i&&0>=i.Ba()&&(this.qu-=Math.round((e-t)/this.ju)+1,this.Au=!0),this.uc(),this.cc()}qt(t){if(this.Ki()||!D(t))return 0;let i=this.dc()+this.qu-t;return this.M_-(i+.5)*this.ju-1}fc(t,i){let e=this.dc(),s=void 0===i?0:i.from,h=void 0===i?t.length:i.to;for(let i=s;i<h;i++){let s=t[i].wt,h=e+this.qu-s,r=this.M_-(h+.5)*this.ju-1;t[i]._t=r}}vc(t,i){let e=Math.ceil(this.mc(t));return i&&this.ys.ignoreWhitespaceIndices&&!this.wc(e)?this.gc(e):e}wn(t){this.Au=!0,this.qu=t,this.cc(),this.ts.Mc(),this.ts.ur()}ol(){return this.ju}mn(t){let i=this.ju;if(this.bc(t),void 0!==this.ys.rightOffsetPixels&&0!==i){let t=this.qu*i/this.ju;this.qu=t}this.cc(),this.ts.Mc(),this.ts.ur()}Sc(){return this.qu}Dl(){if(this.Ki())return null;if(null!==this.Fu)return this.Fu;let t=this.ju,i=5*(this.ts.N().layout.fontSize+4)/8*(this.ys.tickMarkMaxCharacterLength||8),e=Math.round(i/t),s=W(this.Re()),h=Math.max(s.Ba(),s.Ba()-e),r=Math.max(s.bi(),s.bi()-e),l=this.Vu.bu(t,i,this.ys.ignoreWhitespaceIndices,this.Wu,this.Hu),n=this.lc()+e,o=this.oc()-e,a=this.xc(),u=this.ys.fixLeftEdge||a,c=this.ys.fixRightEdge||a,d=0;for(let t of l){let e;h<=t.index&&t.index<=r&&(d<this.Uu.length?((e=this.Uu[d]).coord=this.qt(t.index),e.label=this.Cc(t),e.weight=t.weight):(e={needAlignCoordinate:!1,coord:this.qt(t.index),label:this.Cc(t),weight:t.weight},this.Uu.push(e)),this.ju>i/2&&!a?e.needAlignCoordinate=!1:e.needAlignCoordinate=u&&t.index<=n||c&&t.index>=o,d++)}return this.Uu.length=d,this.Fu=this.Uu,this.Uu}yc(){let t;this.Au=!0,this.mn(this.ys.barSpacing),t=void 0!==this.ys.rightOffsetPixels?this.ys.rightOffsetPixels/this.ol():this.ys.rightOffset,this.wn(t)}kc(t){this.Au=!0,this.Du=t,this.cc(),this.Qu()}Pc(t,i){let e=this.mc(t),s=this.ol();this.mn(s+s/10*i),this.ys.rightBarStaysOnScroll||this.wn(this.Sc()+(e-this.mc(t)))}e_(t){this.wo&&this.o_(),null===this.mo&&null===this.Nu&&(this.Ki()||(this.mo=t,this.Tc()))}r_(t){if(null===this.Nu)return;let i=iu(this.M_-t,0,this.M_),e=iu(this.M_-W(this.mo),0,this.M_);0!==i&&0!==e&&this.mn(this.Nu.ol*i/e)}h_(){null!==this.mo&&(this.mo=null,this.Rc())}a_(t){null===this.wo&&null===this.Nu&&(this.Ki()||(this.wo=t,this.Tc()))}l_(t){if(null===this.wo)return;let i=(this.wo-t)/this.ol();this.qu=W(this.Nu).Sc+i,this.Au=!0,this.cc()}o_(){null!==this.wo&&(this.wo=null,this.Rc())}Dc(){this.Ic(this.ys.rightOffset)}Ic(t,i=400){if(!isFinite(t))throw RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw RangeError("animationDuration (optional) must be finite positive number");let e=this.qu,s=performance.now();this.ts.fn({Vc:t=>(t-s)/i>=1,Bc:h=>{let r=(h-s)/i;return r>=1?t:e+(t-e)*r}})}kt(t,i){this.Au=!0,this.Iu=t,this.Vu.gu(t,i),this.cc()}Ec(){return this.Lu}Ac(){return this.zu}Lc(){return this.Ou}dc(){return this.Du||0}zc(t,i){let e=t.pu(),s=i&&this.ys.rightOffsetPixels||0;this.bc((this.M_-s)/e),this.qu=t.bi()-this.dc(),i&&(this.qu=s?s/this.ol():this.ys.rightOffset),this.cc(),this.Au=!0,this.ts.Mc(),this.ts.ur()}Oc(){let t=this.lc(),i=this.oc();if(null===t||null===i)return;let e=!this.ys.rightOffsetPixels&&this.ys.rightOffset||0;this.zc(new iW(t,i+e),!0)}Nc(t){let i=new iW(t.from,t.to);this.zc(i)}ns(t){return void 0!==this.xo.timeFormatter?this.xo.timeFormatter(t.originalTime):this._u.formatHorzItem(t.time)}Gu(){if(this.ys.ignoreWhitespaceIndices){for(let t of(this.Wu.clear(),this.ts.Js()))for(let i of t.hl())this.Wu.set(i,!0);this.Hu++}}Fc(){return this.$u}fl(){let t=1/(window.devicePixelRatio||1),i=this.ys.minBarSpacing;if(i>=t)return[1];let e=[1],s=2;for(;s<=512;)i<t/s&&e.push(s),s*=2;return e}xc(){let t=this.ts.N().handleScroll,i=this.ts.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||i.axisDoubleClickReset.time||i.axisPressedMouseMove.time||i.mouseWheel||i.pinch)}lc(){return 0===this.Iu.length?null:0}oc(){return 0===this.Iu.length?null:this.Iu.length-1}Wc(t){return(this.M_-1-t)/this.ju}mc(t){let i=this.Wc(t);return Math.round(1e6*(this.dc()+this.qu-i))/1e6}bc(t){let i=this.ju;this.ju=t,this.uc(),i!==this.ju&&(this.Au=!0,this.Hc(),this.Zu())}ec(){if(!this.Au)return;if(this.Au=!1,this.Ki())return void this.Uc(iF.Ru());let t=this.dc(),i=this.M_/this.ju,e=this.qu+t,s=new iW(e-i+1,e);this.Uc(new iF(s))}uc(){let t=iu(this.ju,this.$c(),this.qc());this.ju!==t&&(this.ju=t,this.Au=!0)}qc(){return this.ys.maxBarSpacing>0?this.ys.maxBarSpacing:.5*this.M_}$c(){return this.ys.fixLeftEdge&&this.ys.fixRightEdge&&0!==this.Iu.length?this.M_/this.Iu.length:this.ys.minBarSpacing}Zu(){if(!this.ys.enableConflation)return void(this.$u=1);let t=1/(window.devicePixelRatio||1)*(this.ys.conflationThresholdFactor??1);if(this.ju>=t)return void(this.$u=1);let i=Math.pow(2,Math.floor(Math.log2(t/this.ju)));this.$u=Math.min(i,512)}cc(){let t=this.jc();null!==t&&this.qu<t&&(this.qu=t,this.Au=!0);let i=this.Yc();this.qu>i&&(this.qu=i,this.Au=!0)}jc(){let t=this.lc(),i=this.Du;return null===t||null===i?null:t-i-1+(this.ys.fixLeftEdge?this.M_/this.ju:Math.min(2,this.Iu.length))}Yc(){return this.ys.fixRightEdge?0:this.M_/this.ju-Math.min(2,this.Iu.length)}Tc(){this.Nu={ol:this.ol(),Sc:this.Sc()}}Rc(){this.Nu=null}Cc(t){let i=this.Bu.get(t.weight);return void 0===i&&(i=new iP(t=>this.Kc(t),this._u),this.Bu.set(t.weight,i)),i.uu(t)}Kc(t){return this._u.formatTickmark(t,this.xo)}Uc(t){let i=this.Eu;this.Eu=t,iL(i.Pu(),this.Eu.Pu())||this.Lu.p(),iL(i.Tu(),this.Eu.Tu())||this.zu.p(),this.Hc()}Hc(){this.Fu=null}Ju(){this.Hc(),this.Bu.clear()}Ku(){this._u.updateFormatter(this.xo)}Qu(){if(!this.ys.fixLeftEdge)return;let t=this.lc();if(null===t)return;let i=this.Re();if(null===i)return;let e=i.Ba()-t;if(e<0){let t=this.qu-e-1;this.wn(t)}this.uc()}tc(){this.cc(),this.uc()}wc(t){return!this.ys.ignoreWhitespaceIndices||this.Wu.get(t)||!1}gc(t){let i=function*(t){let i=Math.round(t),e=i<t,s=1;for(;;)e?(yield i+s,yield i-s):(yield i-s,yield i+s),s++}(t),e=this.oc();for(;e;){let t=i.next().value;if(this.Wu.get(t))return t;if(t<0||t>e)break}return t}Yu(t){if(void 0!==t.rightOffsetPixels){let i=t.rightOffsetPixels/(t.barSpacing||this.ju);this.ts.wn(i)}}}(u=M||(M={}))[u.OnTouchEnd=0]="OnTouchEnd",u[u.OnNextTap=1]="OnNextTap";class iV{constructor(t,i,e){this.Zc=[],this.Gc=[],this.Xc=null,this.M_=0,this.Jc=null,this.Qc=new I,this.td=new I,this.sd=null,this.nd=t,this.ys=i,this._u=e,this.Co=new Z(this.ys.layout.colorParsers),this.ed=new q(this),this.Gh=new iD(this,i.timeScale,this.ys.localization,e),this.Ct=new tv(this,i.crosshair),this.rd=new ia(i.crosshair),i.addDefaultPane&&(this.hd(0),this.Zc[0].B_(2)),this.ad=this.ld(0),this.od=this.ld(1)}Sa(){this._d(tb.xn())}ur(){this._d(tb.Sn())}Wa(){this._d(new tb(1))}xa(t){let i=this.ud(t);this._d(i)}dd(){return this.Jc}fd(t){if(this.Jc?.eu===t?.eu&&this.Jc?.ru?.Jn===t?.ru?.Jn)return;let i=this.Jc;this.Jc=t,null!==i&&this.xa(i.eu),null!==t&&t.eu!==i?.eu&&this.xa(t.eu)}N(){return this.ys}_r(t){F(this.ys,t),this.Zc.forEach(i=>i.R_(t)),void 0!==t.timeScale&&this.Gh._r(t.timeScale),void 0!==t.localization&&this.Gh.Xu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Qc.p(),this.ad=this.ld(0),this.od=this.ld(1),this.Sa()}pd(t,i,e=0){let s=this.Zc[e];if(void 0===s)return;if("left"===t)return F(this.ys,{leftPriceScale:i}),s.R_({leftPriceScale:i}),this.Qc.p(),void this.Sa();if("right"===t)return F(this.ys,{rightPriceScale:i}),s.R_({rightPriceScale:i}),this.Qc.p(),void this.Sa();let h=this.vd(t,e);null!==h&&(h.Ft._r(i),this.Qc.p())}vd(t,i){let e=this.Zc[i];if(void 0===e)return null;let s=e.D_(t);return null!==s?{Ks:e,Ft:s}:null}Et(){return this.Gh}Zs(){return this.Zc}md(){return this.Ct}wd(){return this.td}gd(t,i){t.zo(i),this.Mc()}E_(t){this.M_=t,this.Gh.E_(this.M_),this.Zc.forEach(i=>i.E_(t)),this.Mc()}Md(t){1!==this.Zc.length&&(T(t>=0&&t<this.Zc.length,"Invalid pane index"),this.Zc.splice(t,1),this.Sa())}bd(t,i){if(this.Zc.length<2)return;T(t>=0&&t<this.Zc.length,"Invalid pane index");let e=this.Zc[t],s=this.Zc.reduce((t,i)=>t+i.V_(),0),h=this.Zc.reduce((t,i)=>t+i.$t(),0),r=h-30*(this.Zc.length-1);i=Math.min(r,Math.max(30,i));let l=s/h,n=e.$t();e.B_(i*l);let o=i-n,a=this.Zc.length-1;for(let t of this.Zc)if(t!==e){let i=Math.min(r,Math.max(30,t.$t()-o/a));o-=t.$t()-i,a-=1;let e=i*l;t.B_(e)}this.Sa()}Sd(t,i){T(t>=0&&t<this.Zc.length&&i>=0&&i<this.Zc.length,"Invalid pane index");let e=this.Zc[t],s=this.Zc[i];this.Zc[t]=s,this.Zc[i]=e,this.Sa()}xd(t,i){if(T(t>=0&&t<this.Zc.length&&i>=0&&i<this.Zc.length,"Invalid pane index"),t===i)return;let[e]=this.Zc.splice(t,1);this.Zc.splice(i,0,e),this.Sa()}U_(t,i,e){t.U_(i,e)}q_(t,i,e){t.q_(i,e),this.Ca(),this._d(this.Cd(t,2))}j_(t,i){t.j_(i),this._d(this.Cd(t,2))}Y_(t,i,e){i.Do()||t.Y_(i,e)}K_(t,i,e){i.Do()||(t.K_(i,e),this.Ca(),this._d(this.Cd(t,2)))}Z_(t,i){i.Do()||(t.Z_(i),this._d(this.Cd(t,2)))}X_(t,i){t.X_(i),this._d(this.Cd(t,2))}yd(t){this.Gh.e_(t)}kd(t,i){let e=this.Et();if(e.Ki()||0===i)return;let s=e.Qi();t=Math.max(1,Math.min(t,s)),e.Pc(t,i),this.Mc()}Pd(t){this.Td(0),this.Rd(t),this.Dd()}Id(t){this.Gh.r_(t),this.Mc()}Vd(){this.Gh.h_(),this.ur()}Td(t){this.Gh.a_(t)}Rd(t){this.Gh.l_(t),this.Mc()}Dd(){this.Gh.o_(),this.ur()}Js(){return this.Gc}Ws(){return null===this.Xc&&(this.Xc=this.Gc.filter(t=>t.It())),this.Xc}ba(){this.Xc=null}Bd(t,i,e,s,h){this.Ct.Is(t,i);let r=NaN,l=this.Gh.vc(t,!0),n=this.Gh.Re();null!==n&&(l=Math.min(Math.max(n.Ba(),l),n.bi())),l=this.Ct.Fs(l);let o=s.Ps(),a=o.Lt();if(null!==a&&(r=o.Ts(i,a)),r=this.rd.gl(r,l,s),this.Ct.As(l,r,s),this.Wa(),!h){let h=iT(s,t,i);this.fd(h&&{eu:h.eu,ru:h.ru,au:h.au||null}),this.td.p(this.Ct.Bt(),{x:t,y:i},e)}}Ed(t,i,e){let s=e.Ps(),h=s.Lt(),r=s.Nt(t,W(h)),l=this.Gh.sc(i,!0),n=this.Gh.qt(W(l));this.Bd(n,r,null,e,!0)}Ad(t){this.md().zs(),this.Wa(),t||this.td.p(null,null,null)}Ca(){let t=this.Ct.Ks();if(null!==t){let i=this.Ct.Bs(),e=this.Ct.Es();this.Bd(i,e,null,t)}this.Ct.Ns()}Ld(t,i,e){let s=this.Gh.Rs(0);void 0!==i&&void 0!==e&&this.Gh.kt(i,e);let h=this.Gh.Rs(0),r=this.Gh.dc(),l=this.Gh.Re();if(null!==l&&null!==s&&null!==h){let i=l.Ve(r),n=this._u.key(s)>this._u.key(h),o=null!==t&&t>r&&!n,a=this.Gh.N().allowShiftVisibleRangeOnWhitespaceReplacement,u=i&&(void 0!==e||a)&&this.Gh.N().shiftVisibleRangeOnNewBar;if(o&&!u){let i=t-r;this.Gh.wn(this.Gh.Sc()-i)}}this.Gh.kc(t)}Pa(t){null!==t&&t.Q_()}jn(t){if(t instanceof iR)return t;let i=this.Zc.find(i=>i.Dt().includes(t));return void 0===i?null:i}Mc(){this.Zc.forEach(t=>t.Q_()),this.Ca()}m(){this.Zc.forEach(t=>t.m()),this.Zc.length=0,this.ys.localization.priceFormatter=void 0,this.ys.localization.percentageFormatter=void 0,this.ys.localization.timeFormatter=void 0}zd(){return this.ed}Gn(){return this.ed.N()}I_(){return this.Qc}Od(t,i){let e=this.hd(i);this.Nd(t,e),this.Gc.push(t),this.ba(),1===this.Gc.length?this.Sa():this.ur()}Fd(t){let i=this.jn(t),e=this.Gc.indexOf(t);T(-1!==e,"Series not found");let s=W(i);this.Gc.splice(e,1),s.i_(t),t.m&&t.m(),this.ba(),this.Gh.Gu(),this.Wd(s)}Ma(t,i){let e=W(this.jn(t));e.i_(t,!0),e.Qo(t,i,!0)}Oc(){let t=tb.Sn();t._n(),this._d(t)}Hd(t){let i=tb.Sn();i.dn(t),this._d(i)}vn(){let t=tb.Sn();t.vn(),this._d(t)}mn(t){let i=tb.Sn();i.mn(t),this._d(i)}wn(t){let i=tb.Sn();i.wn(t),this._d(i)}fn(t){let i=tb.Sn();i.fn(t),this._d(i)}un(){let t=tb.Sn();t.un(),this._d(t)}Ud(){return this.ys.rightPriceScale.visible?"right":"left"}$d(t,i){if(T(i>=0,"Index should be greater or equal to 0"),i===this.qd(t))return;let e=W(this.jn(t));e.i_(t);let s=this.hd(i);this.Nd(t,s),0===e.Ml().length&&this.Wd(e),this.Sa()}jd(){return this.od}$(){return this.ad}Ut(t){let i=this.od,e=this.ad;if(i===e)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.sd||this.sd.sh!==e||this.sd.nh!==i)this.sd={sh:e,nh:i,Yd:new Map};else{let i=this.sd.Yd.get(t);if(void 0!==i)return i}let s=this.Co.tt(e,i,t/100);return this.sd.Yd.set(t,s),s}Kd(t){return this.Zc.indexOf(t)}Zi(){return this.Co}Zd(){return this.Gd()}Gd(t){let i=new iR(this.Gh,this);this.Zc.push(i);let e=t??this.Zc.length-1,s=tb.xn();return s.en(e,{rn:0,hn:!0}),this._d(s),i}hd(t){return T(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.Zc.length,t))<this.Zc.length?this.Zc[t]:this.Gd(t)}qd(t){return this.Zc.findIndex(i=>i.O_().includes(t))}Cd(t,i){let e=new tb(i);if(null!==t){let s=this.Zc.indexOf(t);e.en(s,{rn:i})}return e}ud(t,i){return void 0===i&&(i=2),this.Cd(this.jn(t),i)}_d(t){this.nd&&this.nd(t),this.Zc.forEach(t=>t.su().cr().kt())}Nd(t,i){let e=t.N().priceScaleId,s=void 0!==e?e:this.Ud();i.Qo(t,s),tw(s)||t._r(t.N())}ld(t){let i=this.ys.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color}Wd(t){!t.z_()&&0===t.Ml().length&&this.Zc.length>1&&this.Zc.splice(this.Kd(t),1)}}function iG(t){if(t>=1)return 0;let i=0;for(;i<8&&!(1e-8>Math.abs(Math.round(t)-t));i++)t*=10;return i}function i$(t){return!O(t)&&!V(t)}function iH(t){return O(t)}(c=y||(y={}))[c.Disabled=0]="Disabled",c[c.Continuous=1]="Continuous",c[c.OnDataUpdate=2]="OnDataUpdate",(d=S||(S={}))[d.LastBar=0]="LastBar",d[d.LastVisible=1]="LastVisible",(f=x||(x={})).Solid="solid",f.VerticalGradient="gradient",(m=_||(_={}))[m.Year=0]="Year",m[m.Month=1]="Month",m[m.DayOfMonth=2]="DayOfMonth",m[m.Time=3]="Time",m[m.TimeWithSeconds=4]="TimeWithSeconds";let iA=t=>t.getUTCFullYear();class iQ{constructor(t="yyyy-MM-dd",i="default"){this.Xd=t,this.Jd=i}uu(t){return function(t,i,e){return i.replace(/yyyy/g,ty(iA(t),4)).replace(/yy/g,ty(iA(t)%100,2)).replace(/MMMM/g,new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"long"})).replace(/MMM/g,new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"short"})).replace(/MM/g,ty(t.getUTCMonth()+1,2)).replace(/dd/g,ty(t.getUTCDate(),2))}(t,this.Xd,this.Jd)}}class iU{constructor(t){this.Qd=t||"%h:%m:%s"}uu(t){return this.Qd.replace("%h",ty(t.getUTCHours(),2)).replace("%m",ty(t.getUTCMinutes(),2)).replace("%s",ty(t.getUTCSeconds(),2))}}let iq={tf:"yyyy-MM-dd",if:"%h:%m:%s",sf:" ",nf:"default"};class iK{constructor(t={}){let i={...iq,...t};this.ef=new iQ(i.tf,i.nf),this.rf=new iU(i.if),this.hf=i.sf}uu(t){return`${this.ef.uu(t)}${this.hf}${this.rf.uu(t)}`}}function iY(t){return 60*t*6e4}function iZ(t){return 60*t*1e3}let iJ=[{af:1e3,lf:10},{af:iZ(1),lf:20},{af:iZ(5),lf:21},{af:iZ(30),lf:22},{af:iY(1),lf:30},{af:iY(3),lf:31},{af:iY(6),lf:32},{af:iY(12),lf:33}];function iX(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(let e=iJ.length-1;e>=0;--e)if(Math.floor(i.getTime()/iJ[e].af)!==Math.floor(t.getTime()/iJ[e].af))return iJ[e].lf;return 0}function i0(t){let i=t;if(V(t)&&(i=i2(t)),!i$(i))throw Error("time must be of type BusinessDay");return{_f:Math.round(new Date(Date.UTC(i.year,i.month-1,i.day,0,0,0,0)).getTime()/1e3),uf:i}}function i1(t){if(!O(t))throw Error("time must be of type isUTCTimestamp");return{_f:t}}function i2(t){let i=new Date(t);if(isNaN(i.getTime()))throw Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function i9(t){V(t.time)&&(t.time=i2(t.time))}class i5{options(){return this.ys}setOptions(t){this.ys=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?function(t){t.forEach(i9)}(t):i9(t)}createConverterToInternalObj(t){return W(0===t.length?null:i$(t[0].time)||V(t[0].time)?i0:i1)}key(t){return"object"==typeof t&&"_f"in t?t._f:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){return void 0===t.uf?new Date(1e3*t._f).getTime():new Date(Date.UTC(t.uf.year,t.uf.month-1,t.uf.day)).getTime()}convertHorzItemToInternal(t){return O(t)?i1(t):i$(t)?i0(t):i0(i2(t))}updateFormatter(t){if(!this.ys)return;let i=t.dateFormat;this.ys.timeScale.timeVisible?this.cf=new iK({tf:i,if:this.ys.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",sf:"   ",nf:t.locale}):this.cf=new iQ(i,t.locale)}formatHorzItem(t){return this.cf.uu(new Date(1e3*t._f))}formatTickmark(t,i){let e=function(t,i,e){switch(t){case 0:case 10:return i?e?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.ys.timeScale.timeVisible,this.ys.timeScale.secondsVisible),s=this.ys.timeScale;if(void 0!==s.tickMarkFormatter){let h=s.tickMarkFormatter(t.originalTime,e,i.locale);if(null!==h)return h}return function(t,i,e){let s={};switch(i){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}let h=new Date(void 0===t.uf?1e3*t._f:Date.UTC(t.uf.year,t.uf.month-1,t.uf.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(e,s)}(t.time,e,i.locale)}maxTickMarkWeight(t){let i=t.reduce(iO,t[0]).weight;return i>30&&i<50&&(i=30),i}fillWeightsForPoints(t,i){!function(t,i=0){if(0===t.length)return;let e=0===i?null:t[i-1].time._f,s=null!==e?new Date(1e3*e):null,h=0;for(let r=i;r<t.length;++r){let i=t[r],l=new Date(1e3*i.time._f);null!==s&&(i.timeWeight=iX(l,s)),h+=i.time._f-(e||i.time._f),e=i.time._f,s=l}if(0===i&&t.length>1){let i=Math.ceil(h/(t.length-1)),e=new Date(1e3*(t[0].time._f-i));t[0].timeWeight=iX(new Date(1e3*t[0].time._f),e)}}(t,i)}static df(t){return F({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}let i6="undefined"!=typeof window;function i3(){return!!i6&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function i4(){return!!i6&&/iPhone|iPad|iPod/.test(window.navigator.platform)}class i7{constructor(t,i,e){this.ff=0,this.pf=null,this.vf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.mf=0,this.wf=null,this.gf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Mf=null,this.bf=!1,this.Sf=null,this.xf=null,this.Cf=!1,this.yf=!1,this.kf=!1,this.Pf=null,this.Tf=null,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=0,this.Af=!1,this.Lf=!1,this.zf=!1,this.Of=0,this.Nf=null,this.Ff=!i4(),this.Wf=t=>{this.Hf(t)},this.Uf=t=>{if(this.$f(t)){let i=this.qf(t);if(++this.mf,this.wf&&this.mf>1){let{jf:e}=this.Yf(ei(t),this.gf);e<30&&!this.kf&&this.Kf(i,this.Gf.Zf),this.Xf()}}else{let i=this.qf(t);if(++this.ff,this.pf&&this.ff>1){let{jf:e}=this.Yf(ei(t),this.vf);e<5&&!this.yf&&this.Jf(i,this.Gf.Qf),this.tp()}}},this.ip=t,this.Gf=i,this.ys=e,this.sp()}m(){null!==this.Pf&&(this.Pf(),this.Pf=null),null!==this.Tf&&(this.Tf(),this.Tf=null),null!==this.Df&&(this.Df(),this.Df=null),null!==this.If&&(this.If(),this.If=null),null!==this.Vf&&(this.Vf(),this.Vf=null),null!==this.Rf&&(this.Rf(),this.Rf=null),this.np(),this.tp()}ep(t){this.Df&&this.Df();let i=this.rp.bind(this);if(this.Df=()=>{this.ip.removeEventListener("mousemove",i)},this.ip.addEventListener("mousemove",i),this.$f(t))return;let e=this.qf(t);this.Jf(e,this.Gf.hp),this.Ff=!0}tp(){null!==this.pf&&clearTimeout(this.pf),this.ff=0,this.pf=null,this.vf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Xf(){null!==this.wf&&clearTimeout(this.wf),this.mf=0,this.wf=null,this.gf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}rp(t){if(this.zf||null!==this.xf||this.$f(t))return;let i=this.qf(t);this.Jf(i,this.Gf.ap),this.Ff=!0}lp(t){let i=es(t.changedTouches,W(this.Nf));if(null===i||(this.Of=ee(t),null!==this.Bf)||this.Lf)return;this.Af=!0;let{op:e,_p:s,jf:h}=this.Yf(ei(i),W(this.xf));if(this.Cf||!(h<5)){if(!this.Cf){let t=.5*e,i=s>=t&&!this.ys.up(),h=t>s&&!this.ys.cp();i||h||(this.Lf=!0),this.Cf=!0,this.kf=!0,this.np(),this.Xf()}if(!this.Lf){let e=this.qf(t,i);this.Kf(e,this.Gf.dp),et(t)}}}fp(t){if(0!==t.button)return;let{jf:i}=this.Yf(ei(t),W(this.Sf));if(i>=5&&(this.yf=!0,this.tp()),this.yf){let i=this.qf(t);this.Jf(i,this.Gf.pp)}}Yf(t,i){let e=Math.abs(i._t-t._t),s=Math.abs(i.ut-t.ut);return{op:e,_p:s,jf:e+s}}vp(t){let i=es(t.changedTouches,W(this.Nf));if(null===i&&0===t.touches.length&&(i=t.changedTouches[0]),null===i)return;this.Nf=null,this.Of=ee(t),this.np(),this.xf=null,this.Vf&&(this.Vf(),this.Vf=null);let e=this.qf(t,i);if(this.Kf(e,this.Gf.mp),++this.mf,this.wf&&this.mf>1){let{jf:t}=this.Yf(ei(i),this.gf);t<30&&!this.kf&&this.Kf(e,this.Gf.Zf),this.Xf()}else this.kf||(this.Kf(e,this.Gf.wp),this.Gf.wp&&et(t));0===this.mf&&et(t),0===t.touches.length&&this.bf&&(this.bf=!1,et(t))}Hf(t){if(0!==t.button)return;let i=this.qf(t);if(this.Sf=null,this.zf=!1,this.If&&(this.If(),this.If=null),i3()&&this.ip.ownerDocument.documentElement.removeEventListener("mouseleave",this.Wf),!this.$f(t)){if(this.Jf(i,this.Gf.gp),++this.ff,this.pf&&this.ff>1){let{jf:e}=this.Yf(ei(t),this.vf);e<5&&!this.yf&&this.Jf(i,this.Gf.Qf),this.tp()}else this.yf||this.Jf(i,this.Gf.Mp)}}np(){null!==this.Mf&&(clearTimeout(this.Mf),this.Mf=null)}bp(t){if(null!==this.Nf)return;let i=t.changedTouches[0];this.Nf=i.identifier,this.Of=ee(t);let e=this.ip.ownerDocument.documentElement;this.kf=!1,this.Cf=!1,this.Lf=!1,this.xf=ei(i),this.Vf&&(this.Vf(),this.Vf=null);{let i=this.lp.bind(this),s=this.vp.bind(this);this.Vf=()=>{e.removeEventListener("touchmove",i),e.removeEventListener("touchend",s)},e.addEventListener("touchmove",i,{passive:!1}),e.addEventListener("touchend",s,{passive:!1}),this.np(),this.Mf=setTimeout(this.Sp.bind(this,t),240)}let s=this.qf(t,i);this.Kf(s,this.Gf.xp),this.wf||(this.mf=0,this.wf=setTimeout(this.Xf.bind(this),500),this.gf=ei(i))}Cp(t){if(0!==t.button)return;let i=this.ip.ownerDocument.documentElement;i3()&&i.addEventListener("mouseleave",this.Wf),this.yf=!1,this.Sf=ei(t),this.If&&(this.If(),this.If=null);{let t=this.fp.bind(this),e=this.Hf.bind(this);this.If=()=>{i.removeEventListener("mousemove",t),i.removeEventListener("mouseup",e)},i.addEventListener("mousemove",t),i.addEventListener("mouseup",e)}if(this.zf=!0,this.$f(t))return;let e=this.qf(t);this.Jf(e,this.Gf.yp),this.pf||(this.ff=0,this.pf=setTimeout(this.tp.bind(this),500),this.vf=ei(t))}sp(){var t;this.ip.addEventListener("mouseenter",this.ep.bind(this)),this.ip.addEventListener("touchcancel",this.np.bind(this));{let t=this.ip.ownerDocument,i=t=>{this.Gf.kp&&(t.composed&&this.ip.contains(t.composedPath()[0])||t.target&&this.ip.contains(t.target)||this.Gf.kp())};this.Tf=()=>{t.removeEventListener("touchstart",i)},this.Pf=()=>{t.removeEventListener("mousedown",i)},t.addEventListener("mousedown",i),t.addEventListener("touchstart",i,{passive:!0})}i4()&&(this.Rf=()=>{this.ip.removeEventListener("dblclick",this.Uf)},this.ip.addEventListener("dblclick",this.Uf)),this.ip.addEventListener("mouseleave",this.Pp.bind(this)),this.ip.addEventListener("touchstart",this.bp.bind(this),{passive:!0}),t=this.ip,i6&&void 0!==window.chrome&&t.addEventListener("mousedown",t=>{if(1===t.button)return t.preventDefault(),!1}),this.ip.addEventListener("mousedown",this.Cp.bind(this)),this.Tp(),this.ip.addEventListener("touchmove",()=>{},{passive:!1})}Tp(){void 0===this.Gf.Rp&&void 0===this.Gf.Dp&&void 0===this.Gf.Ip||(this.ip.addEventListener("touchstart",t=>this.Vp(t.touches),{passive:!0}),this.ip.addEventListener("touchmove",t=>{if(2===t.touches.length&&null!==this.Bf&&void 0!==this.Gf.Dp){let i=i8(t.touches[0],t.touches[1])/this.Ef;this.Gf.Dp(this.Bf,i),et(t)}},{passive:!1}),this.ip.addEventListener("touchend",t=>{this.Vp(t.touches)}))}Vp(t){1===t.length&&(this.Af=!1),2!==t.length||this.Af||this.bf?this.Bp():this.Ep(t)}Ep(t){let i=this.ip.getBoundingClientRect()||{left:0,top:0};this.Bf={_t:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,ut:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.Ef=i8(t[0],t[1]),void 0!==this.Gf.Rp&&this.Gf.Rp(),this.np()}Bp(){null!==this.Bf&&(this.Bf=null,void 0!==this.Gf.Ip&&this.Gf.Ip())}Pp(t){if(this.Df&&this.Df(),this.$f(t)||!this.Ff)return;let i=this.qf(t);this.Jf(i,this.Gf.Ap),this.Ff=!i4()}Sp(t){let i=es(t.touches,W(this.Nf));if(null===i)return;let e=this.qf(t,i);this.Kf(e,this.Gf.Lp),this.kf=!0,this.bf=!0}$f(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:ee(t)<this.Of+500}Kf(t,i){i&&i.call(this.Gf,t)}Jf(t,i){i&&i.call(this.Gf,t)}qf(t,i){let e=i||t,s=this.ip.getBoundingClientRect()||{left:0,top:0};return{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,localX:e.clientX-s.left,localY:e.clientY-s.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,zp:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,Op:t.type,Np:e.target,lu:t.view,Fp:()=>{"touchstart"!==t.type&&et(t)}}}}function i8(t,i){let e=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(e*e+s*s)}function et(t){t.cancelable&&t.preventDefault()}function ei(t){return{_t:t.pageX,ut:t.pageY}}function ee(t){return t.timeStamp||performance.now()}function es(t,i){for(let e=0;e<t.length;++e)if(t[e].identifier===i)return t[e];return null}class eh{constructor(t,i,e){this.Wp=null,this.Hp=null,this.Up=!0,this.$p=null,this.qp=t,this.jp=t.Yp()[i],this.Kp=t.Yp()[e],this.Zp=document.createElement("tr"),this.Zp.style.height="1px",this.Gp=document.createElement("td"),this.Gp.style.position="relative",this.Gp.style.padding="0",this.Gp.style.margin="0",this.Gp.setAttribute("colspan","3"),this.Xp(),this.Zp.appendChild(this.Gp),this.Up=this.qp.N().layout.panes.enableResize,this.Up?this.Jp():(this.Wp=null,this.Hp=null)}m(){null!==this.Hp&&this.Hp.m()}Qp(){return this.Zp}tv(){return s({width:this.jp.tv().width,height:1})}iv(){return s({width:this.jp.iv().width,height:1*window.devicePixelRatio})}sv(t,i,e){let s=this.iv();t.fillStyle=this.qp.N().layout.panes.separatorColor,t.fillRect(i,e,s.width,s.height)}kt(){this.Xp(),this.qp.N().layout.panes.enableResize!==this.Up&&(this.Up=this.qp.N().layout.panes.enableResize,this.Up?this.Jp():(null!==this.Wp&&(this.Gp.removeChild(this.Wp.nv),this.Gp.removeChild(this.Wp.ev),this.Wp=null),null!==this.Hp&&(this.Hp.m(),this.Hp=null)))}Jp(){let t=document.createElement("div"),i=t.style;i.position="fixed",i.display="none",i.zIndex="49",i.top="0",i.left="0",i.width="100%",i.height="100%",i.cursor="row-resize",this.Gp.appendChild(t);let e=document.createElement("div"),s=e.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.Gp.appendChild(e);let h={hp:this.rv.bind(this),Ap:this.hv.bind(this),yp:this.av.bind(this),xp:this.av.bind(this),pp:this.lv.bind(this),dp:this.lv.bind(this),gp:this.ov.bind(this),mp:this.ov.bind(this)};this.Hp=new i7(e,h,{up:()=>!1,cp:()=>!0}),this.Wp={ev:e,nv:t}}Xp(){this.Gp.style.background=this.qp.N().layout.panes.separatorColor}rv(t){null!==this.Wp&&(this.Wp.ev.style.backgroundColor=this.qp.N().layout.panes.separatorHoverColor)}hv(t){null!==this.Wp&&null===this.$p&&(this.Wp.ev.style.backgroundColor="")}av(t){if(null===this.Wp)return;let i=this.jp._v().V_()+this.Kp._v().V_(),e=i/(this.jp.tv().height+this.Kp.tv().height),s=30*e;i<=2*s||(this.$p={uv:t.pageY,cv:this.jp._v().V_(),dv:i-s,fv:i,pv:e,vv:s},this.Wp.nv.style.display="block")}lv(t){let i=this.$p;if(null===i)return;let e=(t.pageY-i.uv)*i.pv,s=iu(i.cv+e,i.vv,i.dv);this.jp._v().B_(s),this.Kp._v().B_(i.fv-s),this.qp.Qt().Sa()}ov(t){null!==this.$p&&null!==this.Wp&&(this.$p=null,this.Wp.nv.style.display="none")}}function er(t,i,e){let s=(t.mv-i.mv)/(t.wt-i.wt);return Math.sign(s)*Math.min(Math.abs(s),e)}class el{constructor(t,i,e,s){this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=null,this.xv=0,this.Cv=0,this.yv=t,this.kv=i,this.Pv=e,this.Cn=s}Tv(t,i){if(null!==this.wv){if(this.wv.wt===i)return void(this.wv.mv=t);if(Math.abs(this.wv.mv-t)<this.Cn)return}this.bv=this.Mv,this.Mv=this.gv,this.gv=this.wv,this.wv={wt:i,mv:t}}ce(t,i){var e,s,h,r,l,n;if(null===this.wv||null===this.gv||i-this.wv.wt>50)return;let o=0,a=er(this.wv,this.gv,this.kv),u=(e=this.wv,s=this.gv,e.mv-s.mv),c=[a],d=[u];if(o+=u,null!==this.Mv){let t=er(this.gv,this.Mv,this.kv);if(Math.sign(t)===Math.sign(a)){let i=(h=this.gv,r=this.Mv,h.mv-r.mv);if(c.push(t),d.push(i),o+=i,null!==this.bv){let t=er(this.Mv,this.bv,this.kv);if(Math.sign(t)===Math.sign(a)){let i=(l=this.Mv,n=this.bv,l.mv-n.mv);c.push(t),d.push(i),o+=i}}}}let f=0;for(let t=0;t<c.length;++t)f+=d[t]/o*c[t];Math.abs(f)<this.yv||(this.Sv={mv:t,wt:i},this.Cv=f,this.xv=function(t,i){let e=Math.log(i);return Math.log(-(1*e/t))/e}(Math.abs(f),this.Pv))}Bc(t){let i=W(this.Sv),e=t-i.wt;return i.mv+this.Cv*(Math.pow(this.Pv,e)-1)/Math.log(this.Pv)}Vc(t){return null===this.Sv||this.Rv(t)===this.xv}Rv(t){return Math.min(t-W(this.Sv).wt,this.xv)}}class en{constructor(t,i){this.Dv=void 0,this.Iv=void 0,this.Vv=void 0,this.ps=!1,this.Bv=t,this.Ev=i,this.Av()}kt(){this.Av()}Lv(){this.Dv&&this.Bv.removeChild(this.Dv),this.Iv&&this.Bv.removeChild(this.Iv),this.Dv=void 0,this.Iv=void 0}zv(){return this.ps!==this.Ov()||this.Vv!==this.Nv()}Nv(){return this.Ev.Qt().Zi().J(this.Ev.N().layout.textColor)>160?"dark":"light"}Ov(){return this.Ev.N().layout.attributionLogo}Fv(){let t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}Av(){this.zv()&&(this.Lv(),this.ps=this.Ov(),this.ps&&(this.Vv=this.Nv(),this.Iv=document.createElement("style"),this.Iv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Dv=document.createElement("a"),this.Dv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Fv()}`,this.Dv.title="Charting by TradingView",this.Dv.id="tv-attr-logo",this.Dv.target="_blank",this.Dv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Dv.toggleAttribute("data-dark","dark"===this.Vv),this.Bv.appendChild(this.Iv),this.Bv.appendChild(this.Dv)))}}function eo(t,i){let e=W(t.ownerDocument).createElement("canvas");t.appendChild(e);let s=function(t,i){if("device-pixel-content-box"===i.type)return new j(t,i.transform,i.options);throw Error("Unsupported binding target")}(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!0},transform:(t,i)=>({width:Math.max(t.width,i.width),height:Math.max(t.height,i.height)})});return s.resizeCanvasElement(i),s}function ea(t){t.width=1,t.height=1,t.getContext("2d")?.clearRect(0,0,1,1)}function eu(t,i,e,s){t.Wh&&t.Wh(i,e,s)}function ec(t,i,e,s){t.nt(i,e,s)}function ed(t,i,e,s){for(let h of t(e,s)){let t=h.Tt(s);null!==t&&i(t)}}function ef(t,i){return e=>void 0!==e.Ft?(e.Ft()?.al()??"")!==i?[]:e.qa?.(t)??[]:[]}function em(t,i,e,s){if(!t.length)return;let h=0,r=t[0].$t(s,!0),l=1===i?e/2-(t[0].Fi()-r/2):t[0].Fi()-r/2-e/2;l=Math.max(0,l);for(let r=1;r<t.length;r++){let n=t[r],o=t[r-1],a=o.$t(s,!1),u=n.Fi(),c=o.Fi();if(1===i?u>c-a:u<c+a){let s=c-a*i;n.Wi(s);let r=s-i*a/2;if((1===i?r<0:r>e)&&l>0){let s=Math.min(1===i?-1-r:r-e,l);for(let e=h;e<t.length;e++)t[e].Wi(t[e].Fi()+i*s);l-=s}}else h=r,l=1===i?c-a-u:u-(c+a)}}class ep{constructor(t,i,e,h){this.ji=null,this.Wv=null,this.Hv=!1,this.Uv=new tj(200),this.$v=null,this.qv=0,this.jv=!1,this.Yv=()=>{this.jv||this.yt.Kv().Qt().ur()},this.Zv=()=>{this.jv||this.yt.Kv().Qt().ur()},this.yt=t,this.ys=i,this.So=i.layout,this.ed=e,this.Gv="left"===h,this.Xv=ef("normal",h),this.Jv=ef("top",h),this.Qv=ef("bottom",h),this.Gp=document.createElement("div"),this.Gp.style.height="100%",this.Gp.style.overflow="hidden",this.Gp.style.width="25px",this.Gp.style.left="0",this.Gp.style.position="relative",this.tm=eo(this.Gp,s({width:16,height:16})),this.tm.subscribeSuggestedBitmapSizeChanged(this.Yv);let r=this.tm.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.im=eo(this.Gp,s({width:16,height:16})),this.im.subscribeSuggestedBitmapSizeChanged(this.Zv);let l=this.im.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0";let n={yp:this.av.bind(this),xp:this.av.bind(this),pp:this.lv.bind(this),dp:this.lv.bind(this),kp:this.sm.bind(this),gp:this.ov.bind(this),mp:this.ov.bind(this),Qf:this.nm.bind(this),Zf:this.nm.bind(this),hp:this.rm.bind(this),Ap:this.hv.bind(this)};this.Hp=new i7(this.im.canvasElement,n,{up:()=>!this.ys.handleScroll.vertTouchDrag,cp:()=>!0})}m(){this.Hp.m(),this.im.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ea(this.im.canvasElement),this.im.dispose(),this.tm.unsubscribeSuggestedBitmapSizeChanged(this.Yv),ea(this.tm.canvasElement),this.tm.dispose(),null!==this.ji&&this.ji.n_().u(this),this.ji=null}Qp(){return this.Gp}k(){return this.So.fontSize}hm(){let t=this.ed.N();return this.$v!==t.P&&(this.Uv.Ln(),this.$v=t.P),t}am(){var t,i;if(null===this.ji)return 0;let e=0,s=this.hm(),h=W(this.tm.canvasElement.getContext("2d",{colorSpace:this.yt.Kv().N().layout.colorSpace}));h.save();let r=this.ji.Dl();h.font=this.lm(),r.length>0&&(e=Math.max(this.Uv.Ii(h,r[0].Gl),this.Uv.Ii(h,r[r.length-1].Gl)));let l=this.om();for(let t=l.length;t--;){let i=this.Uv.Ii(h,l[t].ri());i>e&&(e=i)}let n=this.ji.Lt();if(null!==n&&null!==this.Wv&&2!==(t=this.ys.crosshair).mode&&t.horzLine.visible&&t.horzLine.labelVisible){let t=this.ji.Ts(1,n),i=this.ji.Ts(this.Wv.height-2,n);e=Math.max(e,this.Uv.Ii(h,this.ji.Gi(Math.floor(Math.min(t,i))+.11111111111111,n)),this.Uv.Ii(h,this.ji.Gi(Math.ceil(Math.max(t,i))-.11111111111111,n)))}h.restore();let o=e||34;return(i=Math.ceil(s.S+s.C+s.V+s.B+5+o))+i%2}_m(t){null!==this.Wv&&h(this.Wv,t)||(this.Wv=t,this.jv=!0,this.tm.resizeCanvasElement(t),this.im.resizeCanvasElement(t),this.jv=!1,this.Gp.style.width=`${t.width}px`,this.Gp.style.height=`${t.height}px`)}um(){return W(this.Wv).width}_s(t){this.ji!==t&&(null!==this.ji&&this.ji.n_().u(this),this.ji=t,t.n_().i(this.uo.bind(this),this))}Ft(){return this.ji}Ln(){let t=this.yt._v();this.yt.Kv().Qt().X_(t,W(this.Ft()))}dm(t){if(null===this.Wv)return;let i={colorSpace:this.yt.Kv().N().layout.colorSpace};if(1!==t){this.fm(),this.tm.applySuggestedBitmapSize();let t=k(this.tm,i);null!==t&&(t.useBitmapCoordinateSpace(t=>{this.pm(t),this.vm(t)}),this.yt.wm(t,this.Qv),this.gm(t),this.yt.wm(t,this.Xv),this.Mm(t))}this.im.applySuggestedBitmapSize();let e=k(this.im,i);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:i})=>{t.clearRect(0,0,i.width,i.height)}),this.bm(e),this.yt.wm(e,this.Jv))}iv(){return this.tm.bitmapSize}sv(t,i,e,s){let h=this.iv();if(h.width>0&&h.height>0&&(t.drawImage(this.tm.canvasElement,i,e),s)){let s=this.im.canvasElement;t.drawImage(s,i,e)}}kt(){this.ji?.Dl()}av(t){if(null===this.ji||this.ji.Ki()||!this.ys.handleScale.axisPressedMouseMove.price)return;let i=this.yt.Kv().Qt(),e=this.yt._v();this.Hv=!0,i.U_(e,this.ji,t.localY)}lv(t){if(null===this.ji||!this.ys.handleScale.axisPressedMouseMove.price)return;let i=this.yt.Kv().Qt(),e=this.yt._v(),s=this.ji;i.q_(e,s,t.localY)}sm(){if(null===this.ji||!this.ys.handleScale.axisPressedMouseMove.price)return;let t=this.yt.Kv().Qt(),i=this.yt._v(),e=this.ji;this.Hv&&(this.Hv=!1,t.j_(i,e))}ov(t){if(null===this.ji||!this.ys.handleScale.axisPressedMouseMove.price)return;let i=this.yt.Kv().Qt(),e=this.yt._v();this.Hv=!1,i.j_(e,this.ji)}nm(t){this.ys.handleScale.axisDoubleClickReset.price&&this.Ln()}rm(t){null!==this.ji&&(!this.yt.Kv().Qt().N().handleScale.axisPressedMouseMove.price||this.ji.Fe()||this.ji.Vo()||this.Sm(1))}hv(t){this.Sm(0)}om(){let t=[],i=null===this.ji?void 0:this.ji;return(e=>{for(let s=0;s<e.length;++s){let h=e[s].js(this.yt._v(),i);for(let i=0;i<h.length;i++)t.push(h[i])}})(this.yt._v().Dt()),t}pm({context:t,bitmapSize:i}){let{width:e,height:s}=i,h=this.yt._v().Qt(),r=h.$(),l=h.jd();r===l?tl(t,0,0,e,s,r):ta(t,0,0,e,s,r,l)}vm({context:t,bitmapSize:i,horizontalPixelRatio:e}){let s;if(null===this.Wv||null===this.ji||!this.ji.N().borderVisible)return;t.fillStyle=this.ji.N().borderColor;let h=Math.max(1,Math.floor(this.hm().S*e));s=this.Gv?i.width-h:0,t.fillRect(s,0,h,i.height)}gm(t){if(null===this.Wv||null===this.ji)return;let i=this.ji.Dl(),e=this.ji.N(),s=this.hm(),h=this.Gv?this.Wv.width-s.C:0;e.borderVisible&&e.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:r,verticalPixelRatio:l})=>{t.fillStyle=e.borderColor;let n=Math.max(1,Math.floor(l)),o=Math.floor(.5*l),a=Math.round(s.C*r);for(let e of(t.beginPath(),i))t.rect(Math.floor(h*r),Math.round(e.yl*l)-o,a,n);t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{t.font=this.lm(),t.fillStyle=e.textColor??this.So.textColor,t.textAlign=this.Gv?"right":"left",t.textBaseline="middle";let r=this.Gv?Math.round(h-s.V):Math.round(h+s.C+s.V),l=i.map(i=>this.Uv.Di(t,i.Gl));for(let e=i.length;e--;){let s=i[e];t.fillText(s.Gl,r,s.yl+l[e])}})}fm(){if(null===this.Wv||null===this.ji)return;let t=this.Wv.height/2,i=[],e=this.ji.Dt().slice(),s=this.yt._v(),h=this.hm();this.ji===s.Kn()&&this.yt._v().Dt().forEach(t=>{s.Yn(t)&&e.push(t)});let r=this.ji.Ml()[0],l=this.ji;e.forEach(e=>{let h=e.js(s,l);h.forEach(t=>{t.Wi(null),t.Hi()&&i.push(t)}),r===e&&h.length>0&&(t=h[0].Bi())}),i.forEach(t=>t.Wi(t.Bi())),this.ji.N().alignLabels&&this.xm(i,h,t)}xm(t,i,e){if(null===this.Wv)return;let s=t.filter(t=>t.Bi()<=e),h=t.filter(t=>t.Bi()>e);for(let e of(s.sort((t,i)=>i.Bi()-t.Bi()),s.length&&h.length&&h.push(s[0]),h.sort((t,i)=>t.Bi()-i.Bi()),t)){let t=Math.floor(e.$t(i)/2),s=e.Bi();s>-t&&s<t&&e.Wi(t),s>this.Wv.height-t&&s<this.Wv.height+t&&e.Wi(this.Wv.height-t)}em(s,1,this.Wv.height,i),em(h,-1,this.Wv.height,i)}Mm(t){if(null===this.Wv)return;let i=this.om(),e=this.hm(),s=this.Gv?"right":"left";i.forEach(i=>{i.Ui()&&i.Tt(W(this.ji)).nt(t,e,this.Uv,s)})}bm(t){if(null===this.Wv||null===this.ji)return;let i=this.yt.Kv().Qt(),e=[],s=this.yt._v(),h=i.md().js(s,this.ji);h.length&&e.push(h);let r=this.hm(),l=this.Gv?"right":"left";e.forEach(i=>{i.forEach(i=>{i.Tt(W(this.ji)).nt(t,r,this.Uv,l)})})}Sm(t){this.Gp.style.cursor=1===t?"ns-resize":"default"}uo(){let t=this.am();this.qv<t&&this.yt.Kv().Qt().Sa(),this.qv=t}lm(){return U(this.So.fontSize,this.So.fontFamily)}}function eg(t,i){return t.Ua?.(i)??[]}function ev(t,i){return t.qs?.(i)??[]}function ew(t,i){return t.us?.(i)??[]}function eb(t,i){return t.Fa?.(i)??[]}class eM{constructor(t,i){this.Wv=s({width:0,height:0}),this.Cm=null,this.ym=null,this.km=null,this.Pm=null,this.Tm=!1,this.Rm=new I,this.Dm=new I,this.Im=0,this.Vm=!1,this.Bm=null,this.Em=!1,this.Am=null,this.Lm=null,this.jv=!1,this.Yv=()=>{this.jv||null===this.zm||this.ts().ur()},this.Zv=()=>{this.jv||null===this.zm||this.ts().ur()},this.Ev=t,this.zm=i,this.zm.iu().i(this.Om.bind(this),this,!0),this.Nm=document.createElement("td"),this.Nm.style.padding="0",this.Nm.style.position="relative";let e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this.Fm=document.createElement("td"),this.Fm.style.padding="0",this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Nm.appendChild(e),this.tm=eo(e,s({width:16,height:16})),this.tm.subscribeSuggestedBitmapSizeChanged(this.Yv);let h=this.tm.canvasElement;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.im=eo(e,s({width:16,height:16})),this.im.subscribeSuggestedBitmapSizeChanged(this.Zv);let r=this.im.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Zp=document.createElement("tr"),this.Zp.appendChild(this.Fm),this.Zp.appendChild(this.Nm),this.Zp.appendChild(this.Wm),this.Hm(),this.Hp=new i7(this.im.canvasElement,this,{up:()=>null===this.Bm&&!this.Ev.N().handleScroll.vertTouchDrag,cp:()=>null===this.Bm&&!this.Ev.N().handleScroll.horzTouchDrag})}m(){null!==this.Cm&&this.Cm.m(),null!==this.ym&&this.ym.m(),this.km=null,this.im.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ea(this.im.canvasElement),this.im.dispose(),this.tm.unsubscribeSuggestedBitmapSizeChanged(this.Yv),ea(this.tm.canvasElement),this.tm.dispose(),null!==this.zm&&(this.zm.iu().u(this),this.zm.m()),this.Hp.m()}_v(){return W(this.zm)}Um(t){null!==this.zm&&this.zm.iu().u(this),this.zm=t,null!==this.zm&&this.zm.iu().i(eM.prototype.Om.bind(this),this,!0),this.Hm(),this.Ev.Yp().indexOf(this)===this.Ev.Yp().length-1?(this.km=this.km??new en(this.Nm,this.Ev),this.km.kt()):(this.km?.Lv(),this.km=null)}Kv(){return this.Ev}Qp(){return this.Zp}Hm(){if(null!==this.zm&&(this.$m(),0!==this.ts().Js().length)){if(null!==this.Cm){let t=this.zm.W_();this.Cm._s(W(t))}if(null!==this.ym){let t=this.zm.H_();this.ym._s(W(t))}}}qm(){null!==this.Cm&&this.Cm.kt(),null!==this.ym&&this.ym.kt()}V_(){return null!==this.zm?this.zm.V_():0}B_(t){this.zm&&this.zm.B_(t)}hp(t){if(!this.zm)return;this.jm();let i=t.localX,e=t.localY;this.Ym(i,e,t)}yp(t){this.jm(),this.Km(),this.Ym(t.localX,t.localY,t)}ap(t){if(!this.zm)return;this.jm();let i=t.localX,e=t.localY;this.Ym(i,e,t)}Mp(t){null!==this.zm&&(this.jm(),this.Zm(t))}Qf(t){null!==this.zm&&this.Gm(this.Dm,t)}Zf(t){this.Qf(t)}pp(t){this.jm(),this.Xm(t),this.Ym(t.localX,t.localY,t)}gp(t){null!==this.zm&&(this.jm(),this.Vm=!1,this.Jm(t))}wp(t){null!==this.zm&&this.Zm(t)}Lp(t){if(this.Vm=!0,null===this.Bm){let i={x:t.localX,y:t.localY};this.Qm(i,i,t)}}Ap(t){null!==this.zm&&(this.jm(),this.zm.Qt().fd(null),this.tw())}iw(){return this.Rm}sw(){return this.Dm}Rp(){this.Im=1,this.ts().un()}Dp(t,i){if(!this.Ev.N().handleScale.pinch)return;let e=5*(i-this.Im);this.Im=i,this.ts().kd(t._t,e)}xp(t){this.Vm=!1,this.Em=null!==this.Bm,this.Km();let i=this.ts().md();null!==this.Bm&&i.It()&&(this.Am={x:i.si(),y:i.ni()},this.Bm={x:t.localX,y:t.localY})}dp(t){if(null===this.zm)return;let i=t.localX,e=t.localY;if(null===this.Bm)this.Xm(t);else{this.Em=!1;let s=W(this.Am),h=s.x+(i-this.Bm.x),r=s.y+(e-this.Bm.y);this.Ym(h,r,t)}}mp(t){0===this.Kv().N().trackingMode.exitMode&&(this.Em=!0),this.nw(),this.Jm(t)}Xn(t,i){let e=this.zm;return null===e?null:iT(e,t,i)}ew(t,i){W("left"===i?this.Cm:this.ym)._m(s({width:t,height:this.Wv.height}))}tv(){return this.Wv}_m(t){h(this.Wv,t)||(this.Wv=t,this.jv=!0,this.tm.resizeCanvasElement(t),this.im.resizeCanvasElement(t),this.jv=!1,this.Nm.style.width=t.width+"px",this.Nm.style.height=t.height+"px")}rw(){let t=W(this.zm);for(let i of(t.F_(t.W_()),t.F_(t.H_()),t.Ml()))if(t.Yn(i)){let e=i.Ft();null!==e&&t.F_(e),i.Ns()}for(let i of t.nu())i.Ns()}iv(){return this.tm.bitmapSize}sv(t,i,e,s){let h=this.iv();if(h.width>0&&h.height>0&&(t.drawImage(this.tm.canvasElement,i,e),s)){let s=this.im.canvasElement;null!==t&&t.drawImage(s,i,e)}}dm(t){if(0===t||null===this.zm)return;t>1&&this.rw(),null!==this.Cm&&this.Cm.dm(t),null!==this.ym&&this.ym.dm(t);let i={colorSpace:this.Ev.N().layout.colorSpace};if(1!==t){this.tm.applySuggestedBitmapSize();let t=k(this.tm,i);null!==t&&(t.useBitmapCoordinateSpace(t=>{this.pm(t)}),this.zm&&(this.hw(t,eg),this.aw(t),this.hw(t,ev),this.hw(t,ew)))}this.im.applySuggestedBitmapSize();let e=k(this.im,i);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:i})=>{t.clearRect(0,0,i.width,i.height)}),this.lw(e),this.hw(e,eb),this.hw(e,ew))}ow(){return this.Cm}_w(){return this.ym}wm(t,i){this.hw(t,i)}Om(){null!==this.zm&&this.zm.iu().u(this),this.zm=null}Zm(t){this.Gm(this.Rm,t)}Gm(t,i){let e=i.localX,s=i.localY;t.v()&&t.p(this.ts().Et().vc(e),{x:e,y:s},i)}pm({context:t,bitmapSize:i}){let{width:e,height:s}=i,h=this.ts(),r=h.$(),l=h.jd();r===l?tl(t,0,0,e,s,l):ta(t,0,0,e,s,r,l)}aw(t){let i=W(this.zm),e=i.su().cr().Tt(i);null!==e&&e.nt(t,!1)}lw(t){this.uw(t,ev,ec,this.ts().md())}hw(t,i){let e=W(this.zm),s=e.Dt(),h=e.nu();for(let e of h)this.uw(t,i,eu,e);for(let e of s)this.uw(t,i,eu,e);for(let e of h)this.uw(t,i,ec,e);for(let e of s)this.uw(t,i,ec,e)}uw(t,i,e,s){let h=W(this.zm),r=h.Qt().dd(),l=null!==r&&r.eu===s,n=null!==r&&l&&void 0!==r.ru?r.ru.Qn:void 0;ed(i,i=>e(i,t,l,n),s,h)}$m(){if(null===this.zm)return;let t=this.Ev,i=this.zm.W_().N().visible,e=this.zm.H_().N().visible;i||null===this.Cm||(this.Fm.removeChild(this.Cm.Qp()),this.Cm.m(),this.Cm=null),e||null===this.ym||(this.Wm.removeChild(this.ym.Qp()),this.ym.m(),this.ym=null);let s=t.Qt().zd();i&&null===this.Cm&&(this.Cm=new ep(this,t.N(),s,"left"),this.Fm.appendChild(this.Cm.Qp())),e&&null===this.ym&&(this.ym=new ep(this,t.N(),s,"right"),this.Wm.appendChild(this.ym.Qp()))}cw(t){return t.zp&&this.Vm||null!==this.Bm}Ym(t,i,e){t=Math.max(0,Math.min(t,this.Wv.width-1)),i=Math.max(0,Math.min(i,this.Wv.height-1)),this.ts().Bd(t,i,e,W(this.zm))}tw(){this.ts().Ad()}nw(){this.Em&&(this.Bm=null,this.tw())}Qm(t,i,e){this.Bm=t,this.Em=!1,this.Ym(i.x,i.y,e);let s=this.ts().md();this.Am={x:s.si(),y:s.ni()}}ts(){return this.Ev.Qt()}Jm(t){if(!this.Tm)return;let i=this.ts(),e=this._v();if(i.Z_(e,e.Ps()),this.Pm=null,this.Tm=!1,i.Dd(),null!==this.Lm){let t=performance.now(),e=i.Et();this.Lm.ce(e.Sc(),t),this.Lm.Vc(t)||i.fn(this.Lm)}}jm(){this.Bm=null}Km(){if(this.zm){if(this.ts().un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)W(document.activeElement).blur();else{let t=document.getSelection();null!==t&&t.removeAllRanges()}this.zm.Ps().Ki()||this.ts().Et().Ki()}}Xm(t){if(null===this.zm)return;let i=this.ts(),e=i.Et();if(e.Ki())return;let s=this.Ev.N(),h=s.handleScroll,r=s.kineticScroll;if((!h.pressedMouseMove||t.zp)&&(!h.horzTouchDrag&&!h.vertTouchDrag||!t.zp))return;let l=this.zm.Ps(),n=performance.now();if(null!==this.Pm||this.cw(t)||(this.Pm={x:t.clientX,y:t.clientY,_f:n,dw:t.localX,fw:t.localY}),null!==this.Pm&&!this.Tm&&(this.Pm.x!==t.clientX||this.Pm.y!==t.clientY)){if(t.zp&&r.touch||!t.zp&&r.mouse){let t=e.ol();this.Lm=new el(.2/t,7/t,.997,15/t),this.Lm.Tv(e.Sc(),this.Pm._f)}else this.Lm=null;l.Ki()||i.Y_(this.zm,l,t.localY),i.Td(t.localX),this.Tm=!0}this.Tm&&(l.Ki()||i.K_(this.zm,l,t.localY),i.Rd(t.localX),null!==this.Lm&&this.Lm.Tv(e.Sc(),n))}}class ey{constructor(t,i,e,h,r){this.xt=!0,this.Wv=s({width:0,height:0}),this.Yv=()=>this.dm(3),this.Gv="left"===t,this.ed=e.zd,this.ys=i,this.pw=h,this.mw=r,this.Gp=document.createElement("div"),this.Gp.style.width="25px",this.Gp.style.height="100%",this.Gp.style.overflow="hidden",this.tm=eo(this.Gp,s({width:16,height:16})),this.tm.subscribeSuggestedBitmapSizeChanged(this.Yv)}m(){this.tm.unsubscribeSuggestedBitmapSizeChanged(this.Yv),ea(this.tm.canvasElement),this.tm.dispose()}Qp(){return this.Gp}tv(){return this.Wv}_m(t){h(this.Wv,t)||(this.Wv=t,this.tm.resizeCanvasElement(t),this.Gp.style.width=`${t.width}px`,this.Gp.style.height=`${t.height}px`,this.xt=!0)}dm(t){if(t<3&&!this.xt||0===this.Wv.width||0===this.Wv.height)return;this.xt=!1,this.tm.applySuggestedBitmapSize();let i=k(this.tm,{colorSpace:this.ys.layout.colorSpace});null!==i&&i.useBitmapCoordinateSpace(t=>{this.pm(t),this.vm(t)})}iv(){return this.tm.bitmapSize}sv(t,i,e){let s=this.iv();s.width>0&&s.height>0&&t.drawImage(this.tm.canvasElement,i,e)}vm({context:t,bitmapSize:i,horizontalPixelRatio:e,verticalPixelRatio:s}){if(!this.pw())return;t.fillStyle=this.ys.timeScale.borderColor;let h=Math.floor(this.ed.N().S*e),r=Math.floor(this.ed.N().S*s),l=this.Gv?i.width-h:0;t.fillRect(l,0,h,r)}pm({context:t,bitmapSize:i}){tl(t,0,0,i.width,i.height,this.mw())}}function eS(t){return i=>i.ja?.(t)??[]}let ex=eS("normal"),e_=eS("top"),eC=eS("bottom");class ej{constructor(t,i){this.ww=null,this.gw=null,this.M=null,this.Mw=!1,this.Wv=s({width:0,height:0}),this.bw=new I,this.Uv=new tj(5),this.jv=!1,this.Yv=()=>{this.jv||this.Ev.Qt().ur()},this.Zv=()=>{this.jv||this.Ev.Qt().ur()},this.Ev=t,this._u=i,this.ys=t.N().layout,this.Dv=document.createElement("tr"),this.Sw=document.createElement("td"),this.Sw.style.padding="0",this.xw=document.createElement("td"),this.xw.style.padding="0",this.Gp=document.createElement("td"),this.Gp.style.height="25px",this.Gp.style.padding="0",this.Cw=document.createElement("div"),this.Cw.style.width="100%",this.Cw.style.height="100%",this.Cw.style.position="relative",this.Cw.style.overflow="hidden",this.Gp.appendChild(this.Cw),this.tm=eo(this.Cw,s({width:16,height:16})),this.tm.subscribeSuggestedBitmapSizeChanged(this.Yv);let e=this.tm.canvasElement;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.im=eo(this.Cw,s({width:16,height:16})),this.im.subscribeSuggestedBitmapSizeChanged(this.Zv);let h=this.im.canvasElement;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0",this.Dv.appendChild(this.Sw),this.Dv.appendChild(this.Gp),this.Dv.appendChild(this.xw),this.yw(),this.Ev.Qt().I_().i(this.yw.bind(this),this),this.Hp=new i7(this.im.canvasElement,this,{up:()=>!0,cp:()=>!this.Ev.N().handleScroll.horzTouchDrag})}m(){this.Hp.m(),null!==this.ww&&this.ww.m(),null!==this.gw&&this.gw.m(),this.im.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ea(this.im.canvasElement),this.im.dispose(),this.tm.unsubscribeSuggestedBitmapSizeChanged(this.Yv),ea(this.tm.canvasElement),this.tm.dispose()}Qp(){return this.Dv}kw(){return this.ww}Pw(){return this.gw}yp(t){if(this.Mw)return;this.Mw=!0;let i=this.Ev.Qt();!i.Et().Ki()&&this.Ev.N().handleScale.axisPressedMouseMove.time&&i.yd(t.localX)}xp(t){this.yp(t)}kp(){let t=this.Ev.Qt();!t.Et().Ki()&&this.Mw&&(this.Mw=!1,this.Ev.N().handleScale.axisPressedMouseMove.time&&t.Vd())}pp(t){let i=this.Ev.Qt();!i.Et().Ki()&&this.Ev.N().handleScale.axisPressedMouseMove.time&&i.Id(t.localX)}dp(t){this.pp(t)}gp(){this.Mw=!1;let t=this.Ev.Qt();t.Et().Ki()&&!this.Ev.N().handleScale.axisPressedMouseMove.time||t.Vd()}mp(){this.gp()}Qf(){this.Ev.N().handleScale.axisDoubleClickReset.time&&this.Ev.Qt().vn()}Zf(){this.Qf()}hp(){this.Ev.Qt().N().handleScale.axisPressedMouseMove.time&&this.Sm(1)}Ap(){this.Sm(0)}tv(){return this.Wv}Tw(){return this.bw}Rw(t,i,e){h(this.Wv,t)||(this.Wv=t,this.jv=!0,this.tm.resizeCanvasElement(t),this.im.resizeCanvasElement(t),this.jv=!1,this.Gp.style.width=`${t.width}px`,this.Gp.style.height=`${t.height}px`,this.bw.p(t)),null!==this.ww&&this.ww._m(s({width:i,height:t.height})),null!==this.gw&&this.gw._m(s({width:e,height:t.height}))}Dw(){let t=this.Iw();return Math.ceil(t.S+t.C+t.k+t.A+t.I+t.Vw)}kt(){this.Ev.Qt().Et().Dl()}iv(){return this.tm.bitmapSize}sv(t,i,e,s){let h=this.iv();if(h.width>0&&h.height>0&&(t.drawImage(this.tm.canvasElement,i,e),s)){let s=this.im.canvasElement;t.drawImage(s,i,e)}}dm(t){if(0===t)return;let i={colorSpace:this.ys.colorSpace};if(1!==t){this.tm.applySuggestedBitmapSize();let e=k(this.tm,i);null!==e&&(e.useBitmapCoordinateSpace(t=>{this.pm(t),this.vm(t),this.Bw(e,eC)}),this.gm(e),this.Bw(e,ex)),null!==this.ww&&this.ww.dm(t),null!==this.gw&&this.gw.dm(t)}this.im.applySuggestedBitmapSize();let e=k(this.im,i);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:i})=>{t.clearRect(0,0,i.width,i.height)}),this.Ew([...this.Ev.Qt().Js(),this.Ev.Qt().md()],e),this.Bw(e,e_))}Bw(t,i){let e=this.Ev.Qt().Js();for(let s of e)ed(i,i=>eu(i,t,!1,void 0),s,void 0);for(let s of e)ed(i,i=>ec(i,t,!1,void 0),s,void 0)}pm({context:t,bitmapSize:i}){tl(t,0,0,i.width,i.height,this.Ev.Qt().jd())}vm({context:t,bitmapSize:i,verticalPixelRatio:e}){if(this.Ev.N().timeScale.borderVisible){t.fillStyle=this.Aw();let s=Math.max(1,Math.floor(this.Iw().S*e));t.fillRect(0,0,i.width,s)}}gm(t){let i=this.Ev.Qt().Et(),e=i.Dl();if(!e||0===e.length)return;let s=this._u.maxTickMarkWeight(e),h=this.Iw(),r=i.N();r.borderVisible&&r.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:i,verticalPixelRatio:s})=>{t.strokeStyle=this.Aw(),t.fillStyle=this.Aw();let r=Math.max(1,Math.floor(i)),l=Math.floor(.5*i);t.beginPath();let n=Math.round(h.C*s);for(let s=e.length;s--;){let h=Math.round(e[s].coord*i);t.rect(h-l,0,r,n)}t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{let i=h.S+h.C+h.A+h.k/2;for(let h of(t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.H(),t.font=this.lm(),e))if(h.weight<s){let e=h.needAlignCoordinate?this.Lw(t,h.coord,h.label):h.coord;t.fillText(h.label,e,i)}for(let h of(this.Ev.N().timeScale.allowBoldLabels&&(t.font=this.zw()),e))if(h.weight>=s){let e=h.needAlignCoordinate?this.Lw(t,h.coord,h.label):h.coord;t.fillText(h.label,e,i)}})}Lw(t,i,e){let s=this.Uv.Ii(t,e),h=Math.floor(i-s/2)+.5;return h<0?i+=Math.abs(0-h):h+s>this.Wv.width&&(i-=Math.abs(this.Wv.width-(h+s))),i}Ew(t,i){let e=this.Iw();for(let s of t)for(let t of s.cs())t.Tt().nt(i,e)}Aw(){return this.Ev.N().timeScale.borderColor}H(){return this.ys.textColor}F(){return this.ys.fontSize}lm(){return U(this.F(),this.ys.fontFamily)}zw(){return U(this.F(),this.ys.fontFamily,"bold")}Iw(){null===this.M&&(this.M={S:1,L:NaN,A:NaN,I:NaN,Ji:NaN,C:5,k:NaN,P:"",Xi:new tj,Vw:0});let t=this.M,i=this.lm();if(t.P!==i){let e=this.F();t.k=e,t.P=i,t.A=3*e/12,t.I=3*e/12,t.Ji=9*e/12,t.L=0,t.Vw=4*e/12,t.Xi.Ln()}return this.M}Sm(t){this.Gp.style.cursor=1===t?"ew-resize":"default"}yw(){let t=this.Ev.Qt(),i=t.N();i.leftPriceScale.visible||null===this.ww||(this.Sw.removeChild(this.ww.Qp()),this.ww.m(),this.ww=null),i.rightPriceScale.visible||null===this.gw||(this.xw.removeChild(this.gw.Qp()),this.gw.m(),this.gw=null);let e={zd:this.Ev.Qt().zd()},s=()=>i.leftPriceScale.borderVisible&&t.Et().N().borderVisible,h=()=>t.jd();i.leftPriceScale.visible&&null===this.ww&&(this.ww=new ey("left",i,e,s,h),this.Sw.appendChild(this.ww.Qp())),i.rightPriceScale.visible&&null===this.gw&&(this.gw=new ey("right",i,e,s,h),this.xw.appendChild(this.gw.Qp()))}}let eE=!!i6&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!i6&&(navigator?.userAgentData?.platform?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);class ez{constructor(t,i,e){var s;this.Ow=[],this.Nw=[],this.Fw=0,this.so=0,this.M_=0,this.Ww=0,this.Hw=0,this.Uw=null,this.$w=!1,this.Rm=new I,this.Dm=new I,this.td=new I,this.qw=null,this.jw=null,this.Bv=t,this.ys=i,this._u=e,this.Dv=document.createElement("div"),this.Dv.classList.add("tv-lightweight-charts"),this.Dv.style.overflow="hidden",this.Dv.style.direction="ltr",this.Dv.style.width="100%",this.Dv.style.height="100%",(s=this.Dv).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.Yw=document.createElement("table"),this.Yw.setAttribute("cellspacing","0"),this.Dv.appendChild(this.Yw),this.Kw=this.Zw.bind(this),ek(this.ys)&&this.Gw(!0),this.ts=new iV(this.nd.bind(this),this.ys,e),this.Qt().wd().i(this.Xw.bind(this),this),this.Jw=new ej(this,this._u),this.Yw.appendChild(this.Jw.Qp());let h=i.autoSize&&this.Qw(),r=this.ys.width,l=this.ys.height;if(h||0===r||0===l){let i=t.getBoundingClientRect();r=r||i.width,l=l||i.height}this.tg(r,l),this.ig(),t.appendChild(this.Dv),this.sg(),this.ts.Et().Lc().i(this.ts.Sa.bind(this.ts),this),this.ts.I_().i(this.ts.Sa.bind(this.ts),this)}Qt(){return this.ts}N(){return this.ys}Yp(){return this.Ow}ng(){return this.Jw}m(){for(let t of(this.Gw(!1),0!==this.Fw&&window.cancelAnimationFrame(this.Fw),this.ts.wd().u(this),this.ts.Et().Lc().u(this),this.ts.I_().u(this),this.ts.m(),this.Ow))this.Yw.removeChild(t.Qp()),t.iw().u(this),t.sw().u(this),t.m();for(let t of(this.Ow=[],this.Nw))this.eg(t);this.Nw=[],W(this.Jw).m(),null!==this.Dv.parentElement&&this.Dv.parentElement.removeChild(this.Dv),this.td.m(),this.Rm.m(),this.Dm.m(),this.rg()}tg(t,i,e=!1){if(this.so===i&&this.M_===t)return;let h=function(t){let i=Math.floor(t.width),e=Math.floor(t.height);return s({width:i-i%2,height:e-e%2})}(s({width:t,height:i}));this.so=h.height,this.M_=h.width;let r=this.so+"px",l=this.M_+"px";W(this.Dv).style.height=r,W(this.Dv).style.width=l,this.Yw.style.height=r,this.Yw.style.width=l,e?this.hg(tb.xn(),performance.now()):this.ts.Sa()}dm(t){void 0===t&&(t=tb.xn());for(let i=0;i<this.Ow.length;i++)this.Ow[i].dm(t.ln(i).rn);this.ys.timeScale.visible&&this.Jw.dm(t.an())}_r(t){let i=ek(this.ys);this.ts._r(t);let e=ek(this.ys);e!==i&&this.Gw(e),t.layout?.panes&&this.ag(),this.sg(),this.lg(t)}iw(){return this.Rm}sw(){return this.Dm}wd(){return this.td}og(t=!1){null!==this.Uw&&(this.hg(this.Uw,performance.now()),this.Uw=null);let i=this._g(null),e=document.createElement("canvas");e.width=i.width,e.height=i.height;let s=W(e.getContext("2d"));return this._g(s,t),e}ug(t){return("left"!==t||this.cg())&&("right"!==t||this.dg())&&0!==this.Ow.length?W("left"===t?this.Ow[0].ow():this.Ow[0]._w()).um():0}fg(){return this.ys.autoSize&&null!==this.qw}ev(){return this.Dv}pg(t){this.jw=t,this.jw?this.ev().style.setProperty("cursor",t):this.ev().style.removeProperty("cursor")}vg(){return this.jw}mg(t){return P(this.Ow[t]).tv()}ag(){this.Nw.forEach(t=>{t.kt()})}lg(t){(void 0!==t.autoSize||!this.qw||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.qw&&this.Qw(),!1===t.autoSize&&null!==this.qw&&this.rg(),t.autoSize||void 0===t.width&&void 0===t.height||this.tg(t.width||this.M_,t.height||this.so))}_g(t,i){let e=0,h=0,r=this.Ow[0],l=(e,s)=>{let h=0;for(let r=0;r<this.Ow.length;r++){let l=this.Ow[r],n=W("left"===e?l.ow():l._w()),o=n.iv();if(null!==t&&n.sv(t,s,h,i),h+=o.height,r<this.Ow.length-1){let i=this.Nw[r],e=i.iv();null!==t&&i.sv(t,s,h),h+=e.height}}};this.cg()&&(l("left",0),e+=W(r.ow()).iv().width);for(let s=0;s<this.Ow.length;s++){let r=this.Ow[s],l=r.iv();if(null!==t&&r.sv(t,e,h,i),h+=l.height,s<this.Ow.length-1){let i=this.Nw[s],r=i.iv();null!==t&&i.sv(t,e,h),h+=r.height}}e+=r.iv().width,this.dg()&&(l("right",e),e+=W(r._w()).iv().width);let n=(i,e,s)=>{W("left"===i?this.Jw.kw():this.Jw.Pw()).sv(W(t),e,s)};if(this.ys.timeScale.visible){let e=this.Jw.iv();if(null!==t){let s=0;this.cg()&&(n("left",s,h),s=W(r.ow()).iv().width),this.Jw.sv(t,s,h,i),s+=e.width,this.dg()&&n("right",s,h)}h+=e.height}return s({width:e,height:h})}wg(){var t,i,e;let h=0,r=0,l=0;for(let t of this.Ow)this.cg()&&(r=Math.max(r,W(t.ow()).am(),this.ys.leftPriceScale.minimumWidth)),this.dg()&&(l=Math.max(l,W(t._w()).am(),this.ys.rightPriceScale.minimumWidth)),h+=t.V_();r=(i=r)+i%2,l=(e=l)+e%2;let n=this.M_,o=this.so,a=Math.max(n-r-l,0),u=1*this.Nw.length,c=this.ys.timeScale.visible,d=c?Math.max(this.Jw.Dw(),this.ys.timeScale.minimumHeight):0,f=u+(d=(t=d)+t%2),m=o<f?0:o-f,p=m/h,g=0,v=window.devicePixelRatio||1;for(let t=0;t<this.Ow.length;++t){let i=this.Ow[t];i.Um(this.ts.Zs()[t]);let e=0,h=0;e=Math.max(t===this.Ow.length-1?Math.ceil((m-g)*v)/v:Math.round(i.V_()*p*v)/v,2),g+=e,i._m(s({width:a,height:e})),this.cg()&&i.ew(r,"left"),this.dg()&&i.ew(l,"right"),i._v()&&this.ts.gd(i._v(),e)}this.Jw.Rw(s({width:c?a:0,height:d}),c?r:0,c?l:0),this.ts.E_(a),this.Ww!==r&&(this.Ww=r),this.Hw!==l&&(this.Hw=l)}Gw(t){t?this.Dv.addEventListener("wheel",this.Kw,{passive:!1}):this.Dv.removeEventListener("wheel",this.Kw)}gg(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return eE?1/window.devicePixelRatio:1}Zw(t){if(!(0!==t.deltaX&&this.ys.handleScroll.mouseWheel||0!==t.deltaY&&this.ys.handleScale.mouseWheel))return;let i=this.gg(t),e=i*t.deltaX/100,s=-i*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==s&&this.ys.handleScale.mouseWheel){let i=Math.sign(s)*Math.min(1,Math.abs(s)),e=t.clientX-this.Dv.getBoundingClientRect().left;this.Qt().kd(e,i)}0!==e&&this.ys.handleScroll.mouseWheel&&this.Qt().Pd(-80*e)}hg(t,i){let e=t.an();3===e&&this.Mg(),3!==e&&2!==e||(this.bg(t),this.Sg(t,i),this.Jw.kt(),this.Ow.forEach(t=>{t.qm()}),3===this.Uw?.an()&&(this.Uw.Mn(t),this.Mg(),this.bg(this.Uw),this.Sg(this.Uw,i),t=this.Uw,this.Uw=null)),this.dm(t)}Sg(t,i){for(let e of t.gn())this.bn(e,i)}bg(t){let i=this.ts.Zs();for(let e=0;e<i.length;e++)t.ln(e).hn&&i[e].J_()}bn(t,i){let e=this.ts.Et();switch(t.cn){case 0:e.Oc();break;case 1:e.Nc(t.Wt);break;case 2:e.mn(t.Wt);break;case 3:e.wn(t.Wt);break;case 4:e.yc();break;case 5:t.Wt.Vc(i)||e.wn(t.Wt.Bc(i))}}nd(t){null!==this.Uw?this.Uw.Mn(t):this.Uw=t,this.$w||(this.$w=!0,this.Fw=window.requestAnimationFrame(t=>{if(this.$w=!1,this.Fw=0,null!==this.Uw){let i=this.Uw;for(let e of(this.Uw=null,this.hg(i,t),i.gn()))if(5===e.cn&&!e.Wt.Vc(t)){this.Qt().fn(e.Wt);break}}}))}Mg(){this.ig()}eg(t){this.Yw.removeChild(t.Qp()),t.m()}ig(){let t=this.ts.Zs(),i=t.length,e=this.Ow.length;for(let t=i;t<e;t++){let t=P(this.Ow.pop());this.Yw.removeChild(t.Qp()),t.iw().u(this),t.sw().u(this),t.m();let i=this.Nw.pop();void 0!==i&&this.eg(i)}for(let s=e;s<i;s++){let i=new eM(this,t[s]);if(i.iw().i(this.xg.bind(this,i),this),i.sw().i(this.Cg.bind(this,i),this),this.Ow.push(i),s>0){let t=new eh(this,s-1,s);this.Nw.push(t),this.Yw.insertBefore(t.Qp(),this.Jw.Qp())}this.Yw.insertBefore(i.Qp(),this.Jw.Qp())}for(let e=0;e<i;e++){let i=t[e],s=this.Ow[e];s._v()!==i?s.Um(i):s.Hm()}this.sg(),this.wg()}yg(t,i,e,s){let h;let r=new Map;if(null!==t&&this.ts.Js().forEach(i=>{let e=i.Us().Hs(t);null!==e&&r.set(i,e)}),null!==t){let i=this.ts.Et().ss(t)?.originalTime;void 0!==i&&(h=i)}let l=this.Qt().dd(),n=null!==l&&l.eu instanceof ir?l.eu:void 0,o=null!==l&&void 0!==l.ru?l.ru.Jn:void 0,a=this.kg(s);return{Kr:h,$s:t??void 0,Pg:i??void 0,Tg:-1!==a?a:void 0,Rg:n,Dg:r,Ig:o,Vg:e??void 0}}kg(t){let i=-1;if(t)i=this.Ow.indexOf(t);else{let t=this.Qt().md().Ks();null!==t&&(i=this.Qt().Zs().indexOf(t))}return i}xg(t,i,e,s){this.Rm.p(()=>this.yg(i,e,s,t))}Cg(t,i,e,s){this.Dm.p(()=>this.yg(i,e,s,t))}Xw(t,i,e){this.pg(this.Qt().dd()?.au??null),this.td.p(()=>this.yg(t,i,e))}sg(){let t=this.ys.timeScale.visible?"":"none";this.Jw.Qp().style.display=t}cg(){return this.Ow[0]._v().W_().N().visible}dg(){return this.Ow[0]._v().H_().N().visible}Qw(){return"ResizeObserver"in window&&(this.qw=new ResizeObserver(t=>{let i=t[t.length-1];i&&this.tg(i.contentRect.width,i.contentRect.height)}),this.qw.observe(this.Bv,{box:"border-box"}),!0)}rg(){null!==this.qw&&this.qw.disconnect(),this.qw=null}}function ek(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function eN(t){return void 0===t.open&&void 0===t.value}function eR(t){return void 0!==t.open||void 0!==t.value}function eB(t,i,e,s){let h=e.value,r={$s:i,wt:t,Wt:[h,h,h,h],Kr:s};return void 0!==e.color&&(r.R=e.color),r}function eT(t,i,e,s){let h=e.value,r={$s:i,wt:t,Wt:[h,h,h,h],Kr:s};return void 0!==e.lineColor&&(r.vt=e.lineColor),void 0!==e.topColor&&(r.sh=e.topColor),void 0!==e.bottomColor&&(r.nh=e.bottomColor),r}function eP(t,i,e,s){let h=e.value,r={$s:i,wt:t,Wt:[h,h,h,h],Kr:s};return void 0!==e.topLineColor&&(r.eh=e.topLineColor),void 0!==e.bottomLineColor&&(r.rh=e.bottomLineColor),void 0!==e.topFillColor1&&(r.hh=e.topFillColor1),void 0!==e.topFillColor2&&(r.ah=e.topFillColor2),void 0!==e.bottomFillColor1&&(r.oh=e.bottomFillColor1),void 0!==e.bottomFillColor2&&(r._h=e.bottomFillColor2),r}function eW(t,i,e,s){let h={$s:i,wt:t,Wt:[e.open,e.high,e.low,e.close],Kr:s};return void 0!==e.color&&(h.R=e.color),h}function eL(t,i,e,s){let h={$s:i,wt:t,Wt:[e.open,e.high,e.low,e.close],Kr:s};return void 0!==e.color&&(h.R=e.color),void 0!==e.borderColor&&(h.Ht=e.borderColor),void 0!==e.wickColor&&(h.ih=e.wickColor),h}function eI(t,i,e,s,h){let r=P(h)(e),l=Math.max(...r),n=Math.min(...r),o=r[r.length-1],{time:a,color:u,...c}=e;return{$s:i,wt:t,Wt:[o,l,n,o],Kr:s,he:c,R:u}}function eF(t){return void 0!==t.Wt}function eO(t,i){return void 0!==i.customValues&&(t.Bg=i.customValues),t}function eD(t){return(i,e,s,h,r,l)=>(l?l(s):eN(s))?eO({wt:i,$s:e,Kr:h},s):eO(t(i,e,s,h,r),s)}function eV(t){return({Candlestick:eD(eL),Bar:eD(eW),Area:eD(eT),Baseline:eD(eP),Histogram:eD(eB),Line:eD(eB),Custom:eD(eI)})[t]}function eG(t){return{$s:0,Eg:new Map,Va:t}}function e$(t,i){if(void 0!==t&&0!==t.length)return{Ag:i.key(t[0].wt),Lg:i.key(t[t.length-1].wt)}}function eH(t){let i;return t.forEach(t=>{void 0===i&&(i=t.Kr)}),P(i)}class eA{constructor(t){this.zg=new Map,this.Og=new Map,this.Ng=new Map,this.Fg=[],this._u=t}m(){this.zg.clear(),this.Og.clear(),this.Ng.clear(),this.Fg=[]}Wg(t,i){let e=0!==this.zg.size,s=!1,h=this.Og.get(t);if(void 0!==h){if(1===this.Og.size)e=!1,s=!0,this.zg.clear();else for(let i of this.Fg)i.pointData.Eg.delete(t)&&(s=!0)}let r=[];if(0!==i.length){let e=i.map(t=>t.time),h=this._u.createConverterToInternalObj(i),l=eV(t.ph()),n=t.nl(),o=t.el();r=i.map((i,r)=>{let a=h(i.time),u=this._u.key(a),c=this.zg.get(u);void 0===c&&(c=eG(a),this.zg.set(u,c),s=!0);let d=l(a,c.$s,i,e[r],n,o);return c.Eg.set(t,d),d})}e&&this.Hg(),this.Ug(t,r);let l=-1;if(s){let t=[];this.zg.forEach(i=>{t.push({timeWeight:0,time:i.Va,pointData:i,originalTime:eH(i.Eg)})}),t.sort((t,i)=>this._u.key(t.time)-this._u.key(i.time)),l=this.$g(t)}return this.qg(t,l,function(t,i,e){let s=e$(t,e),h=e$(i,e);if(void 0!==s&&void 0!==h)return{jg:!1,ka:s.Lg>=h.Lg&&s.Ag>=h.Ag}}(this.Og.get(t),h,this._u))}Fd(t){return this.Wg(t,[])}Yg(t,i,e){if(e&&t.Ea())throw Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");void 0===i.Kr&&(i.Kr=i.time),this._u.preprocessData(i);let s=this._u.createConverterToInternalObj([i])(i.time),h=this.Ng.get(t);if(!e&&void 0!==h&&this._u.key(s)<this._u.key(h))throw Error(`Cannot update oldest data, last time=${h}, new time=${s}`);let r=this.zg.get(this._u.key(s));if(e&&void 0===r)throw Error("Cannot update non-existing data point when historicalUpdate is true");let l=void 0===r;void 0===r&&(r=eG(s),this.zg.set(this._u.key(s),r));let n=eV(t.ph()),o=t.nl(),a=t.el(),u=n(s,r.$s,i,i.Kr,o,a),c=!e&&!l&&void 0!==h&&this._u.key(s)===this._u.key(h);r.Eg.set(t,u),e?this.Kg(t,u,r.$s):(c&&t.Ea()&&eF(u)&&t.Cr(u),this.Zg(t,u));let d={ka:eF(u),jg:e};if(!l)return this.qg(t,-1,d);let f={timeWeight:0,time:r.Va,pointData:r,originalTime:eH(r.Eg)},m=tK(this.Fg,this._u.key(f.time),(t,i)=>this._u.key(t.time)<i);this.Fg.splice(m,0,f);for(let t=m;t<this.Fg.length;++t)eQ(this.Fg[t].pointData,t);return this._u.fillWeightsForPoints(this.Fg,m),this.qg(t,m,d)}Gg(t,i){let e=this.Og.get(t);if(void 0===e||i<=0)return[[],this.Xg()];i=Math.min(i,e.length);let s=e.splice(-i).reverse();for(let i of(0===e.length?this.Ng.delete(t):this.Ng.set(t,e[e.length-1].wt),s)){let e=this.zg.get(this._u.key(i.wt));if(e&&(e.Eg.delete(t),0===e.Eg.size)){this.zg.delete(this._u.key(e.Va)),this.Fg.splice(e.$s,1);for(let t=e.$s;t<this.Fg.length;++t)eQ(this.Fg[t].pointData,t)}}return[s,this.qg(t,this.Fg.length-1,{jg:!1,ka:!1})]}Zg(t,i){let e=this.Og.get(t);void 0===e&&(e=[],this.Og.set(t,e));let s=0!==e.length?e[e.length-1]:null;null===s||this._u.key(i.wt)>this._u.key(s.wt)?eF(i)&&e.push(i):eF(i)?e[e.length-1]=i:e.splice(-1,1),this.Ng.set(t,i.wt)}Kg(t,i,e){let s=this.Og.get(t);if(void 0===s)return;let h=tK(s,e,(t,i)=>t.$s<i);eF(i)?s[h]=i:s.splice(h,1)}Ug(t,i){0!==i.length?(this.Og.set(t,i.filter(eF)),this.Ng.set(t,i[i.length-1].wt)):(this.Og.delete(t),this.Ng.delete(t))}Hg(){for(let t of this.Fg)0===t.pointData.Eg.size&&this.zg.delete(this._u.key(t.time))}$g(t){let i=-1;for(let e=0;e<this.Fg.length&&e<t.length;++e){let s=this.Fg[e],h=t[e];if(this._u.key(s.time)!==this._u.key(h.time)){i=e;break}h.timeWeight=s.timeWeight,eQ(h.pointData,e)}if(-1===i&&this.Fg.length!==t.length&&(i=Math.min(this.Fg.length,t.length)),-1===i)return -1;for(let e=i;e<t.length;++e)eQ(t[e].pointData,e);return this._u.fillWeightsForPoints(t,i),this.Fg=t,i}Jg(){if(0===this.Og.size)return null;let t=0;return this.Og.forEach(i=>{0!==i.length&&(t=Math.max(t,i[i.length-1].$s))}),t}qg(t,i,e){let s=this.Xg();if(-1!==i)this.Og.forEach((i,h)=>{s.O_.set(h,{he:i,Qg:h===t?e:void 0})}),this.Og.has(t)||s.O_.set(t,{he:[],Qg:e}),s.Et.tM=this.Fg,s.Et.iM=i;else{let i=this.Og.get(t);s.O_.set(t,{he:i||[],Qg:e})}return s}Xg(){return{O_:new Map,Et:{dc:this.Jg()}}}}function eQ(t,i){t.$s=i,t.Eg.forEach(t=>{t.$s=i})}function eU(t,i){return t.wt<i}function eq(t,i){return i<t.wt}function eK(t,i,e){let s=i.Ba(),h=i.bi(),r=tK(t,s,eU),l=tY(t,h,eq);if(!e)return{from:r,to:l};let n=r,o=l;return r>0&&r<t.length&&t[r].wt>=s&&(n=r-1),l>0&&l<t.length&&t[l-1].wt<=h&&(o=l+1),{from:n,to:o}}class eY{constructor(t,i,e){this.sM=!0,this.nM=!0,this.eM=!0,this.rM=[],this.hM=null,this.aM=-1,this.se=t,this.ne=i,this.lM=e}kt(t){this.sM=!0,"data"===t&&(this.nM=!0),"options"===t&&(this.eM=!0)}Tt(){return this.se.It()?(this.oM(),null===this.hM?null:this._M):null}uM(){this.rM=this.rM.map(t=>({...t,...this.se.ma().mh(t.wt)}))}cM(){this.hM=null}oM(){let t=this.ne.Et(),i=t.N().enableConflation?t.Fc():0;i!==this.aM&&(this.nM=!0,this.aM=i),this.nM&&(this.dM(),this.nM=!1),this.eM&&(this.uM(),this.eM=!1),this.sM&&(this.fM(),this.sM=!1)}fM(){let t=this.se.Ft(),i=this.ne.Et();if(this.cM(),i.Ki()||t.Ki())return;let e=i.Re();if(null===e||0===this.se.Us().xh())return;let s=this.se.Lt();null!==s&&(this.hM=eK(this.rM,e,this.lM),this.pM(t,i,s.Wt),this.vM())}}class eZ{constructor(t,i){this.mM=t,this.ji=i}nt(t,i,e){this.mM.draw(t,this.ji,i,e)}}class eJ extends eY{constructor(t,i,e){super(t,i,!1),this.Hh=e,this._M=new eZ(this.Hh.renderer(),i=>{let e=t.Lt();return null===e?null:t.Ft().Nt(i,e.Wt)})}get pa(){return this.Hh.conflationReducer}La(t){return this.Hh.priceValueBuilder(t)}rl(t){return this.Hh.isWhitespace(t)}dM(){let t=this.se.ma();this.rM=this.se.za().Th().map(i=>({wt:i.$s,_t:NaN,...t.mh(i.$s),wM:i.he}))}pM(t,i){i.fc(this.rM,A(this.hM))}vM(){this.Hh.update({bars:this.rM.map(eX),barSpacing:this.ne.Et().ol(),visibleRange:this.hM,conflationFactor:this.ne.Et().Fc()},this.se.N())}}function eX(t){return{x:t._t,time:t.wt,originalData:t.wM,barColor:t.Jr}}let e0={color:"#2196f3"},e1=(t,i,e)=>new eJ(t,i,L(e));function e2(t){let i={value:t.Wt[3],time:t.Kr};return void 0!==t.Bg&&(i.customValues=t.Bg),i}function e9(t){let i=e2(t);return void 0!==t.R&&(i.color=t.R),i}function e5(t){let i=e2(t);return void 0!==t.vt&&(i.lineColor=t.vt),void 0!==t.sh&&(i.topColor=t.sh),void 0!==t.nh&&(i.bottomColor=t.nh),i}function e6(t){let i=e2(t);return void 0!==t.eh&&(i.topLineColor=t.eh),void 0!==t.rh&&(i.bottomLineColor=t.rh),void 0!==t.hh&&(i.topFillColor1=t.hh),void 0!==t.ah&&(i.topFillColor2=t.ah),void 0!==t.oh&&(i.bottomFillColor1=t.oh),void 0!==t._h&&(i.bottomFillColor2=t._h),i}function e3(t){let i={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.Kr};return void 0!==t.Bg&&(i.customValues=t.Bg),i}function e4(t){let i=e3(t);return void 0!==t.R&&(i.color=t.R),i}function e7(t){let i=e3(t),{R:e,Ht:s,ih:h}=t;return void 0!==e&&(i.color=e),void 0!==s&&(i.borderColor=s),void 0!==h&&(i.wickColor=h),i}function e8(t){return({Area:e5,Line:e9,Baseline:e6,Histogram:e9,Bar:e4,Candlestick:e7,Custom:st})[t]}function st(t){let i=t.Kr;return{...t.he,time:i}}let si={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},se={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},ss={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Q,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},sh={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},sr={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function sl(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:ss,crosshair:si,grid:se,overlayPriceScales:{...sh},leftPriceScale:{...sh,visible:!1},rightPriceScale:{...sh,visible:!0},timeScale:sr,localization:{locale:i6?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class sn{constructor(t,i,e){this.qp=t,this.gM=i,this.MM=e??0}applyOptions(t){this.qp.Qt().pd(this.gM,t,this.MM)}options(){return this.ji().N()}width(){return tw(this.gM)?this.qp.ug(this.gM):0}setVisibleRange(t){this.setAutoScale(!1),this.ji().Ho(new tF(t.from,t.to))}getVisibleRange(){let t,i,e=this.ji().sr();if(null===e)return null;if(this.ji().Jl()){let s=this.ji().p_(),h=iG(s);t=Number((Math.round((e=iS(e,this.ji().io())).Ye()/s)*s).toFixed(h)),i=Number((Math.round(e.Ke()/s)*s).toFixed(h))}else t=e.Ye(),i=e.Ke();return{from:t,to:i}}setAutoScale(t){this.applyOptions({autoScale:t})}ji(){return W(this.qp.Qt().vd(this.gM,this.MM)).Ft}}class so{constructor(t,i,e,s){this.qp=t,this.yt=e,this.bM=i,this.SM=s}getHeight(){return this.yt.$t()}setHeight(t){let i=this.qp.Qt(),e=i.Kd(this.yt);i.bd(e,t)}getStretchFactor(){return this.yt.V_()}setStretchFactor(t){this.yt.B_(t),this.qp.Qt().Sa()}paneIndex(){return this.qp.Qt().Kd(this.yt)}moveTo(t){let i=this.paneIndex();i!==t&&(T(t>=0&&t<this.qp.Yp().length,"Invalid pane index"),this.qp.Qt().xd(i,t))}getSeries(){return this.yt.O_().map(t=>this.bM(t))??[]}getHTMLElement(){let t=this.qp.Yp();return t&&0!==t.length&&t[this.paneIndex()]?t[this.paneIndex()].Qp():null}attachPrimitive(t){this.yt.il(t),t.attached&&t.attached({chart:this.SM,requestUpdate:()=>this.yt.Qt().Sa()})}detachPrimitive(t){this.yt.sl(t)}priceScale(t){if(null===this.yt.D_(t))throw Error(`Cannot find price scale with id: ${t}`);return new sn(this.qp,t,this.paneIndex())}setPreserveEmptyPane(t){this.yt.L_(t)}preserveEmptyPane(){return this.yt.z_()}addCustomSeries(t,i={},e=0){return this.SM.addCustomSeries(t,i,e)}addSeries(t,i={}){return this.SM.addSeries(t,i,this.paneIndex())}}let sa={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class su{constructor(t){this.er=t}applyOptions(t){this.er._r(t)}options(){return this.er.N()}xM(){return this.er}}class sc{constructor(t,i,e,s,h,r){this.CM=new I,this.se=t,this.yM=i,this.kM=e,this._u=h,this.SM=s,this.PM=r}m(){this.CM.m()}priceFormatter(){return this.se.Za()}priceToCoordinate(t){let i=this.se.Lt();return null===i?null:this.se.Ft().Nt(t,i.Wt)}coordinateToPrice(t){let i=this.se.Lt();return null===i?null:this.se.Ft().Ts(t,i.Wt)}barsInLogicalRange(t){if(null===t)return null;let i=new iF(new iW(t.from,t.to)).Pu(),e=this.se.Us();if(e.Ki())return null;let s=e.Hs(i.Ba(),1),h=e.Hs(i.bi(),-1),r=W(e.Ch()),l=W(e.Qs());if(null!==s&&null!==h&&s.$s>h.$s)return{barsBefore:t.from-r,barsAfter:l-t.to};let n={barsBefore:null===s||s.$s===r?t.from-r:s.$s-r,barsAfter:null===h||h.$s===l?l-t.to:l-h.$s};return null!==s&&null!==h&&(n.from=s.Kr,n.to=h.Kr),n}setData(t){this._u,this.se.ph(),this.yM.TM(this.se,t),this.RM("full")}update(t,i=!1){this.se.ph(),this.yM.DM(this.se,t,i),this.RM("update")}pop(t=1){let i=this.yM.IM(this.se,t);0!==i.length&&this.RM("update");let e=e8(this.seriesType());return i.map(t=>e(t))}dataByIndex(t,i){let e=this.se.Us().Hs(t,i);return null===e?null:e8(this.seriesType())(e)}data(){let t=e8(this.seriesType());return this.se.Us().Th().map(i=>t(i))}subscribeDataChanged(t){this.CM.i(t)}unsubscribeDataChanged(t){this.CM._(t)}applyOptions(t){this.se._r(t)}options(){return $(this.se.N())}priceScale(){return this.kM.priceScale(this.se.Ft().al(),this.getPane().paneIndex())}createPriceLine(t){let i=F($(sa),t);return new su(this.se.Ta(i))}removePriceLine(t){this.se.Ra(t.xM())}priceLines(){return this.se.Da().map(t=>new su(t))}seriesType(){return this.se.ph()}lastValueData(t){let i=this.se.De(t);return i.Ie?{noData:!0}:{noData:!1,price:i.gt,color:i.R}}attachPrimitive(t){this.se.il(t),t.attached&&t.attached({chart:this.SM,series:this,requestUpdate:()=>this.se.Qt().Sa(),horzScaleBehavior:this._u})}detachPrimitive(t){this.se.sl(t),t.detached&&t.detached(),this.se.Qt().Sa()}getPane(){let t=this.se,i=W(this.se.Qt().jn(t));return this.PM(i)}moveToPane(t){this.se.Qt().$d(this.se,t)}seriesOrder(){let t=this.se.Qt().jn(this.se);return null===t?-1:t.O_().indexOf(this.se)}setSeriesOrder(t){let i=this.se.Qt().jn(this.se);null!==i&&i.tu(this.se,t)}RM(t){this.CM.v()&&this.CM.p(t)}}class sd{constructor(t,i,e){this.VM=new I,this.zu=new I,this.bw=new I,this.ts=t,this.Gh=t.Et(),this.Jw=i,this.Gh.Ec().i(this.BM.bind(this)),this.Gh.Ac().i(this.EM.bind(this)),this.Jw.Tw().i(this.AM.bind(this)),this._u=e}m(){this.Gh.Ec().u(this),this.Gh.Ac().u(this),this.Jw.Tw().u(this),this.VM.m(),this.zu.m(),this.bw.m()}scrollPosition(){return this.Gh.Sc()}scrollToPosition(t,i){i?this.Gh.Ic(t,1e3):this.ts.wn(t)}scrollToRealTime(){this.Gh.Dc()}getVisibleRange(){let t=this.Gh.hc();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){let i={from:this._u.convertHorzItemToInternal(t.from),to:this._u.convertHorzItemToInternal(t.to)},e=this.Gh._c(i);this.ts.Hd(e)}getVisibleLogicalRange(){let t=this.Gh.rc();return null===t?null:{from:t.Ba(),to:t.bi()}}setVisibleLogicalRange(t){T(t.from<=t.to,"The from index cannot be after the to index."),this.ts.Hd(t)}resetTimeScale(){this.ts.vn()}fitContent(){this.ts.Oc()}logicalToCoordinate(t){let i=this.ts.Et();return i.Ki()?null:i.qt(t)}coordinateToLogical(t){return this.Gh.Ki()?null:this.Gh.vc(t)}timeToIndex(t,i){let e=this._u.convertHorzItemToInternal(t);return this.Gh.sc(e,i)}timeToCoordinate(t){let i=this.timeToIndex(t,!1);return null===i?null:this.Gh.qt(i)}coordinateToTime(t){let i=this.ts.Et(),e=i.vc(t),s=i.ss(e);return null===s?null:s.originalTime}width(){return this.Jw.tv().width}height(){return this.Jw.tv().height}subscribeVisibleTimeRangeChange(t){this.VM.i(t)}unsubscribeVisibleTimeRangeChange(t){this.VM._(t)}subscribeVisibleLogicalRangeChange(t){this.zu.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.zu._(t)}subscribeSizeChange(t){this.bw.i(t)}unsubscribeSizeChange(t){this.bw._(t)}applyOptions(t){this.Gh._r(t)}options(){return{...$(this.Gh.N()),barSpacing:this.Gh.ol()}}BM(){this.VM.v()&&this.VM.p(this.getVisibleRange())}EM(){this.zu.v()&&this.zu.p(this.getVisibleLogicalRange())}AM(t){this.bw.p(t.width,t.height)}}function sf(t){return function(t){if(G(t.handleScale)){let i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale){let{axisPressedMouseMove:i,axisDoubleClickReset:e}=t.handleScale;G(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),G(e)&&(t.handleScale.axisDoubleClickReset={time:e,price:e})}let i=t.handleScroll;G(i)&&(t.handleScroll={horzTouchDrag:i,vertTouchDrag:i,mouseWheel:i,pressedMouseMove:i})}(t),t}class sm{constructor(t,i,e){this.LM=new Map,this.zM=new Map,this.OM=new I,this.NM=new I,this.FM=new I,this.Zc=new WeakMap,this.WM=new eA(i);let s=void 0===e?$(sl()):F($(sl()),sf(e));this.HM=i,this.qp=new ez(t,s,i),this.qp.iw().i(t=>{this.OM.v()&&this.OM.p(this.UM(t()))},this),this.qp.sw().i(t=>{this.NM.v()&&this.NM.p(this.UM(t()))},this),this.qp.wd().i(t=>{this.FM.v()&&this.FM.p(this.UM(t()))},this);let h=this.qp.Qt();this.$M=new sd(h,this.qp.ng(),this.HM)}remove(){this.qp.iw().u(this),this.qp.sw().u(this),this.qp.wd().u(this),this.$M.m(),this.qp.m(),this.LM.clear(),this.zM.clear(),this.OM.m(),this.NM.m(),this.FM.m(),this.WM.m()}resize(t,i,e){this.autoSizeActive()||this.qp.tg(t,i,e)}addCustomSeries(t,i={},e=0){let s;let h=(s=L(t),{type:"Custom",isBuiltIn:!1,defaultOptions:{...e0,...s.defaultOptions()},qM:e1,jM:s});return this.YM(h,i,e)}addSeries(t,i={},e=0){return this.YM(t,i,e)}removeSeries(t){let i=P(this.LM.get(t)),e=this.WM.Fd(i);this.qp.Qt().Fd(i),this.KM(e),this.LM.delete(t),this.zM.delete(i)}TM(t,i){this.KM(this.WM.Wg(t,i))}DM(t,i,e){this.KM(this.WM.Yg(t,i,e))}IM(t,i){let[e,s]=this.WM.Gg(t,i);return 0!==e.length&&this.KM(s),e}subscribeClick(t){this.OM.i(t)}unsubscribeClick(t){this.OM._(t)}subscribeCrosshairMove(t){this.FM.i(t)}unsubscribeCrosshairMove(t){this.FM._(t)}subscribeDblClick(t){this.NM.i(t)}unsubscribeDblClick(t){this.NM._(t)}priceScale(t,i=0){return new sn(this.qp,t,i)}timeScale(){return this.$M}applyOptions(t){this.qp._r(sf(t))}options(){return this.qp.N()}takeScreenshot(t=!1,i=!1){let e,s;try{i||(e=this.qp.Qt().N().crosshair.mode,this.qp._r({crosshair:{mode:2}})),s=this.qp.og(t)}finally{i||void 0===e||this.qp.Qt()._r({crosshair:{mode:e}})}return s}addPane(t=!1){let i=this.qp.Qt().Zd();return i.L_(t),this.ZM(i)}removePane(t){this.qp.Qt().Md(t)}swapPanes(t,i){this.qp.Qt().Sd(t,i)}autoSizeActive(){return this.qp.fg()}chartElement(){return this.qp.ev()}panes(){return this.qp.Qt().Zs().map(t=>this.ZM(t))}paneSize(t=0){let i=this.qp.mg(t);return{height:i.height,width:i.width}}setCrosshairPosition(t,i,e){let s=this.LM.get(e);if(void 0===s)return;let h=this.qp.Qt().jn(s);null!==h&&this.qp.Qt().Ed(t,i,h)}clearCrosshairPosition(){this.qp.Qt().Ad(!0)}horzBehaviour(){return this.HM}YM(t,i={},e=0){var s;T(void 0!==t.qM),void 0!==(s=i.priceFormat)&&"custom"!==s.type&&void 0!==s.minMove&&void 0===s.precision&&(s.precision=iG(s.minMove)),"Candlestick"===t.type&&(void 0!==i.borderColor&&(i.borderUpColor=i.borderColor,i.borderDownColor=i.borderColor),void 0!==i.wickColor&&(i.wickUpColor=i.wickColor,i.wickDownColor=i.wickColor));let h=F($(N),$(t.defaultOptions),i),r=t.qM,l=new ir(this.qp.Qt(),t.type,h,r,t.jM);this.qp.Qt().Od(l,e);let n=new sc(l,this,this,this,this.HM,t=>this.ZM(t));return this.LM.set(n,l),this.zM.set(l,n),n}KM(t){let i=this.qp.Qt();i.Ld(t.Et.dc,t.Et.tM,t.Et.iM),t.O_.forEach((t,i)=>i.ht(t.he,t.Qg)),i.Et().Gu(),i.Mc()}GM(t){return P(this.zM.get(t))}UM(t){let i=new Map;t.Dg.forEach((t,e)=>{let s=e.ph(),h=e8(s)(t);if("Custom"!==s)T(eR(h));else{let t=e.el();T(!t||!1===t(h))}i.set(this.GM(e),h)});let e=void 0!==t.Rg&&this.zM.has(t.Rg)?this.GM(t.Rg):void 0;return{time:t.Kr,logical:t.$s,point:t.Pg,paneIndex:t.Tg,hoveredSeries:e,hoveredObjectId:t.Ig,seriesData:i,sourceEvent:t.Vg}}ZM(t){let i=this.Zc.get(t);return i||(i=new so(this.qp,t=>this.GM(t),t,this),this.Zc.set(t,i)),i}}function sp(t){if(V(t)){let i=document.getElementById(t);return T(null!==i,`Cannot find element in DOM with id=${t}`),i}return t}function sg(t,i,e){let s=new sm(sp(t),i,e);return i.setOptions(s.options()),s}function sv(t,i){return sg(t,new i5,i5.df(i))}function sw(){return i5}class sb extends eY{constructor(t,i){super(t,i,!0)}pM(t,i,e){i.fc(this.rM,A(this.hM)),t.qo(this.rM,e,A(this.hM))}XM(t,i){return{wt:t,gt:i,_t:NaN,ut:NaN}}dM(){let t=this.se.ma();this.rM=this.se.za().Th().map(i=>{let e;if((i.$r??1)>1){let t=i.Wt[1],s=i.Wt[2],h=i.Wt[3];e=Math.abs(t-h)>Math.abs(s-h)?t:s}else e=i.Wt[3];return this.JM(i.$s,e,t)})}}function sM(t,i,e,s,h,r,l){if(0===i.length||s.from>=i.length||s.to<=0)return;let{context:n,horizontalPixelRatio:o,verticalPixelRatio:a}=t,u=i[s.from],c=r(t,u),d=u;if(s.to-s.from<2){let i=h/2;n.beginPath();let e={_t:u._t-i,ut:u.ut},s={_t:u._t+i,ut:u.ut};n.moveTo(e._t*o,e.ut*a),n.lineTo(s._t*o,s.ut*a),l(t,c,e,s)}else{let h=(i,e)=>{l(t,c,d,e),n.beginPath(),c=i,d=e},f=d;n.beginPath(),n.moveTo(u._t*o,u.ut*a);for(let l=s.from+1;l<s.to;++l){let s=r(t,f=i[l]);switch(e){case 0:n.lineTo(f._t*o,f.ut*a);break;case 1:n.lineTo(f._t*o,i[l-1].ut*a),s!==c&&(h(s,f),n.lineTo(f._t*o,i[l-1].ut*a)),n.lineTo(f._t*o,f.ut*a);break;case 2:{let[t,e]=function(t,i,e){var s,h;let r=Math.max(0,i-1),l=Math.min(t.length-1,e+1);return[(s=t[i],h=sS(sy(t[e],t[r]),6),{_t:s._t+h._t,ut:s.ut+h.ut}),sy(t[e],sS(sy(t[l],t[i]),6))]}(i,l-1,l);n.bezierCurveTo(t._t*o,t.ut*a,e._t*o,e.ut*a,f._t*o,f.ut*a)}}1!==e&&s!==c&&(h(s,f),n.moveTo(f._t*o,f.ut*a))}(d!==f||d===f&&1===e)&&l(t,c,d,f)}}function sy(t,i){return{_t:t._t-i._t,ut:t.ut-i.ut}}function sS(t,i){return{_t:t._t/i,ut:t.ut/i}}function sx(t,i){let e=t.context;e.strokeStyle=i,e.stroke()}class s_ extends X{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(null===this.rt)return;let{ot:i,lt:e,QM:s,tb:h,ct:r,Zt:l,ib:n}=this.rt;if(null===e)return;let o=t.context;o.lineCap="butt",o.lineWidth=r*t.verticalPixelRatio,R(o,l),o.lineJoin="round";let a=this.sb.bind(this);void 0!==h&&sM(t,i,h,e,s,a,sx),n&&function(t,i,e,s,h){if(s.to-s.from<=0)return;let{horizontalPixelRatio:r,verticalPixelRatio:l,context:n}=t,o=null,a=Math.max(1,Math.floor(r))%2/2,u=e*l+a;for(let e=s.to-1;e>=s.from;--e){let s=i[e];if(s){let i=h(t,s);i!==o&&(n.beginPath(),null!==o&&n.fill(),n.fillStyle=i,o=i);let e=Math.round(s._t*r)+a,c=s.ut*l;n.moveTo(e,c),n.arc(e,c,u,0,2*Math.PI)}}n.fill()}(t,i,n,e,a)}}class sC extends s_{sb(t,i){return i.vt}}class sj extends sb{constructor(){super(...arguments),this._M=new sC}JM(t,i,e){return{...this.XM(t,i),...e.mh(t)}}vM(){let t=this.se.N(),i={ot:this.rM,Zt:t.lineStyle,tb:t.lineVisible?t.lineType:void 0,ct:t.lineWidth,ib:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,lt:this.hM,QM:this.ne.Et().ol()};this._M.ht(i)}}let sE={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},qM:(t,i)=>new sj(t,i)};function sz(t,i){return t.weight>i.weight?t:i}class sk{constructor(){var t;let i;this.nb=new I,this.eb=(t=()=>this.nb.p(this.rb),i=!1,function(...e){i||(i=!0,queueMicrotask(()=>{t(...e),i=!1}))}),this.rb=0}hb(){return this.nb}m(){this.nb.m()}options(){return this.ys}setOptions(t){this.ys=t}preprocessData(t){}updateFormatter(t){this.ys&&(this.ys.localization=t)}createConverterToInternalObj(t){return this.eb(),t=>(t>this.rb&&(this.rb=t),t)}key(t){return t}cacheKey(t){return t}convertHorzItemToInternal(t){return t}formatHorzItem(t){return this.ab(t)}formatTickmark(t){return this.ab(t.time)}maxTickMarkWeight(t){return t.reduce(sz,t[0]).weight}fillWeightsForPoints(t,i){var e;for(let s=i;s<t.length;++s)t[s].timeWeight=(e=t[s].time)%120==0?10:e%60==0?9:e%36==0?8:e%12==0?7:e%6==0?6:e%3==0?5:e%1==0?4:0;this.rb=t[t.length-1].time,this.eb()}ab(t){if(this.ys.localization?.timeFormatter)return this.ys.localization.timeFormatter(t);if(t<12)return`${t}M`;let i=Math.floor(t/12),e=t%12;return 0===e?`${i}Y`:`${i}Y${e}M`}}let sN={yieldCurve:{baseResolution:1,minimumTimeRange:120,startTimeRange:0},timeScale:{ignoreWhitespaceIndices:!0},leftPriceScale:{visible:!0},rightPriceScale:{visible:!1},localization:{priceFormatter:t=>t.toFixed(3)+"%"}},sR={lastValueVisible:!1,priceLineVisible:!1};class sB extends sm{constructor(t,i){let e=F(sN,i||{}),s=new sk;super(t,s,e),s.setOptions(this.options()),this._initWhitespaceSeries()}addSeries(t,i={},e=0){if(t.isBuiltIn&&!1===["Area","Line"].includes(t.type))throw Error("Yield curve only support Area and Line series");let s={...sR,...i};return super.addSeries(t,s,e)}_initWhitespaceSeries(){let t;let i=this.horzBehaviour(),e=this.addSeries(sE);function s(s){var h;let r={ce:Math.max(0,(h=i.options().yieldCurve).startTimeRange),de:Math.max(0,h.minimumTimeRange,s||0),lb:Math.max(1,h.baseResolution)},l=(({ce:t,de:i,lb:e})=>`${t}~${i}~${e}`)(r);l!==t&&(t=l,e.setData(function({ce:t,de:i,lb:e}){return Array.from({length:Math.floor((i-t)/e)+1},(i,s)=>({time:t+s*e}))}(r)))}s(0),i.hb().i(s)}}function sT(t,i){return new sB(sp(t),i)}function sP(t,i){return t.weight>i.weight?t:i}class sW{options(){return this.ys}setOptions(t){this.ys=t}preprocessData(t){}updateFormatter(t){this.ys&&(this.ys.localization=t)}createConverterToInternalObj(t){return t=>t}key(t){return t}cacheKey(t){return t}convertHorzItemToInternal(t){return t}formatHorzItem(t){return t.toFixed(this.Tn())}formatTickmark(t,i){return t.time.toFixed(this.Tn())}maxTickMarkWeight(t){return t.reduce(sP,t[0]).weight}fillWeightsForPoints(t,i){var e;for(let s=i;s<t.length;++s)t[s].timeWeight=(e=t[s].time)===100*Math.ceil(e/100)?8:e===50*Math.ceil(e/50)?7:e===25*Math.ceil(e/25)?6:e===10*Math.ceil(e/10)?5:e===5*Math.ceil(e/5)?4:e===Math.ceil(e)?3:2*e===Math.ceil(2*e)?1:0}Tn(){return this.ys.localization.precision}}function sL(t,i){return sg(t,new sW,i)}function sI(t,i,e,s,h){let{context:r,horizontalPixelRatio:l,verticalPixelRatio:n}=i;r.lineTo(h._t*l,t*n),r.lineTo(s._t*l,t*n),r.closePath(),r.fillStyle=e,r.fill()}class sF extends X{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(null===this.rt)return;let{ot:i,lt:e,QM:s,ct:h,Zt:r,tb:l}=this.rt,n=this.rt.ob??(this.rt._b?0:t.mediaSize.height);if(null===e)return;let o=t.context;o.lineCap="butt",o.lineJoin="round",o.lineWidth=h,R(o,r),o.lineWidth=1,sM(t,i,l,e,s,this.ub.bind(this),sI.bind(null,n))}}class sO{cb(t,i){let e=this.fb,{pb:s,mb:h,wb:r,gb:l,ob:n,Mb:o,bb:a}=i;if(void 0===this.Sb||void 0===e||e.pb!==s||e.mb!==h||e.wb!==r||e.gb!==l||e.ob!==n||e.Mb!==o||e.bb!==a){let{verticalPixelRatio:e}=t,u=n||o>0?e:1,c=o*u,d=a===t.bitmapSize.height?a:a*u,f=t.context.createLinearGradient(0,c,0,d);if(f.addColorStop(0,s),null!=n){let t=iu(((n??0)*u-c)/(d-c),0,1);f.addColorStop(t,h),f.addColorStop(t,r)}f.addColorStop(1,l),this.Sb=f,this.fb=i}return this.Sb}}class sD extends sF{constructor(){super(...arguments),this.xb=new sO}ub(t,i){let e=this.rt;return this.xb.cb(t,{pb:i.hh,mb:i.ah,wb:i.oh,gb:i._h,ob:e.ob,Mb:e.Mb??0,bb:e.bb??t.bitmapSize.height})}}class sV extends s_{constructor(){super(...arguments),this.Cb=new sO}sb(t,i){let e=this.rt;return this.Cb.cb(t,{pb:i.eh,mb:i.eh,wb:i.rh,gb:i.rh,ob:e.ob,Mb:e.Mb??0,bb:e.bb??t.bitmapSize.height})}}class sG extends sb{constructor(t,i){super(t,i),this._M=new J,this.yb=new sD,this.kb=new sV,this._M.st([this.yb,this.kb])}JM(t,i,e){return{...this.XM(t,i),...e.mh(t)}}vM(){let t,i;let e=this.se.Lt();if(null===e)return;let s=this.se.N(),h=this.se.Ft().Nt(s.baseValue.price,e.Wt),r=this.ne.Et().ol();if(null!==this.hM&&0!==this.rM.length){if(s.relativeGradient){t=this.rM[this.hM.from].ut,i=this.rM[this.hM.from].ut;for(let e=this.hM.from;e<this.hM.to;e++){let s=this.rM[e];s.ut<t&&(t=s.ut),s.ut>i&&(i=s.ut)}}this.yb.ht({ot:this.rM,ct:s.lineWidth,Zt:s.lineStyle,tb:s.lineType,ob:h,Mb:t,bb:i,_b:!1,lt:this.hM,QM:r}),this.kb.ht({ot:this.rM,ct:s.lineWidth,Zt:s.lineStyle,tb:s.lineVisible?s.lineType:void 0,ib:s.pointMarkersVisible?s.pointMarkersRadius||s.lineWidth/2+2:void 0,ob:h,Mb:t,bb:i,lt:this.hM,QM:r})}}}let s$={type:"Baseline",isBuiltIn:!0,defaultOptions:{baseValue:{type:"price",price:0},relativeGradient:!1,topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},qM:(t,i)=>new sG(t,i)};class sH extends sF{constructor(){super(...arguments),this.xb=new sO}ub(t,i){return this.xb.cb(t,{pb:i.sh,mb:"",wb:"",gb:i.nh,Mb:this.rt?.Mb??0,bb:t.bitmapSize.height})}}class sA extends sb{constructor(t,i){super(t,i),this._M=new J,this.Pb=new sH,this.Tb=new sC,this._M.st([this.Pb,this.Tb])}JM(t,i,e){return{...this.XM(t,i),...e.mh(t)}}vM(){let t;let i=this.se.N();if(null!==this.hM&&0!==this.rM.length){if(i.relativeGradient){t=this.rM[this.hM.from].ut;for(let i=this.hM.from;i<this.hM.to;i++){let e=this.rM[i];e.ut<t&&(t=e.ut)}}this.Pb.ht({tb:i.lineType,ot:this.rM,Zt:i.lineStyle,ct:i.lineWidth,ob:null,Mb:t,_b:i.invertFilledArea,lt:this.hM,QM:this.ne.Et().ol()}),this.Tb.ht({tb:i.lineVisible?i.lineType:void 0,ot:this.rM,Zt:i.lineStyle,ct:i.lineWidth,lt:this.hM,QM:this.ne.Et().ol(),ib:i.pointMarkersVisible?i.pointMarkersRadius||i.lineWidth/2+2:void 0})}}}let sQ={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},qM:(t,i)=>new sA(t,i)};class sU extends X{constructor(){super(...arguments),this.jt=null,this.Rb=0,this.Db=0}ht(t){this.jt=t}et({context:t,horizontalPixelRatio:i,verticalPixelRatio:e}){if(null===this.jt||0===this.jt.Us.length||null===this.jt.lt)return;this.Rb=this.Ib(i),this.Rb>=2&&Math.max(1,Math.floor(i))%2!=this.Rb%2&&this.Rb--,this.Db=this.jt.Vb?Math.min(this.Rb,Math.floor(i)):this.Rb;let s=null,h=this.Db<=this.Rb&&this.jt.ol>=Math.floor(1.5*i);for(let r=this.jt.lt.from;r<this.jt.lt.to;++r){let l=this.jt.Us[r];s!==l.Jr&&(t.fillStyle=l.Jr,s=l.Jr);let n=Math.floor(.5*this.Db),o=Math.round(l._t*i),a=o-n,u=this.Db,c=a+u-1,d=Math.min(l.Zo,l.Go),f=Math.max(l.Zo,l.Go),m=Math.round(d*e)-n,p=Math.max(Math.round(f*e)+n-m,this.Db);t.fillRect(a,m,u,p);let g=Math.ceil(1.5*this.Rb);if(h){if(this.jt.Bb){let i=o-g,s=Math.max(m,Math.round(l.Ko*e)-n),h=s+u-1;h>m+p-1&&(s=(h=m+p-1)-u+1),t.fillRect(i,s,a-i,h-s+1)}let i=o+g,s=Math.max(m,Math.round(l.Xo*e)-n),h=s+u-1;h>m+p-1&&(s=(h=m+p-1)-u+1),t.fillRect(c+1,s,i-c,h-s+1)}}}Ib(t){return Math.max(Math.floor(t),Math.floor(Math.floor(.3*W(this.jt).ol*t)))}}class sq extends eY{constructor(t,i){super(t,i,!1)}pM(t,i,e){i.fc(this.rM,A(this.hM)),t.Yo(this.rM,e,A(this.hM))}Eb(t,i,e){return{wt:t,Fr:i.Wt[0],Wr:i.Wt[1],Hr:i.Wt[2],Ur:i.Wt[3],_t:NaN,Ko:NaN,Zo:NaN,Go:NaN,Xo:NaN}}dM(){let t=this.se.ma();this.rM=this.se.za().Th().map(i=>this.JM(i.$s,i,t))}}class sK extends sq{constructor(){super(...arguments),this._M=new sU}JM(t,i,e){return{...this.Eb(t,i,e),...e.mh(t)}}vM(){let t=this.se.N();this._M.ht({Us:this.rM,ol:this.ne.Et().ol(),Bb:t.openVisible,Vb:t.thinBars,lt:this.hM})}}let sY={type:"Bar",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},qM:(t,i)=>new sK(t,i)};class sZ extends X{constructor(){super(...arguments),this.jt=null,this.Rb=0}ht(t){this.jt=t}et(t){if(null===this.jt||0===this.jt.Us.length||null===this.jt.lt)return;let{horizontalPixelRatio:i}=t;this.Rb=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);let e=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.min(Math.floor(t*e*i),Math.floor(t*i));return Math.max(Math.floor(i),s)}(this.jt.ol,i),this.Rb>=2&&Math.floor(i)%2!=this.Rb%2&&this.Rb--;let e=this.jt.Us;this.jt.Ab&&this.Lb(t,e,this.jt.lt),this.jt.Mi&&this.vm(t,e,this.jt.lt);let s=this.zb(i);(!this.jt.Mi||this.Rb>2*s)&&this.Ob(t,e,this.jt.lt)}Lb(t,i,e){if(null===this.jt)return;let{context:s,horizontalPixelRatio:h,verticalPixelRatio:r}=t,l="",n=Math.min(Math.floor(h),Math.floor(this.jt.ol*h)),o=Math.floor(.5*(n=Math.max(Math.floor(h),Math.min(n,this.Rb)))),a=null;for(let t=e.from;t<e.to;t++){let e=i[t];e.th!==l&&(s.fillStyle=e.th,l=e.th);let u=Math.round(Math.min(e.Ko,e.Xo)*r),c=Math.round(Math.max(e.Ko,e.Xo)*r),d=Math.round(e.Zo*r),f=Math.round(e.Go*r),m=Math.round(h*e._t)-o,p=m+n-1;null!==a&&(m=Math.min(m=Math.max(a+1,m),p));let g=p-m+1;s.fillRect(m,d,g,u-d),s.fillRect(m,c+1,g,f-c),a=p}}zb(t){let i=Math.floor(1*t);this.Rb<=2*i&&(i=Math.floor(.5*(this.Rb-1)));let e=Math.max(Math.floor(t),i);return this.Rb<=2*e?Math.max(Math.floor(t),Math.floor(1*t)):e}vm(t,i,e){if(null===this.jt)return;let{context:s,horizontalPixelRatio:h,verticalPixelRatio:r}=t,l="",n=this.zb(h),o=null;for(let t=e.from;t<e.to;t++){let e=i[t];e.Qr!==l&&(s.fillStyle=e.Qr,l=e.Qr);let d=Math.round(e._t*h)-Math.floor(.5*this.Rb),f=d+this.Rb-1,m=Math.round(Math.min(e.Ko,e.Xo)*r),p=Math.round(Math.max(e.Ko,e.Xo)*r);if(null!==o&&(d=Math.min(d=Math.max(o+1,d),f)),this.jt.ol*h>2*n){var a,u,c;a=d,u=f-d+1,c=p-m+1,s.fillRect(a+n,m,u-2*n,n),s.fillRect(a+n,m+c-n,u-2*n,n),s.fillRect(a,m,n,c),s.fillRect(a+u-n,m,n,c)}else{let t=f-d+1;s.fillRect(d,m,t,p-m+1)}o=f}}Ob(t,i,e){if(null===this.jt)return;let{context:s,horizontalPixelRatio:h,verticalPixelRatio:r}=t,l="",n=this.zb(h);for(let t=e.from;t<e.to;t++){let e=i[t],o=Math.round(Math.min(e.Ko,e.Xo)*r),a=Math.round(Math.max(e.Ko,e.Xo)*r),u=Math.round(e._t*h)-Math.floor(.5*this.Rb),c=u+this.Rb-1;if(e.Jr!==l){let t=e.Jr;s.fillStyle=t,l=t}this.jt.Mi&&(u+=n,o+=n,c-=n,a-=n),o>a||s.fillRect(u,o,c-u+1,a-o+1)}}}class sJ extends sq{constructor(){super(...arguments),this._M=new sZ}JM(t,i,e){return{...this.Eb(t,i,e),...e.mh(t)}}vM(){let t=this.se.N();this._M.ht({Us:this.rM,ol:this.ne.Et().ol(),Ab:t.wickVisible,Mi:t.borderVisible,lt:this.hM})}}let sX={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},qM:(t,i)=>new sJ(t,i)};class s0 extends X{constructor(){super(...arguments),this.jt=null,this.Nb=[]}ht(t){this.jt=t,this.Nb=[]}et({context:t,horizontalPixelRatio:i,verticalPixelRatio:e}){if(null===this.jt||0===this.jt.ot.length||null===this.jt.lt)return;this.Nb.length||this.Fb(i);let s=Math.max(1,Math.floor(e)),h=Math.round(this.jt.Wb*e)-Math.floor(s/2),r=h+s;for(let i=this.jt.lt.from;i<this.jt.lt.to;i++){let l,n;let o=this.jt.ot[i],a=this.Nb[i-this.jt.lt.from],u=Math.round(o.ut*e);t.fillStyle=o.Jr,u<=h?(l=u,n=r):(l=h,n=u-Math.floor(s/2)+s),t.fillRect(a.Ba,l,a.bi-a.Ba+1,n-l)}}Fb(t){if(null===this.jt||0===this.jt.ot.length||null===this.jt.lt)return void(this.Nb=[]);let i=1>=Math.ceil(this.jt.ol*t)?0:Math.max(1,Math.floor(t)),e=Math.round(this.jt.ol*t)-i;this.Nb=Array(this.jt.lt.to-this.jt.lt.from);for(let i=this.jt.lt.from;i<this.jt.lt.to;i++){let s,h;let r=this.jt.ot[i],l=Math.round(r._t*t);if(e%2){let t=(e-1)/2;s=l-t,h=l+t}else{let t=e/2;s=l-t,h=l+t-1}this.Nb[i-this.jt.lt.from]={Ba:s,bi:h,Hb:l,ae:r._t*t,wt:r.wt}}for(let t=this.jt.lt.from+1;t<this.jt.lt.to;t++){let e=this.Nb[t-this.jt.lt.from],s=this.Nb[t-this.jt.lt.from-1];e.wt===s.wt+1&&e.Ba-s.bi!==i+1&&(s.Hb>s.ae?s.bi=e.Ba-i-1:e.Ba=s.bi+i+1)}let s=Math.ceil(this.jt.ol*t);for(let t=this.jt.lt.from;t<this.jt.lt.to;t++){let i=this.Nb[t-this.jt.lt.from];i.bi<i.Ba&&(i.bi=i.Ba),s=Math.min(i.bi-i.Ba+1,s)}if(i>0&&s<4)for(let t=this.jt.lt.from;t<this.jt.lt.to;t++){let i=this.Nb[t-this.jt.lt.from];i.bi-i.Ba+1>s&&(i.Hb>i.ae?i.bi-=1:i.Ba+=1)}}}class s1 extends sb{constructor(){super(...arguments),this._M=new s0}JM(t,i,e){return{...this.XM(t,i),...e.mh(t)}}vM(){let t={ot:this.rM,ol:this.ne.Et().ol(),lt:this.hM,Wb:this.se.Ft().Nt(this.se.N().base,W(this.se.Lt()).Wt)};this._M.ht(t)}}let s2={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},qM:(t,i)=>new s1(t,i)};class s9{constructor(t,i){this.yt=t,this.Ub=i,this.$b()}detach(){this.yt.detachPrimitive(this.Ub)}getPane(){return this.yt}applyOptions(t){this.Ub._r?.(t)}$b(){this.yt.attachPrimitive(this.Ub)}}let s5={visible:!0,horzAlign:"center",vertAlign:"center",lines:[]},s6={color:"rgba(0, 0, 0, 0.5)",fontSize:48,fontFamily:Q,fontStyle:"",text:""};class s3{constructor(t){this.qb=new Map,this.jt=t}draw(t){t.useMediaCoordinateSpace(t=>{if(!this.jt.visible)return;let{context:i,mediaSize:e}=t,s=0;for(let t of this.jt.lines){if(0===t.text.length)continue;i.font=t.P;let h=this.jb(i,t.text);h>e.width?t.Pc=e.width/h:t.Pc=1,s+=t.lineHeight*t.Pc}let h=0;switch(this.jt.vertAlign){case"top":h=0;break;case"center":h=Math.max((e.height-s)/2,0);break;case"bottom":h=Math.max(e.height-s,0)}for(let t of this.jt.lines){i.save(),i.fillStyle=t.color;let s=0;switch(this.jt.horzAlign){case"left":i.textAlign="left",s=t.lineHeight/2;break;case"center":i.textAlign="center",s=e.width/2;break;case"right":i.textAlign="right",s=e.width-1-t.lineHeight/2}i.translate(s,h),i.textBaseline="top",i.font=t.P,i.scale(t.Pc,t.Pc),i.fillText(t.text,0,t.Yb),i.restore(),h+=t.lineHeight*t.Pc}})}jb(t,i){let e=this.Kb(t.font),s=e.get(i);return void 0===s&&(s=t.measureText(i).width,e.set(i,s)),s}Kb(t){let i=this.qb.get(t);return void 0===i&&(i=new Map,this.qb.set(t,i)),i}}class s4{constructor(t){this.ys=s8(t)}kt(t){this.ys=s8(t)}renderer(){return new s3(this.ys)}}function s7(t){return{...t,P:U(t.fontSize,t.fontFamily,t.fontStyle),lineHeight:t.lineHeight||1.2*t.fontSize,Yb:0,Pc:0}}function s8(t){return{...t,lines:t.lines.map(s7)}}function ht(t){return{...s6,...t}}function hi(t){return{...s5,...t,lines:t.lines?.map(ht)??[]}}class he{constructor(t){this.ys=hi(t),this.Zb=[new s4(this.ys)]}updateAllViews(){this.Zb.forEach(t=>t.kt(this.ys))}paneViews(){return this.Zb}attached({requestUpdate:t}){this.Gb=t}detached(){this.Gb=void 0}_r(t){this.ys=hi({...this.ys,...t}),this.Gb&&this.Gb()}}function hs(t,i){return new s9(t,new he(i))}let hh={alpha:1,padding:0};class hr{constructor(t){this.jt=t}draw(t){t.useMediaCoordinateSpace(t=>{let i=t.context,e=this.Xb(this.jt,t.mediaSize);e&&this.jt.Jb&&(i.globalAlpha=this.jt.alpha??1,i.drawImage(this.jt.Jb,e._t,e.ut,e.Qi,e.$t))})}Xb(t,i){let{maxHeight:e,maxWidth:s,Qb:h,tS:r,padding:l}=t,n=Math.round(i.width/2),o=Math.round(i.height/2),a=l??0,u=i.width-2*a,c=i.height-2*a;e&&(c=Math.min(c,e)),s&&(u=Math.min(u,s));let d=Math.min(u/r,c/h),f=r*d,m=h*d;return{_t:n-.5*f,ut:o-.5*m,$t:m,Qi:f}}}class hl{constructor(t){this.iS=null,this.sS=0,this.nS=0,this.ys=t,this.M=hn(this.ys,this.iS,this.sS,this.nS)}eS(t){void 0!==t.rS&&(this.sS=t.rS),void 0!==t.hS&&(this.nS=t.hS),void 0!==t.aS&&(this.iS=t.aS),this.kt()}lS(t){this.ys=t,this.kt()}zOrder(){return"bottom"}kt(){this.M=hn(this.ys,this.iS,this.sS,this.nS)}renderer(){return new hr(this.M)}}function hn(t,i,e,s){return{...t,Jb:i,tS:e,Qb:s}}class ho{constructor(t,i){this.oS=null,this._S=t,this.ys={...hh,...i},this.Zb=[new hl(this.ys)]}updateAllViews(){this.Zb.forEach(t=>t.kt())}paneViews(){return this.Zb}attached(t){let{requestUpdate:i}=t;this.uS=i,this.oS=new Image,this.oS.onload=()=>{let t=this.oS?.naturalHeight??1,i=this.oS?.naturalWidth??1;this.Zb.forEach(e=>e.eS({hS:t,rS:i,aS:this.oS})),this.uS&&this.uS()},this.oS.src=this._S}detached(){this.uS=void 0,this.oS=null}_r(t){var i;this.ys=(i={...this.ys,...t},{...hh,...i}),this.cS(),this.Gb&&this.Gb()}Gb(){this.uS&&this.uS()}cS(){this.Zb.forEach(t=>t.lS(this.ys))}}function ha(t,i,e){return new s9(t,new ho(i,e))}class hu{constructor(t,i){this.se=t,this.Yh=i,this.$b()}detach(){this.se.detachPrimitive(this.Yh)}getSeries(){return this.se}applyOptions(t){this.Yh&&this.Yh._r&&this.Yh._r(t)}$b(){this.se.attachPrimitive(this.Yh)}}let hc={autoScale:!0,zOrder:"normal"};function hd(t,i){return ic(Math.min(Math.max(t,12),30)*i)}function hf(t,i){switch(t){case"arrowDown":case"arrowUp":return hd(i,1);case"circle":return hd(i,.8);case"square":return hd(i,.7)}}function hm(t){return function(t){let i=Math.ceil(t);return i%2!=0?i-1:i}(hd(t,1))}function hp(t){return Math.max(hd(t,.1),3)}function hg(t,i,e){return i?t:e?Math.ceil(t/2):0}function hv(t,i,e,s){let h=(hf("arrowUp",s)-1)/2*e.dS,r=(ic(s/2)-1)/2*e.dS;i.beginPath(),t?(i.moveTo(e._t-h,e.ut),i.lineTo(e._t,e.ut-h),i.lineTo(e._t+h,e.ut),i.lineTo(e._t+r,e.ut),i.lineTo(e._t+r,e.ut+h),i.lineTo(e._t-r,e.ut+h)):(i.moveTo(e._t-h,e.ut),i.lineTo(e._t,e.ut+h),i.lineTo(e._t+h,e.ut),i.lineTo(e._t+r,e.ut),i.lineTo(e._t+r,e.ut-h),i.lineTo(e._t-r,e.ut-h)),i.lineTo(e._t-r,e.ut),i.fill()}function hw(t,i,e,s,h,r){let l=(hf("arrowUp",s)-1)/2,n=(ic(s/2)-1)/2;return h>=i-n-2&&h<=i+n+2&&r>=(t?e:e-l)-2&&r<=(t?e+l:e)+2||!(h<i-l-3)&&!(h>i+l+3)&&!(r<(t?e-l-3:e))&&!(r>(t?e:e+l+3))&&Math.abs(r-e)+3>=Math.abs(h-i)/2}class hb{constructor(){this.jt=null,this.Hn=new tj,this.F=-1,this.W="",this.$v="",this.fS="normal"}ht(t){this.jt=t}Un(t,i,e){this.F===t&&this.W===i||(this.F=t,this.W=i,this.$v=U(t,i),this.Hn.Ln()),this.fS=e}Xn(t,i){if(null===this.jt||null===this.jt.lt)return null;for(let r=this.jt.lt.from;r<this.jt.lt.to;r++){var e,s,h;let l=this.jt.ot[r];if(l&&(e=l,s=t,h=i,!(void 0===e.ri||!function(t,i,e,s,h,r){let l=s/2;return h>=t&&h<=t+e&&r>=i-l&&r<=i+l}(e.ri._t,e.ri.ut,e.ri.Qi,e.ri.$t,s,h))||function(t,i,e){if(0===t.xh)return!1;switch(t.vS){case"arrowDown":return hw(!0,t._t,t.ut,t.xh,i,e);case"arrowUp":return hw(!1,t._t,t.ut,t.xh,i,e);case"circle":return function(t,i,e,s,h){let r=2+hf("circle",e)/2,l=t-s,n=i-h;return Math.sqrt(l*l+n*n)<=r}(t._t,t.ut,t.xh,i,e);case"square":return function(t,i,e,s,h){let r=hf("square",e),l=(r-1)/2,n=t-l,o=i-l;return s>=n&&s<=n+r&&h>=o&&h<=o+r}(t._t,t.ut,t.xh,i,e)}}(e,s,h)))return{zOrder:"normal",externalId:l.Jn??""}}return null}draw(t){"aboveSeries"!==this.fS&&t.useBitmapCoordinateSpace(t=>{this.et(t)})}drawBackground(t){"aboveSeries"===this.fS&&t.useBitmapCoordinateSpace(t=>{this.et(t)})}et({context:t,horizontalPixelRatio:i,verticalPixelRatio:e}){if(null!==this.jt&&null!==this.jt.lt){t.textBaseline="middle",t.font=this.$v;for(let s=this.jt.lt.from;s<this.jt.lt.to;s++){let h=this.jt.ot[s];void 0!==h.ri&&(h.ri.Qi=this.Hn.Ii(t,h.ri.pS),h.ri.$t=this.F,h.ri._t=h._t-h.ri.Qi/2),function(t,i,e,s){var h,r,l;i.fillStyle=t.R,void 0!==t.ri&&(h=t.ri.pS,r=t.ri._t,l=t.ri.ut,i.save(),i.scale(e,s),i.fillText(h,r,l),i.restore()),function(t,i,e){if(0!==t.xh){switch(t.vS){case"arrowDown":return void hv(!1,i,e,t.xh);case"arrowUp":return void hv(!0,i,e,t.xh);case"circle":return void function(t,i,e){let s=(hf("circle",e)-1)/2;t.beginPath(),t.arc(i._t,i.ut,s*i.dS,0,2*Math.PI,!1),t.fill()}(i,e,t.xh);case"square":return void function(t,i,e){let s=hf("square",e),h=(s-1)*i.dS/2,r=i._t-h,l=i.ut-h;t.fillRect(r,l,s*i.dS,s*i.dS)}(i,e,t.xh)}t.vS}}(t,i,function(t,i,e){let s=Math.max(1,Math.floor(i))%2/2;return{_t:Math.round(t._t*i)+s,ut:t.ut*e,dS:i}}(t,e,s))}(h,t,i,e)}}}}function hM(t){return"atPriceTop"===t||"atPriceBottom"===t||"atPriceMiddle"===t}class hy{constructor(t,i,e){this.gS=[],this.xt=!0,this.MS=!0,this.Xt=new hb,this.xe=t,this.Ev=i,this.jt={ot:[],lt:null},this.ys=e}renderer(){if(!this.xe.options().visible)return null;this.xt&&this.bS();let t=this.Ev.options().layout;return this.Xt.Un(t.fontSize,t.fontFamily,this.ys.zOrder),this.Xt.ht(this.jt),this.Xt}SS(t){this.gS=t,this.kt("data")}kt(t){this.xt=!0,"data"===t&&(this.MS=!0)}xS(t){this.xt=!0,this.ys=t}zOrder(){return"aboveSeries"===this.ys.zOrder?"top":this.ys.zOrder}bS(){let t=this.Ev.timeScale(),i=this.gS;this.MS&&(this.jt.ot=i.map(t=>({wt:t.time,_t:0,ut:0,xh:0,vS:t.shape,R:t.color,Jn:t.id,CS:t.CS,ri:void 0})),this.MS=!1);let e=this.Ev.options().layout;this.jt.lt=null;let s=t.getVisibleLogicalRange();if(null===s)return;let h=new iW(Math.floor(s.from),Math.ceil(s.to));if(null===this.xe.data()[0]||0===this.jt.ot.length)return;let r=NaN,l=hp(t.options().barSpacing),n={mS:l,wS:l};this.jt.lt=eK(this.jt.ot,h,!0);for(let s=this.jt.lt.from;s<this.jt.lt.to;s++){let h=i[s];h.time!==r&&(n.mS=l,n.wS=l,r=h.time);let o=this.jt.ot[s];o._t=W(t.logicalToCoordinate(h.time)),void 0!==h.text&&h.text.length>0&&(o.ri={pS:h.text,_t:0,ut:0,Qi:0,$t:0});let a=this.xe.dataByIndex(h.time,0);null!==a&&function(t,i,e,s,h,r,l,n){let o=function(t,i,e){if(hM(i.position)&&void 0!==i.price)return i.price;if("value"in t&&"number"==typeof t.value)return t.value;if("open"in t&&"high"in t&&"low"in t&&"close"in t){if("inBar"===i.position)return t.close;if("aboveBar"===i.position)return e?t.low:t.high;if("belowBar"===i.position)return e?t.high:t.low}}(e,i,l.priceScale().options().invertScale);if(void 0===o)return;let a=hM(i.position),u=n.timeScale(),c=O(i.size)?Math.max(i.size,0):1,d=hm(u.options().barSpacing)*c,f=d/2;switch(t.xh=d,i.position){case"inBar":case"atPriceMiddle":return t.ut=W(l.priceToCoordinate(o)),void(void 0!==t.ri&&(t.ri.ut=t.ut+f+r+.6*h));case"aboveBar":case"atPriceTop":{let i=a?0:s.mS;return t.ut=W(l.priceToCoordinate(o))-f-i,void 0!==t.ri&&(t.ri.ut=t.ut-f-.6*h,s.mS+=1.2*h),void(a||(s.mS+=d+r))}case"belowBar":case"atPriceBottom":{let i=a?0:s.wS;return t.ut=W(l.priceToCoordinate(o))+f+i,void 0!==t.ri&&(t.ri.ut=t.ut+f+r+.6*h,s.wS+=1.2*h),void(a||(s.wS+=d+r))}}}(o,h,a,n,e.fontSize,l,this.xe,this.Ev)}this.xt=!1}}class hS{constructor(t){this.Hh=null,this.gS=[],this.yS=[],this.kS=null,this.xe=null,this.Ev=null,this.PS=!0,this.TS=null,this.RS=null,this.DS=null,this.IS=!0,this.ys={...hc,...t}}attached(t){this.VS(),this.Ev=t.chart,this.xe=t.series,this.Hh=new hy(this.xe,W(this.Ev),this.ys),this.uS=t.requestUpdate,this.xe.subscribeDataChanged(t=>this.RM(t)),this.IS=!0,this.Gb()}Gb(){this.uS&&this.uS()}detached(){this.xe&&this.kS&&this.xe.unsubscribeDataChanged(this.kS),this.Ev=null,this.xe=null,this.Hh=null,this.kS=null}SS(t){this.IS=!0,this.gS=t,this.VS(),this.PS=!0,this.RS=null,this.Gb()}BS(){return this.gS}paneViews(){return this.Hh?[this.Hh]:[]}updateAllViews(){this.ES()}hitTest(t,i){return this.Hh?this.Hh.renderer()?.Xn(t,i)??null:null}autoscaleInfo(t,i){if(this.ys.autoScale&&this.Hh){let t=this.AS();if(t)return{priceRange:null,margins:t}}return null}_r(t){var i;this.ys=(i={...this.ys,...t},{...hc,...i}),this.Gb&&this.Gb()}AS(){let t=W(this.Ev).timeScale().options().barSpacing;if(this.PS||t!==this.DS){if(this.DS=t,this.gS.length>0){let i=hp(t),e=1.5*hm(t)+2*i,s=this.LS();this.TS={above:hg(e,s.aboveBar,s.inBar),below:hg(e,s.belowBar,s.inBar)}}else this.TS=null;this.PS=!1}return this.TS}LS(){return null===this.RS&&(this.RS=this.gS.reduce((t,i)=>(t[i.position]||(t[i.position]=!0),t),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.RS}VS(){if(!this.IS||!this.Ev||!this.xe)return;let t=this.Ev.timeScale(),i=this.xe?.data();if(null==t.getVisibleLogicalRange()||!this.xe||0===i.length)return void(this.yS=[]);let e=t.timeToIndex(W(i[0].time),!0);this.yS=this.gS.map((i,s)=>{let h=t.timeToIndex(i.time,!0),r=W(this.xe).dataByIndex(h,h<e?1:-1),l={time:t.timeToIndex(W(r).time,!1),position:i.position,shape:i.shape,color:i.color,id:i.id,CS:s,text:i.text,size:i.size,price:i.price,Kr:i.time};if(("atPriceTop"===i.position||"atPriceBottom"===i.position||"atPriceMiddle"===i.position)&&void 0===i.price)throw Error(`Price is required for position ${i.position}`);return{...l,position:i.position,price:i.price}}),this.IS=!1}ES(t){this.Hh&&(this.VS(),this.Hh.SS(this.yS),this.Hh.xS(this.ys),this.Hh.kt(t))}RM(t){this.IS=!0,this.Gb()}}class hx extends hu{constructor(t,i,e){super(t,i),e&&this.setMarkers(e)}setMarkers(t){this.Yh.SS(t)}markers(){return this.Yh.BS()}}function h_(t,i,e){let s=new hx(t,new hS(e??{}));return i&&s.setMarkers(i),s}class hC{constructor(t){this.gS=new Map,this.zS=t}OS(t,i,e){if(this.NS(i),void 0!==e){let s=window.setTimeout(()=>{this.gS.delete(i),this.FS()},e),h={...t,WS:s,HS:Date.now()+e};this.gS.set(i,h)}else this.gS.set(i,{...t,WS:void 0,HS:void 0});this.FS()}NS(t){let i=this.gS.get(t);i&&void 0!==i.WS&&window.clearTimeout(i.WS),this.gS.delete(t),this.FS()}US(){for(let[t]of this.gS)this.NS(t)}$S(){let t=Date.now(),i=[];for(let[e,s]of this.gS)!s.HS||s.HS>t?i.push({time:s.time,sign:s.sign,value:s.value}):this.NS(e);return i}qS(t){this.zS=t}FS(){this.zS&&this.zS()}}let hj={positiveColor:"#22AB94",negativeColor:"#F7525F",updateVisibilityDuration:5e3};class hE{constructor(t,i,e,s){this.jt=t,this.jS=i,this.YS=e,this.KS=s}draw(t){t.useBitmapCoordinateSpace(t=>{let i=t.context,e=Math.max(1,Math.floor(t.horizontalPixelRatio))%2/2,s=4*t.verticalPixelRatio+e;this.jt.forEach(h=>{let r=Math.round(h._t*t.horizontalPixelRatio)+e;i.beginPath();let l=this.ZS(h.GS);i.fillStyle=l,i.arc(r,h.ut*t.verticalPixelRatio,s,0,2*Math.PI,!1),i.fill(),h.GS&&(i.strokeStyle=l,i.lineWidth=Math.floor(2*t.horizontalPixelRatio),i.beginPath(),i.moveTo((h._t-4.7)*t.horizontalPixelRatio+e,(h.ut-7*h.GS)*t.verticalPixelRatio),i.lineTo(h._t*t.horizontalPixelRatio+e,(h.ut-7*h.GS-7*h.GS*.5)*t.verticalPixelRatio),i.lineTo((h._t+4.7)*t.horizontalPixelRatio+e,(h.ut-7*h.GS)*t.verticalPixelRatio),i.stroke())})})}ZS(t){return 0===t?this.jS:t>0?this.KS:this.YS}}class hz{constructor(t,i,e){this.jt=[],this.xe=t,this.Gh=i,this.ys=e}kt(t){this.jt=t.map(t=>{let i=this.xe.priceToCoordinate(t.value);return null===i?null:{_t:W(this.Gh.timeToCoordinate(t.time)),ut:i,GS:t.sign}}).filter(H)}renderer(){var t;let i=(t=this.xe.options(),"Area"===this.xe.seriesType()?t.lineColor:t.color);return new hE(this.jt,i,this.ys.negativeColor,this.ys.positiveColor)}}function hk(t,i){return"Line"===i||"Area"===i}class hN{constructor(t){this.Ev=void 0,this.xe=void 0,this.Zb=[],this._u=null,this.XS=new Map,this.JS=new hC(()=>this.Gb()),this.ys={...hj,...t}}_r(t){this.ys={...this.ys,...t},this.Gb()}SS(t){this.JS.US();let i=this._u;i&&t.forEach(t=>{this.JS.OS(t,i.key(t.time))})}BS(){return this.JS.$S()}Gb(){this.uS?.()}attached(t){let{chart:i,series:e,requestUpdate:s,horzScaleBehavior:h}=t;this.Ev=i,this.xe=e,this._u=h;let r=this.xe.seriesType();if("Area"!==r&&"Line"!==r)throw Error("UpDownMarkersPrimitive is only supported for Area and Line series types");this.Zb=[new hz(this.xe,this.Ev.timeScale(),this.ys)],this.uS=s,this.Gb()}detached(){this.Ev=void 0,this.xe=void 0,this.uS=void 0}Kv(){return P(this.Ev)}O_(){return P(this.xe)}updateAllViews(){this.Zb.forEach(t=>t.kt(this.BS()))}paneViews(){return this.Zb}ht(t){if(!this.xe)throw Error("Primitive not attached to series");let i=this.xe.seriesType();this.XS.clear();let e=this._u;e&&t.forEach(t=>{eR(t)&&hk(0,i)&&this.XS.set(e.key(t.time),t.value)}),P(this.xe).setData(t)}kt(t,i){if(!this.xe||!this._u)throw Error("Primitive not attached to series");let e=this.xe.seriesType(),s=this._u.key(t.time);if(eN(t)&&this.XS.delete(s),eR(t)&&hk(0,e)){var h,r;let i=this.XS.get(s);i&&this.JS.OS({time:t.time,value:t.value,sign:(h=t.value,h===(r=i)?0:h-r>0?1:-1)},s,this.ys.updateVisibilityDuration)}P(this.xe).update(t,i)}QS(){this.JS.US()}}class hR extends hu{setData(t){return this.Yh.ht(t)}update(t,i){return this.Yh.kt(t,i)}markers(){return this.Yh.BS()}setMarkers(t){return this.Yh.SS(t)}clearMarkers(){return this.Yh.QS()}}function hB(t,i={}){return new hR(t,new hN(i))}let hT={...N,color:"#2196f3"};function hP(){return"5.0.9-dev+202512121628"}}}]);