"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9124,8401],{7917:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>p,contentTitle:()=>d,default:()=>b,frontMatter:()=>c,metadata:()=>u,toc:()=>m});var a=n(58168),r=(n(96540),n(15680)),i=n(78478),o=n(5546),s=n(97338);const l="// if using esm version (installed via npm):\nimport { createChart } from 'lightweight-charts';\n\n// If using standalone version (loaded via a script tag):\n// const { createChart } = LightweightCharts;\n\n(function() {\n\t// Styles for the custom element\n\tconst elementStyles = `\n                    :host {\n                        display: block;\n                    }\n                    :host[hidden] {\n                        display: none;\n                    }\n                    .chart-container {\n                        height: 100%;\n                        width: 100%;\n                    }\n                `;\n\n\t// Class definition for the custom element\n\tclass LightweightChartWC extends HTMLElement {\n\t\t// Attributes to observe. When changes occur, `attributeChangedCallback` is called.\n\t\tstatic get observedAttributes() {\n\t\t\treturn ['type', 'autosize'];\n\t\t}\n\n\t\t// Helper function to get the series constructor name from a chart type\n\t\t// eg. 'line' -> 'addLineSeries'\n\t\tstatic getChartSeriesConstructorName(type) {\n\t\t\treturn `add${type.charAt(0).toUpperCase() + type.slice(1)}Series`;\n\t\t}\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.chart = undefined;\n\t\t\tthis.series = undefined;\n\t\t\tthis.__data = [];\n\t\t\tthis._resizeEventHandler = () => this._resizeHandler();\n\t\t}\n\n\t\t/**\n\t\t * `connectedCallback()` fires when the element is inserted into the DOM.\n\t\t */\n\t\tconnectedCallback() {\n\t\t\tthis.attachShadow({ mode: 'open' });\n\n\t\t\t/**\n\t\t\t * Attributes you may want to set, but should only change if\n\t\t\t * not already specified.\n\t\t\t */\n\t\t\t// if (!this.hasAttribute('tabindex'))\n\t\t\t// this.setAttribute('tabindex', -1);\n\n\t\t\t// A user may set a property on an _instance_ of an element,\n\t\t\t// before its prototype has been connected to this class.\n\t\t\t// The `_upgradeProperty()` method will check for any instance properties\n\t\t\t// and run them through the proper class setters.\n\t\t\tthis._upgradeProperty('type');\n\t\t\tthis._upgradeProperty('autosize');\n\n\t\t\t// We load the data attribute before creating the chart\n\t\t\t// so the `setTypeAndData` method can have an initial value.\n\t\t\tthis._tryLoadInitialProperty('data');\n\n\t\t\t// Create the div container for the chart\n\t\t\tconst container = document.createElement('div');\n\t\t\tcontainer.setAttribute('class', 'chart-container');\n\t\t\t// create the stylesheet for the custom element\n\t\t\tconst style = document.createElement('style');\n\t\t\tstyle.textContent = elementStyles;\n\t\t\tthis.shadowRoot.append(style, container);\n\n\t\t\t// Create the Lightweight Chart\n\t\t\tthis.chart = createChart(container);\n\t\t\tthis.setTypeAndData();\n\n\t\t\t// Read initial values using attributes and then clear the attributes\n\t\t\t// since we don't want to 'reflect' data properties onto the elements\n\t\t\t// attributes.\n\t\t\tconst richDataProperties = [\n\t\t\t\t'options',\n\t\t\t\t'series-options',\n\t\t\t\t'pricescale-options',\n\t\t\t\t'timescale-options',\n\t\t\t];\n\t\t\trichDataProperties.forEach(propertyName => {\n\t\t\t\tthis._tryLoadInitialProperty(propertyName);\n\t\t\t});\n\n\t\t\tif (this.autosize) {\n\t\t\t\twindow.addEventListener('resize', this._resizeEventHandler);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Any data properties which are provided as JSON string values\n\t\t * when the component is attached to the DOM will be used as the\n\t\t * initial values for those properties.\n\t\t *\n\t\t * Note: once the component is attached, then any changes to these\n\t\t * attributes will be ignored (not observed), and should rather be\n\t\t * set using the property directly.\n\t\t */\n\t\t_tryLoadInitialProperty(name) {\n\t\t\tif (this.hasAttribute(name)) {\n\t\t\t\tconst valueString = this.getAttribute(name);\n\t\t\t\tlet value;\n\t\t\t\ttry {\n\t\t\t\t\tvalue = JSON.parse(valueString);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t`Unable to read attribute ${name}'s value during initialisation.`\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// change kebab case attribute name to camel case.\n\t\t\t\tconst propertyName = name\n\t\t\t\t\t.split('-')\n\t\t\t\t\t.map((text, index) => {\n\t\t\t\t\t\tif (index < 1) {return text;}\n\t\t\t\t\t\treturn `${text.charAt(0).toUpperCase()}${text.slice(1)}`;\n\t\t\t\t\t})\n\t\t\t\t\t.join('');\n\t\t\t\tthis[propertyName] = value;\n\t\t\t\tthis.removeAttribute(name);\n\t\t\t}\n\t\t}\n\n\t\t// Create a chart series (according to the 'type' attribute) and set it's data.\n\t\tsetTypeAndData() {\n\t\t\tif (this.series && this.chart) {\n\t\t\t\tthis.chart.removeSeries(this.series);\n\t\t\t}\n\t\t\tthis.series =\n\t\t\t\tthis.chart[\n\t\t\t\t\tLightweightChartWC.getChartSeriesConstructorName(this.type)\n\t\t\t\t]();\n\t\t\tthis.series.setData(this.data);\n\t\t}\n\n\t\t_upgradeProperty(prop) {\n\t\t\tif (this.hasOwnProperty(prop)) {\n\t\t\t\tconst value = this[prop];\n\t\t\t\tdelete this[prop];\n\t\t\t\tthis[prop] = value;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * `disconnectedCallback()` fires when the element is removed from the DOM.\n\t\t * It's a good place to do clean up work like releasing references and\n\t\t * removing event listeners.\n\t\t */\n\t\tdisconnectedCallback() {\n\t\t\tif (this.chart) {\n\t\t\t\tthis.chart.remove();\n\t\t\t\tthis.chart = null;\n\t\t\t}\n\t\t\twindow.removeEventListener('resize', this._resizeEventHandler);\n\t\t}\n\n\t\t/**\n\t\t * Reflected Properties\n\t\t *\n\t\t * These Properties and their corresponding attributes should mirror one another.\n\t\t */\n\t\tset type(value) {\n\t\t\tthis.setAttribute('type', value || 'line');\n\t\t}\n\n\t\tget type() {\n\t\t\treturn this.getAttribute('type') || 'line';\n\t\t}\n\n\t\tset autosize(value) {\n\t\t\tconst autosize = Boolean(value);\n\t\t\tif (autosize) {this.setAttribute('autosize', '');} else {this.removeAttribute('autosize');}\n\t\t}\n\n\t\tget autosize() {\n\t\t\treturn this.hasAttribute('autosize');\n\t\t}\n\n\t\t/**\n\t\t * Rich Data Properties\n\t\t *\n\t\t * These Properties are not reflected to a corresponding attribute.\n\t\t */\n\t\tset data(value) {\n\t\t\tlet newData = value;\n\t\t\tif (typeof newData !== 'object' || !Array.isArray(newData)) {\n\t\t\t\tnewData = [];\n\t\t\t\tconsole.warn('Lightweight Charts: Data should be an array');\n\t\t\t}\n\t\t\tthis.__data = newData;\n\t\t\tif (this.series) {\n\t\t\t\tthis.series.setData(this.__data);\n\t\t\t}\n\t\t}\n\n\t\tget data() {\n\t\t\treturn this.__data;\n\t\t}\n\n\t\tset options(value) {\n\t\t\tif (!this.chart) {return;}\n\t\t\tthis.chart.applyOptions(value);\n\t\t}\n\n\t\tget options() {\n\t\t\tif (!this.chart) {return null;}\n\t\t\treturn this.chart.options();\n\t\t}\n\n\t\tset seriesOptions(value) {\n\t\t\tif (!this.series) {return;}\n\t\t\tthis.series.applyOptions(value);\n\t\t}\n\n\t\tget seriesOptions() {\n\t\t\tif (!this.series) {return null;}\n\t\t\treturn this.series.options();\n\t\t}\n\n\t\tset priceScaleOptions(value) {\n\t\t\tif (!this.chart) {return;}\n\t\t\tthis.chart.priceScale().applyOptions(value);\n\t\t}\n\n\t\tget priceScaleOptions() {\n\t\t\tif (!this.series) {return null;}\n\t\t\treturn this.chart.priceScale().options();\n\t\t}\n\n\t\tset timeScaleOptions(value) {\n\t\t\tif (!this.chart) {return;}\n\t\t\tthis.chart.timeScale().applyOptions(value);\n\t\t}\n\n\t\tget timeScaleOptions() {\n\t\t\tif (!this.series) {return null;}\n\t\t\treturn this.chart.timeScale().options();\n\t\t}\n\n\t\t/**\n\t\t * `attributeChangedCallback()` is called when any of the attributes in the\n\t\t * `observedAttributes` array are changed.\n\t\t */\n\t\tattributeChangedCallback(name, _oldValue, newValue) {\n\t\t\tif (!this.chart) {return;}\n\t\t\tconst hasValue = newValue !== null;\n\t\t\tswitch (name) {\n\t\t\t\tcase 'type':\n\t\t\t\t\tthis.data = [];\n\t\t\t\t\tthis.setTypeAndData();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'autosize':\n\t\t\t\t\tif (hasValue) {\n\t\t\t\t\t\twindow.addEventListener('resize', () => this._resizeEventHandler);\n\t\t\t\t\t\t// call once when added to an existing element\n\t\t\t\t\t\tthis._resizeEventHandler();\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.removeEventListener('resize', this._resizeEventHandler);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t_resizeHandler() {\n\t\t\tconst container = this.shadowRoot.querySelector('div.chart-container');\n\t\t\tif (!this.chart || !container) {return;}\n\t\t\tconst dimensions = container.getBoundingClientRect();\n\t\t\tthis.chart.resize(dimensions.width, dimensions.height);\n\t\t}\n\t}\n\n\twindow.customElements.define('lightweight-chart', LightweightChartWC);\n})();\n",h="import './lw-chart.js';\nimport { themeColors } from '../../../theme-colors';\n\n(function() {\n\tconst template = document.createElement('template');\n\ttemplate.innerHTML = `\n    <style>\n    :host {\n        display: block;\n    }\n    :host[hidden] {\n        display: none;\n    }\n    #example {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n    }\n    #chart {\n        flex-grow: 1;\n    }\n    #buttons {\n        flex-direction: row;\n    }\n    button {\n        border-radius: 8px;\n        border: 1px solid transparent;\n        padding: 0.5em 1em;\n        font-size: 1em;\n        font-weight: 500;\n        font-family: inherit;\n        background-color: var(--hero-button-background-color-active, #e9e9e9);\n        color: var(--hero-button-text-color, #e9e9e9);\n        cursor: pointer;\n        transition: border-color 0.25s;\n        margin-left: 0.5em;\n      }\n      button:hover {\n        border-color: #3179F5;\n        background-color: var(--hero-button-background-color-hover);\n        color: var(--hero-button-text-color-hover-active);\n      }\n      button:focus,\n      button:focus-visible {\n        outline: 4px auto -webkit-focus-ring-color;\n      }\n        \n      #example-chart {\n        height: var(--lwchart-height, 300px);\n      }\n    </style>\n    <div id=\"example\">\n        <div id=\"example-container\">\n            <lightweight-chart id=\"example-chart\"\n                autosize\n                type=\"line\"\n            ></lightweight-chart>\n        </div>\n        <div id=\"buttons\">\n            <button id=\"change-colours-button\" type=\"button\">Set Random Colors</button>\n            <button id=\"change-type-button\" type=\"button\">Change Chart Type</button>\n            <button id=\"change-data-button\" type=\"button\">Change Data</button>\n        </div>\n    </div>\n  `;\n\n\tfunction generateSampleData(ohlc) {\n\t\tconst randomFactor = 25 + Math.random() * 25;\n\t\tconst samplePoint = i =>\n\t\t\ti *\n\t\t\t\t(0.5 +\n\t\t\t\t\tMath.sin(i / 10) * 0.2 +\n\t\t\t\t\tMath.sin(i / 20) * 0.4 +\n\t\t\t\t\tMath.sin(i / randomFactor) * 0.8 +\n\t\t\t\t\tMath.sin(i / 500) * 0.5) +\n\t\t\t200;\n\n\t\tconst res = [];\n\t\tconst date = new Date(Date.UTC(2018, 0, 1, 0, 0, 0, 0));\n\t\tconst numberOfPoints = ohlc ? 100 : 500;\n\t\tfor (let i = 0; i < numberOfPoints; ++i) {\n\t\t\tconst time = date.getTime() / 1000;\n\t\t\tconst value = samplePoint(i);\n\t\t\tif (ohlc) {\n\t\t\t\tconst randomRanges = [\n\t\t\t\t\t-1 * Math.random(),\n\t\t\t\t\tMath.random(),\n\t\t\t\t\tMath.random(),\n\t\t\t\t].map(j => j * 10);\n\t\t\t\tconst sign = Math.sin(Math.random() - 0.5);\n\t\t\t\tres.push({\n\t\t\t\t\ttime,\n\t\t\t\t\tlow: value + randomRanges[0],\n\t\t\t\t\thigh: value + randomRanges[1],\n\t\t\t\t\topen: value + sign * randomRanges[2],\n\t\t\t\t\tclose: samplePoint(i + 1),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tres.push({\n\t\t\t\t\ttime,\n\t\t\t\t\tvalue,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdate.setUTCDate(date.getUTCDate() + 1);\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tconst randomShade = () => Math.round(Math.random() * 255);\n\n\tconst randomColor = (alpha = 1) =>\n\t\t`rgba(${randomShade()}, ${randomShade()}, ${randomShade()}, ${alpha})`;\n\n\tconst colorsTypeMap = {\n\t\tarea: [\n\t\t\t['topColor', 0.4],\n\t\t\t['bottomColor', 0],\n\t\t\t['lineColor', 1],\n\t\t],\n\t\tbar: [\n\t\t\t['upColor', 1],\n\t\t\t['downColor', 1],\n\t\t],\n\t\tbaseline: [\n\t\t\t['topFillColor1', 0.28],\n\t\t\t['topFillColor2', 0.05],\n\t\t\t['topLineColor', 1],\n\t\t\t['bottomFillColor1', 0.28],\n\t\t\t['bottomFillColor2', 0.05],\n\t\t\t['bottomLineColor', 1],\n\t\t],\n\t\tcandlestick: [\n\t\t\t['upColor', 1],\n\t\t\t['downColor', 1],\n\t\t\t['borderUpColor', 1],\n\t\t\t['borderDownColor', 1],\n\t\t\t['wickUpColor', 1],\n\t\t\t['wickDownColor', 1],\n\t\t],\n\t\thistogram: [['color', 1]],\n\t\tline: [['color', 1]],\n\t};\n\n\tconst checkPageTheme = () =>\n\t\tdocument.documentElement.getAttribute('data-theme') === 'dark';\n\n\tclass LightweightChartExampleWC extends HTMLElement {\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.chartElement = undefined;\n\t\t}\n\n\t\tconnectedCallback() {\n\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\tthis.shadowRoot.appendChild(template.content.cloneNode(true));\n\n\t\t\tthis.changeChartTheme(checkPageTheme());\n\n\t\t\tif (window.MutationObserver) {\n\t\t\t\tconst callback = _ => {\n\t\t\t\t\tthis.changeChartTheme(checkPageTheme());\n\t\t\t\t};\n\t\t\t\tthis.observer = new window.MutationObserver(callback);\n\t\t\t\tthis.observer.observe(document.documentElement, { attributes: true });\n\t\t\t}\n\n\t\t\tthis.chartElement = this.shadowRoot.querySelector('#example-chart');\n\t\t\tthis._changeData();\n\n\t\t\tthis.addButtonClickHandlers();\n\t\t\tthis.chartElement.chart.timeScale().fitContent();\n\t\t}\n\n\t\taddButtonClickHandlers() {\n\t\t\tthis.changeColours = () => this._changeColours();\n\t\t\tthis.changeType = () => this._changeType();\n\t\t\tthis.changeData = () => this._changeData();\n\t\t\tthis.shadowRoot\n\t\t\t\t.querySelector('#change-colours-button')\n\t\t\t\t.addEventListener('click', this.changeColours);\n\t\t\tthis.shadowRoot\n\t\t\t\t.querySelector('#change-type-button')\n\t\t\t\t.addEventListener('click', this.changeType);\n\t\t\tthis.shadowRoot\n\t\t\t\t.querySelector('#change-data-button')\n\t\t\t\t.addEventListener('click', this.changeData);\n\t\t}\n\n\t\tremoveButtonClickHandlers() {\n\t\t\tif (this.changeColours) {\n\t\t\t\tthis.shadowRoot\n\t\t\t\t\t.querySelector('#change-colours-button')\n\t\t\t\t\t.removeEventListener('click', this.changeColours);\n\t\t\t}\n\t\t\tif (this.changeType) {\n\t\t\t\tthis.shadowRoot\n\t\t\t\t\t.querySelector('#change-type-button')\n\t\t\t\t\t.removeEventListener('click', this.changeType);\n\t\t\t}\n\t\t\tif (this.changeData) {\n\t\t\t\tthis.shadowRoot\n\t\t\t\t\t.querySelector('#change-data-button')\n\t\t\t\t\t.removeEventListener('click', this.changeData);\n\t\t\t}\n\t\t}\n\n\t\t_changeColours() {\n\t\t\tif (!this.chartElement) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst options = {};\n\t\t\tconst colorsToSet = colorsTypeMap[this.chartElement.type];\n\t\t\tcolorsToSet.forEach(c => {\n\t\t\t\toptions[c[0]] = randomColor(c[1]);\n\t\t\t});\n\t\t\tthis.chartElement.seriesOptions = options;\n\t\t}\n\n\t\t_changeData() {\n\t\t\tif (!this.chartElement) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst candlestickTypeData = ['candlestick', 'bar'].includes(\n\t\t\t\tthis.chartElement.type\n\t\t\t);\n\t\t\tconst newData = generateSampleData(candlestickTypeData);\n\t\t\tthis.chartElement.data = newData;\n\t\t\tif (this.chartElement.type === 'baseline') {\n\t\t\t\tconst average =\n\t\t\t\t\tnewData.reduce((s, c) => s + c.value, 0) / newData.length;\n\t\t\t\tthis.chartElement.seriesOptions = {\n\t\t\t\t\tbaseValue: { type: 'price', price: average },\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t_changeType() {\n\t\t\tif (!this.chartElement) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst types = [\n\t\t\t\t'line',\n\t\t\t\t'area',\n\t\t\t\t'baseline',\n\t\t\t\t'histogram',\n\t\t\t\t'candlestick',\n\t\t\t\t'bar',\n\t\t\t].filter(t => t !== this.chartElement.type);\n\t\t\tconst randIndex = Math.round(Math.random() * (types.length - 1));\n\t\t\tthis.chartElement.type = types[randIndex];\n\t\t\tthis._changeData();\n\n\t\t\t// call a method on the component.\n\t\t\tthis.chartElement.chart.timeScale().fitContent();\n\t\t}\n\n\t\tdisconnectedCallback() {}\n\n\t\tchangeChartTheme(isDark) {\n\t\t\tif (!this.chartElement) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst theme = isDark ? themeColors.DARK : themeColors.LIGHT;\n\t\t\tconst gridColor = isDark ? '#424F53' : '#D6DCDE';\n\t\t\tthis.chartElement.options = {\n\t\t\t\tlayout: {\n\t\t\t\t\ttextColor: theme.CHART_TEXT_COLOR,\n\t\t\t\t\tbackground: {\n\t\t\t\t\t\tcolor: theme.CHART_BACKGROUND_COLOR,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tvertLines: {\n\t\t\t\t\t\tcolor: gridColor,\n\t\t\t\t\t},\n\t\t\t\t\thorzLines: {\n\t\t\t\t\t\tcolor: gridColor,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\n\twindow.customElements.define(\n\t\t'lightweight-chart-example',\n\t\tLightweightChartExampleWC\n\t);\n})();\n",c={title:"Web Components - Custom Element",description:"A simple example of how to use Lightweight Charts\u2122 within the Web component custom element.",pagination_prev:null,pagination_next:null,keywords:["web component","custom element","example"]},d="Web Components - Custom Element",u={unversionedId:"webcomponents/custom-element",id:"webcomponents/custom-element",title:"Web Components - Custom Element",description:"A simple example of how to use Lightweight Charts\u2122 within the Web component custom element.",source:"@site/tutorials/webcomponents/01-custom-element.mdx",sourceDirName:"webcomponents",slug:"/webcomponents/custom-element",permalink:"/lightweight-charts/tutorials/webcomponents/custom-element",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Web Components - Custom Element",description:"A simple example of how to use Lightweight Charts\u2122 within the Web component custom element.",pagination_prev:null,pagination_next:null,keywords:["web component","custom element","example"]},sidebar:"tutorialsSidebar"},p={},m=[{value:"About the example custom element",id:"about-the-example-custom-element",level:2},{value:"Component showcase",id:"component-showcase",level:3},{value:"Creating the chart",id:"creating-the-chart",level:2},{value:"Attributes and properties",id:"attributes-and-properties",level:2},{value:"Attributes",id:"attributes",level:3},{value:"Properties",id:"properties",level:3},{value:"Accessing the chart instance or additional methods",id:"accessing-the-chart-instance-or-additional-methods",level:2},{value:"Using a Custom Element",id:"using-a-custom-element",level:2},{value:"Standalone script example html file",id:"standalone-script-example-html-file",level:3},{value:"Complete Sample Code",id:"complete-sample-code",level:2},{value:"Wrapper Custom Element",id:"wrapper-custom-element",level:3},{value:"Example Usage Custom Element",id:"example-usage-custom-element",level:3}],g={toc:m},y="wrapper";function b(t){let{components:e,...c}=t;return(0,r.yg)(y,(0,a.A)({},g,c,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"web-components---custom-element"},"Web Components - Custom Element"),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"The following describes a relatively simple example that only allows for a\nsingle ",(0,r.yg)("a",{parentName:"p",href:"/docs/series-types"},"series")," to be rendered. This example can be used as\na starting point, and could be tweaked further using our extensive\n",(0,r.yg)("a",{parentName:"p",href:"/docs/api"},"API"),".")),(0,r.yg)("p",null,"This guide will focus on the key concepts required to get Lightweight Charts\u2122\nrunning within a Vanilla JS web component (using\n",(0,r.yg)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements"},"custom elements"),").\nPlease note this guide is not intended as a complete step-by-step tutorial. The\nexample web component custom element can be found at the\n",(0,r.yg)("a",{parentName:"p",href:"#complete-sample-code"},"bottom")," of this guide."),(0,r.yg)("p",null,"If you are new to Web Components then please have a look at the following\nresources before proceeding further with this example."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements"},"MDN: Using Custom Elements")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://web.dev/custom-elements-best-practices/"},"Custom Elements Best Practices")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://open-wc.org"},"Open Web Components"))),(0,r.yg)("h2",{id:"about-the-example-custom-element"},"About the example custom element"),(0,r.yg)("p",null,"The example Web Components custom element has the following features."),(0,r.yg)("p",null,"The ability to:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"specify the series type via a component attribute,"),(0,r.yg)("li",{parentName:"ul"},"specify the series data via a component property,"),(0,r.yg)("li",{parentName:"ul"},"control the chart, series, time scale, and price scale options via properties,"),(0,r.yg)("li",{parentName:"ul"},"enable automatic resizing of the chart when the browser is resized.")),(0,r.yg)("p",null,"The example may not fit your requirements completely. Creating a general-purpose\ndeclarative wrapper for Lightweight Charts\u2122 imperative API is a challenge, but\nhopefully, you can adapt this example to your use case."),(0,r.yg)("h3",{id:"component-showcase"},"Component showcase"),(0,r.yg)("p",null,"Presented below is the finished wrapper custom element which is discussed\nthroughout this guide. The interactive buttons beneath the chart are showcasing\nhow to interact with the component and that code is provided below as well\n(within the example app custom element)."),(0,r.yg)(i.A,{fallback:(0,r.yg)("div",null,"Loading..."),mdxType:"BrowserOnly"},(()=>(n(52170),(0,r.yg)("lightweight-chart-example",null)))),(0,r.yg)("h2",{id:"creating-the-chart"},"Creating the chart"),(0,r.yg)("p",null,"Web Components are a suite of different technologies which allow you to\nencapsulate functionality within custom elements.\n",(0,r.yg)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements"},"Custom elements"),"\nmake use of the standard web languages ",(0,r.yg)("inlineCode",{parentName:"p"},"html"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"css"),", and ",(0,r.yg)("inlineCode",{parentName:"p"},"js")," which means that\nthere aren't many specific changes, or extra knowledge, required to get\nLightweight Charts\u2122 working within a custom element."),(0,r.yg)("p",null,"The process of creating a chart is essentially the same as when using the\nlibrary normally, except that we are encapsulating all the ",(0,r.yg)("inlineCode",{parentName:"p"},"html"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"css"),", and\n",(0,r.yg)("inlineCode",{parentName:"p"},"js")," code specific to the chart within our custom element."),(0,r.yg)("p",null,"Starting with a simple boilerplate custom element, as shown below:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"(function() {\n    class LightweightChartWC extends HTMLElement {\n        connectedCallback() {\n            this.attachShadow({ mode: 'open' });\n        }\n\n        disconnectedCallback() {}\n    }\n\n    // Register our custom element with a specific tag name.\n    window.customElements.define('lightweight-chart', LightweightChartWC);\n})();\n")),(0,r.yg)("p",null,"The first step is to define the ",(0,r.yg)("inlineCode",{parentName:"p"},"html")," for the custom element. For Lightweight\nCharts, all we need to do is create a ",(0,r.yg)("inlineCode",{parentName:"p"},"div")," element to act as our container\nelement. You can create the html by cloning a ",(0,r.yg)("inlineCode",{parentName:"p"},"template")," (as seen in our usage\nexample below) or by imperatively using the DOM JS api as shown below:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// hide-start\nclass LightweightChartWC extends HTMLElement {\n    // ...\n    // hide-end\n    // Within the class definition\n    connectedCallback() {\n        // Create the div container for the chart\n        const container = document.createElement('div');\n        container.setAttribute('class', 'chart-container');\n\n        this.shadowRoot.append(container);\n    }\n    // hide-line\n}\n")),(0,r.yg)("p",null,"Next we will want to define some basic styles to ensure that the container\nelement fills the available space and that the element can be hidden using the\n",(0,r.yg)("inlineCode",{parentName:"p"},"hidden")," attribute."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// Outside of the Class definition\nconst elementStyles = `\n    :host {\n        display: block;\n    }\n    :host[hidden] {\n        display: none;\n    }\n    .chart-container {\n        height: 100%;\n        width: 100%;\n    }\n`;\n\n// ...\n\n// hide-start\nclass LightweightChartWC extends HTMLElement {\n    // ...\n    // hide-end\n    // Within the class definition\n    connectedCallback() {\n        // highlight-fade-start\n        // Create the div container for the chart\n        const container = document.createElement('div');\n        container.setAttribute('class', 'chart-container');\n        // highlight-fade-end\n        // create the stylesheet for the custom element\n        const style = document.createElement('style');\n        style.textContent = elementStyles;\n        this.shadowRoot.append(style, container);\n    }\n    // hide-line\n}\n")),(0,r.yg)("p",null,"Finally, we can now create the chart using Lightweight Charts\u2122. Depending on your\nbuild process, you may either need to import Lightweight Charts\u2122, or access it\nfrom the global scope (if loaded as a standalone script). To create the chart,\nwe call the ",(0,r.yg)("a",{parentName:"p",href:"/docs/api#createchart"},(0,r.yg)("inlineCode",{parentName:"a"},"createChart"))," constructor function, passing\nour container element as the first argument. The returned variable will be a\n",(0,r.yg)("a",{parentName:"p",href:"/docs/api/interfaces/IChartApi"},(0,r.yg)("inlineCode",{parentName:"a"},"IChartApi"))," instance which we can use as shown\nin the API documentation. The IChartApi instance provides all the required\nfunctionality to create series, assign data, and more. See our\n",(0,r.yg)("a",{parentName:"p",href:"/docs"},"Getting started")," guide for a quick example."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// hide-start\nclass LightweightChartWC extends HTMLElement {\n    // ...\n    // hide-end\n    connectedCallback() {\n        // highlight-fade-start\n        // Create the div container for the chart\n        const container = document.createElement('div');\n        container.setAttribute('class', 'chart-container');\n\n        // create the stylesheet for the custom element\n        const style = document.createElement('style');\n        style.textContent = elementStyles;\n        this.shadowRoot.append(style, container);\n        // highlight-fade-end\n\n        // Create the Lightweight Chart\n        this.chart = createChart(container);\n    }\n    // hide-line\n}\n")),(0,r.yg)("h2",{id:"attributes-and-properties"},"Attributes and properties"),(0,r.yg)("p",null,"Whilst we could encapsulate everything required to create a chart within the\ncustom element, generally we wish to allow further customisation of the chart to\nthe consumers of the custom element. Attributes and properties are a great way\nto provide this 'API' to the consumer."),(0,r.yg)("p",null,"As a general rule of thumb, it is better to use attributes for options which are\ndefined using simple values (number, string, boolean), and properties for rich\ndata types."),(0,r.yg)("p",null,"In our example, we will be using attributes for the series type option (type)\nand the autosize flag which enables automatic resizing of the chart when the\nwindow is resized. We will be using properties to provide the interfaces for\nsetting the series data, and options for the chart. Additionally, the IChartApi\ninstance will be accessable via the ",(0,r.yg)("inlineCode",{parentName:"p"},"chart")," property such that the consumer has\nfull access to the entire API provided by Lightweight Charts\u2122."),(0,r.yg)("h3",{id:"attributes"},"Attributes"),(0,r.yg)("p",null,"Attributes for the custom element can be set directly on the custom element\n(within the html), or via javascript as seen for the properties in the next\nsection."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-html"},'<lightweight-chart autosize type="area"></lightweight-chart>\n')),(0,r.yg)("p",null,"Attributes can be set and read from within the custom element's definition as\nfollows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// read `type` attribute\nconst type = this.getAttribute('type');\n\n// set `type` attribute\nthis.setAttribute('type', 'line');\n")),(0,r.yg)("p",null,"It is recommended that attributes be mirrored as properties on the custom\nelement (and reflected such that any changes appear on the html as well). This\ncan be achieved as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// hide-start\nclass LightweightChartWC extends HTMLElement {\n    // ...\n    // hide-end\n    // Within the class definition\n    set type(value) {\n        this.setAttribute('type', value || 'line');\n    }\n\n    get type() {\n        return this.getAttribute('type') || 'line';\n    }\n    // hide-line\n}\n")),(0,r.yg)("p",null,"We can observe any changes to an attribute by defining the static\n",(0,r.yg)("inlineCode",{parentName:"p"},"observedAttributes")," getter on the custom element and the\n",(0,r.yg)("inlineCode",{parentName:"p"},"attributeChangedCallback")," method on the class definition."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"class LightweightChartWC extends HTMLElement {\n    // Attributes to observe. When changes occur, `attributeChangedCallback` is called.\n    static get observedAttributes() {\n        return ['type', 'autosize'];\n    }\n\n    /**\n     * `attributeChangedCallback()` is called when any of the attributes in the\n     * `observedAttributes` array are changed.\n     */\n    attributeChangedCallback(name, _oldValue, newValue) {\n        if (!this.chart) {\n            return;\n        }\n        const hasValue = newValue !== null;\n        switch (name) {\n        case 'type':\n            // handle the changed attribute\n            break;\n        case 'autosize':\n            // handle the changed attribute\n            break;\n        }\n    }\n}\n")),(0,r.yg)("h3",{id:"properties"},"Properties"),(0,r.yg)("p",null,"Properties for the custom element are read and set through javascript on a\nreference to a custom element's instance. This instance can be created using\nstandard DOM methods such as ",(0,r.yg)("inlineCode",{parentName:"p"},"querySelector"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// Get a reference to an instance of the custom element on the page\nconst myChartElement = document.querySelector('lightweight-chart');\n\n// read the data property\nconst currentData = myChartElement.data;\n\n// set the seriesOptions property\nmyChartElement.seriesOptions = {\n    color: 'blue',\n};\n")),(0,r.yg)("p",null,"We can define setters and getters for the properties if we need more control\nover the property instead of it being just a value."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// hide-start\nclass LightweightChartWC extends HTMLElement {\n    // ...\n    // hide-end\n    // Within the class definition\n    set options(value) {\n        if (!this.chart) {\n            return;\n        }\n        this.chart.applyOptions(value);\n    }\n\n    get options() {\n        if (!this.chart) {\n            return null;\n        }\n        return this.chart.options();\n    }\n    // hide-line\n}\n")),(0,r.yg)("p",null,"As mentioned earlier, it is recommended that any API which accepts complex (or\nrich data) beyond a simple string, number, or boolean value should be property.\nHowever, since properties can only be set via javascript there may be cases\nwhere it would be preferable to define these values within the html markup. We\ncan provide an attribute interface for these properties which can be used to\ndefine the initial values, then remove those attributes from the markup and\nignore any further changes to those attributes."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// hide-line\nclass LightweightChartWC extends HTMLElement {\n    /**\n     * Any data properties which are provided as JSON string values\n     * when the component is attached to the DOM will be used as the\n     * initial values for those properties.\n     *\n     * Note: once the component is attached, then any changes to these\n     * attributes will be ignored (not observed), and should rather be\n     * set using the property directly.\n     */\n    _tryLoadInitialProperty(name) {\n        if (this.hasAttribute(name)) {\n            const valueString = this.getAttribute(name);\n            let value;\n            try {\n                value = JSON.parse(valueString);\n            } catch (error) {\n                console.error(\n                    `Unable to read attribute ${name}'s value during initialisation.`\n                );\n                return;\n            }\n            // change kebab case attribute name to camel case.\n            const propertyName = name\n                .split('-')\n                .map((text, index) => {\n                    if (index < 1) {\n                        return text;\n                    }\n                    return `${text.charAt(0).toUpperCase()}${text.slice(1)}`;\n                })\n                .join('');\n            this[propertyName] = value;\n            this.removeAttribute(name);\n        }\n    }\n\n    connectedCallback() {\n        // ...\n\n        // Read initial values using attributes and then clear the attributes\n        // since we don't want to 'reflect' data properties onto the elements\n        // attributes.\n        const richDataProperties = [\n            'options',\n            'series-options',\n            'pricescale-options',\n            'timescale-options',\n        ];\n        richDataProperties.forEach(propertyName => {\n            this._tryLoadInitialProperty(propertyName);\n        });\n    }\n    // hide-line\n}\n")),(0,r.yg)("p",null,"These attributes can be used to define the initial values for the properties as\nfollows (using JSON notation):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-html"},'<lightweight-chart\n    data=\'[{"time": "2022-09-14", "value": 123.45},{"time": "2022-09-15", "value": 123.45}]\'\n    series-options=\'{"color":"blue"}\'\n></lightweight-chart>\n')),(0,r.yg)("h2",{id:"accessing-the-chart-instance-or-additional-methods"},"Accessing the chart instance or additional methods"),(0,r.yg)("p",null,"The IChartApi instance will be accessible via the ",(0,r.yg)("inlineCode",{parentName:"p"},"chart")," property on the custom\nelement. This can be used by the consumer of the custom element to fully control\nthe chart within the element."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// Get a reference to an instance of the custom element on the page\nconst myChartElement = document.querySelector('lightweight-chart');\n\nconst chartApi = myChartElement.chart;\n\n// For example, call the `fitContent` method on the time scale\nchartApi.timeScale().fitContent();\n")),(0,r.yg)("h2",{id:"using-a-custom-element"},"Using a Custom Element"),(0,r.yg)("p",null,"Custom elements can be used just like any other normal html element after the\ncustom element has been defined and registered. The example custom element will\ndefine and register itself (using\n",(0,r.yg)("inlineCode",{parentName:"p"},"window.customElements.define('lightweight-chart', LightweightChartWC);"),") when\nthe script is loaded and executed, so all you need to do is include the script\ntag on the page."),(0,r.yg)("p",null,"Depending on your build step for your page, you may either need to import\nLightweight Charts\u2122 via an import statement, or access the library via the global\nvariable defined when using the standalone script version."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// if using esm version (installed via npm):\n// import { createChart } from 'lightweight-charts';\n\n// If using standalone version (loaded via a script tag):\nconst { createChart } = LightweightCharts;\n")),(0,r.yg)("p",null,"Similarily, the custom element can either be loaded via an 'side-effect' import\nstatement:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// side-effect import statement (use within a module js file)\nimport './lw-chart.js';\n")),(0,r.yg)("p",null," or via a script tag:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-html"},'<script src="lw-chart.js" defer><\/script>\n')),(0,r.yg)("p",null,"Once the custom element script has been loaded and executed then you can use the\ncustom element anywhere that you can use normal html, including within other\nframeworks like React, Vue, and Angular. See\n",(0,r.yg)("a",{parentName:"p",href:"https://custom-elements-everywhere.com"},"Custom Elements Everywhere")," for more\ninformation."),(0,r.yg)("h3",{id:"standalone-script-example-html-file"},"Standalone script example html file"),(0,r.yg)("p",null,"If you are loading the Lightweight Charts\u2122 library via the standalone script\nversion then you can also load the custom element via a script tag (see above\nsection for more info) and construct your html page as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="UTF-8" />\n        <meta\n            name="viewport"\n            content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0"\n        />\n        <title>Web component Example</title>\n        <script\n            type="text/javascript"\n            src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.development.js"\n        ><\/script>\n        <style>\n            #my-chart {\n                height: 100vh;\n                width: 100vw;\n            }\n        </style>\n    </head>\n\n    <body style="padding: 0; margin: 0">\n        <lightweight-chart\n            id="my-chart"\n            autosize\n            type="line"\n            series-options=\'{"color": "red"}\'\n            data=\'[{ "time": "2018-10-19", "value": 52.89 },{ "time": "2018-10-22", "value": 51.65 }]\'\n        ></lightweight-chart>\n\n        <script src="lw-chart.js" defer><\/script>\n    </body>\n</html>\n')),(0,r.yg)("h2",{id:"complete-sample-code"},"Complete Sample Code"),(0,r.yg)("p",null,"Presented below is the complete custom element source code for the Web\ncomponent. We have also provided a sample custom element component which\nshowcases how to make use of these components within a typical html page."),(0,r.yg)("h3",{id:"wrapper-custom-element"},"Wrapper Custom Element"),(0,r.yg)("p",null,"The following code block contains the source code for the wrapper custom\nelement."),(0,r.yg)("p",null,(0,r.yg)("a",{href:n(81380).A,download:"lw-chart.js",target:"\\_blank"},"Download file")),(0,r.yg)(s.A,{mdxType:"InstantDetails"},(0,r.yg)("summary",null,"Click here to reveal the code."),(0,r.yg)(o.Ay,{className:"language-js",mdxType:"CodeBlock"},l)),(0,r.yg)("h3",{id:"example-usage-custom-element"},"Example Usage Custom Element"),(0,r.yg)("p",null,"The following code block contains the source code for the custom element\nshowcasing how to use the above custom element."),(0,r.yg)("p",null,(0,r.yg)("a",{href:n(16577).A,download:"wc-example.js",target:"\\_blank"},"Download file")),(0,r.yg)(s.A,{mdxType:"InstantDetails"},(0,r.yg)("summary",null,"Click here to reveal the code."),(0,r.yg)(o.Ay,{className:"language-js",mdxType:"CodeBlock"},h)))}b.isMDXComponent=!0},5546:(t,e,n)=>{n.d(e,{Ay:()=>b});var a=n(96540),r=n(77964),i=n(78478),o=n(95293),s=n(55597),l=n(6715);function h(t,e,n){t.addEventListener("resize",(()=>{const t=e.getBoundingClientRect();n(t.width,t.height)}),!0)}const c={3.8:async t=>{const e=await n.e(3409).then(n.bind(n,73409));return{module:e,createChart:(n,a)=>{const r=e.createChart(n,a);return h(t,n,r.resize.bind(r)),r},createChartEx:void 0}},"4.0":async t=>{const e=await n.e(7476).then(n.bind(n,37476));return{module:e,createChart:(n,a)=>{const r=e.createChart(n,a);return h(t,n,r.resize.bind(r)),r},createChartEx:void 0}},4.1:async t=>{const e=await n.e(9631).then(n.bind(n,59631));return{module:e,createChart:(n,a)=>{const r=e.createChart(n,a);return h(t,n,r.resize.bind(r)),r},createChartEx:(n,a,r)=>{const i=e.createChartEx(n,a,r);return h(t,n,i.resize.bind(i)),i}}},current:async()=>{const t=await n.e(7839).then(n.bind(n,47839));return{module:t,createChart:(e,n)=>{const a=t.createChart(e,n);return h(window,e,a.resize.bind(a)),a},createChartEx:(e,n,a)=>{const r=t.createChartEx(e,n,a);return h(window,e,r.resize.bind(r)),r}}}},d="iframe_R_Fr";function u(t){const{script:e,iframeStyle:n}=t,{preferredVersion:r}=(0,s.g1)(),i=l&&l.length>0?l[0]:"",o=r?.name??i??"current",h=function(t){return`\n\t\t<style>\n\t\t\thtml,\n\t\t\tbody,\n\t\t\t#container {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\toverflow: hidden;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t</style>\n\t\t<div id="container"></div>\n\t\t<script>\n\t\t\twindow.run = () => {\n\t\t\t\t${t}\n\t\t\t};\n\t\t<\/script>\n\t`}(e),u=a.useRef(null);return a.useEffect((()=>{const t=u.current,e=t?.contentWindow,n=t?.contentDocument;if(null===t||!e||!n)return;const a=async()=>{try{const{module:t,createChart:n,createChartEx:a}=await c[o](e);Object.assign(e,t),e.createChart=n,e.createChartEx=a,e.run?.()}catch(t){console.error(t)}};if(void 0!==e.run)a();else{const e=()=>{a(),t.removeEventListener("load",e)};t.addEventListener("load",e)}}),[h]),a.createElement("iframe",{key:e,ref:u,srcDoc:h,className:d,style:n})}var p=n(82840);const m=()=>`${Math.random().toString(36).slice(2,11)}`;function g(t){return"string"==typeof t?t:function(){const[t,e]=(0,a.useState)("");return(0,a.useEffect)((()=>e(m())),[]),t}()}const y=Object.keys(p.k.DARK);const b=t=>{const{chart:e,replaceThemeConstants:n,hideableCode:s,chartOnly:l,chartOnTop:h=!1,iframeStyle:c,replaceTabs:m=!0,codeUsage:b,...w}=t;let{children:C}=t;const{colorMode:f}=(0,o.G)(),v="dark"===f,E=g();if(n&&"string"==typeof C&&(C=function(t,e){const n=e?p.k.DARK:p.k.LIGHT;let a=t;for(const r of y)a=a.replace(new RegExp(r,"g"),`'${n[r]}'`);return a}(C,v)),m&&"string"==typeof C&&(C=C.replace(/\t/g,"    ")),C=C.replace(new RegExp(/\/\/ delete-start[\w\W]*?\/\/ delete-end/,"gm"),""),e||s){const t=!l&&a.createElement(r.A,w,C),n=e&&a.createElement(i.A,{fallback:a.createElement("div",{className:d},"\xa0")},(()=>a.createElement(u,{script:C,iframeStyle:c}))),o=s&&a.createElement(a.Fragment,null,a.createElement("input",{id:E,type:"checkbox",className:"toggle-hidden-lines"}),a.createElement("label",{className:"toggle-label",htmlFor:E},"Show all code"));return h?a.createElement(a.Fragment,null,n,b,o,t):a.createElement(a.Fragment,null,b,o,t,n)}return a.createElement(r.A,w,C)}},97338:(t,e,n)=>{n.d(e,{A:()=>o});var a=n(20053),r=n(96540);const i={details:"details_G3qo"};function o(t){let{children:e}=t;return r.createElement("details",{className:(0,a.A)(i.details)},e)}},82840:(t,e,n)=>{n.d(e,{k:()=>a});const a={DARK:{CHART_BACKGROUND_COLOR:"black",CHART_BACKGROUND_RGB_COLOR:"0, 0, 0",LINE_LINE_COLOR:"#2962FF",LINE_LINE2_COLOR:"rgb(225, 87, 90)",LINE_LINE3_COLOR:"rgb(242, 142, 44)",LINE_LINE4_COLOR:"rgb(164, 89, 209)",LINE_LINE5_COLOR:"rgb(27, 156, 133)",AREA_TOP_COLOR:"#2962FF",AREA_BOTTOM_COLOR:"rgba(41, 98, 255, 0.28)",BAR_UP_COLOR:"#26a69a",BAR_DOWN_COLOR:"#ef5350",BASELINE_TOP_LINE_COLOR:"rgba( 38, 166, 154, 1)",BASELINE_TOP_FILL_COLOR1:"rgba( 38, 166, 154, 0.28)",BASELINE_TOP_FILL_COLOR2:"rgba( 38, 166, 154, 0.05)",BASELINE_BOTTOM_LINE_COLOR:"rgba( 239, 83, 80, 1)",BASELINE_BOTTOM_FILL_COLOR1:"rgba( 239, 83, 80, 0.05)",BASELINE_BOTTOM_FILL_COLOR2:"rgba( 239, 83, 80, 0.28)",HISTOGRAM_COLOR:"#26a69a",CHART_TEXT_COLOR:"white"},LIGHT:{CHART_BACKGROUND_COLOR:"white",CHART_BACKGROUND_RGB_COLOR:"255, 255, 255",LINE_LINE_COLOR:"#2962FF",LINE_LINE2_COLOR:"rgb(225, 87, 90)",LINE_LINE3_COLOR:"rgb(242, 142, 44)",LINE_LINE4_COLOR:"rgb(164, 89, 209)",LINE_LINE5_COLOR:"rgb(27, 156, 133)",AREA_TOP_COLOR:"#2962FF",AREA_BOTTOM_COLOR:"rgba(41, 98, 255, 0.28)",BAR_UP_COLOR:"#26a69a",BAR_DOWN_COLOR:"#ef5350",BASELINE_TOP_LINE_COLOR:"rgba( 38, 166, 154, 1)",BASELINE_TOP_FILL_COLOR1:"rgba( 38, 166, 154, 0.28)",BASELINE_TOP_FILL_COLOR2:"rgba( 38, 166, 154, 0.05)",BASELINE_BOTTOM_LINE_COLOR:"rgba( 239, 83, 80, 1)",BASELINE_BOTTOM_FILL_COLOR1:"rgba( 239, 83, 80, 0.05)",BASELINE_BOTTOM_FILL_COLOR2:"rgba( 239, 83, 80, 0.28)",HISTOGRAM_COLOR:"#26a69a",CHART_TEXT_COLOR:"black"}}},52170:(t,e,n)=>{n.r(e);var a=n(37055);!function(){class t extends HTMLElement{static get observedAttributes(){return["type","autosize"]}static getChartSeriesConstructorName(t){return`add${t.charAt(0).toUpperCase()+t.slice(1)}Series`}constructor(){super(),this.chart=void 0,this.series=void 0,this.__data=[],this._resizeEventHandler=()=>this._resizeHandler()}connectedCallback(){this.attachShadow({mode:"open"}),this._upgradeProperty("type"),this._upgradeProperty("autosize"),this._tryLoadInitialProperty("data");const t=document.createElement("div");t.setAttribute("class","chart-container");const e=document.createElement("style");e.textContent="\n                    :host {\n                        display: block;\n                    }\n                    :host[hidden] {\n                        display: none;\n                    }\n                    .chart-container {\n                        height: 100%;\n                        width: 100%;\n                    }\n                ",this.shadowRoot.append(e,t),this.chart=(0,a.R9)(t),this.setTypeAndData();["options","series-options","pricescale-options","timescale-options"].forEach((t=>{this._tryLoadInitialProperty(t)})),this.autosize&&window.addEventListener("resize",this._resizeEventHandler)}_tryLoadInitialProperty(t){if(this.hasAttribute(t)){const n=this.getAttribute(t);let a;try{a=JSON.parse(n)}catch(e){return void console.error(`Unable to read attribute ${t}'s value during initialisation.`)}this[t.split("-").map(((t,e)=>e<1?t:`${t.charAt(0).toUpperCase()}${t.slice(1)}`)).join("")]=a,this.removeAttribute(t)}}setTypeAndData(){this.series&&this.chart&&this.chart.removeSeries(this.series),this.series=this.chart[t.getChartSeriesConstructorName(this.type)](),this.series.setData(this.data)}_upgradeProperty(t){if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this[t]=e}}disconnectedCallback(){this.chart&&(this.chart.remove(),this.chart=null),window.removeEventListener("resize",this._resizeEventHandler)}set type(t){this.setAttribute("type",t||"line")}get type(){return this.getAttribute("type")||"line"}set autosize(t){Boolean(t)?this.setAttribute("autosize",""):this.removeAttribute("autosize")}get autosize(){return this.hasAttribute("autosize")}set data(t){let e=t;"object"==typeof e&&Array.isArray(e)||(e=[],console.warn("Lightweight Charts: Data should be an array")),this.__data=e,this.series&&this.series.setData(this.__data)}get data(){return this.__data}set options(t){this.chart&&this.chart.applyOptions(t)}get options(){return this.chart?this.chart.options():null}set seriesOptions(t){this.series&&this.series.applyOptions(t)}get seriesOptions(){return this.series?this.series.options():null}set priceScaleOptions(t){this.chart&&this.chart.priceScale().applyOptions(t)}get priceScaleOptions(){return this.series?this.chart.priceScale().options():null}set timeScaleOptions(t){this.chart&&this.chart.timeScale().applyOptions(t)}get timeScaleOptions(){return this.series?this.chart.timeScale().options():null}attributeChangedCallback(t,e,n){if(!this.chart)return;const a=null!==n;switch(t){case"type":this.data=[],this.setTypeAndData();break;case"autosize":a?(window.addEventListener("resize",(()=>this._resizeEventHandler)),this._resizeEventHandler()):window.removeEventListener("resize",this._resizeEventHandler)}}_resizeHandler(){const t=this.shadowRoot.querySelector("div.chart-container");if(!this.chart||!t)return;const e=t.getBoundingClientRect();this.chart.resize(e.width,e.height)}}window.customElements.define("lightweight-chart",t)}();var r=n(82840);!function(){const t=document.createElement("template");t.innerHTML='\n    <style>\n    :host {\n        display: block;\n    }\n    :host[hidden] {\n        display: none;\n    }\n    #example {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n    }\n    #chart {\n        flex-grow: 1;\n    }\n    #buttons {\n        flex-direction: row;\n    }\n    button {\n        border-radius: 8px;\n        border: 1px solid transparent;\n        padding: 0.5em 1em;\n        font-size: 1em;\n        font-weight: 500;\n        font-family: inherit;\n        background-color: var(--hero-button-background-color-active, #e9e9e9);\n        color: var(--hero-button-text-color, #e9e9e9);\n        cursor: pointer;\n        transition: border-color 0.25s;\n        margin-left: 0.5em;\n      }\n      button:hover {\n        border-color: #3179F5;\n        background-color: var(--hero-button-background-color-hover);\n        color: var(--hero-button-text-color-hover-active);\n      }\n      button:focus,\n      button:focus-visible {\n        outline: 4px auto -webkit-focus-ring-color;\n      }\n        \n      #example-chart {\n        height: var(--lwchart-height, 300px);\n      }\n    </style>\n    <div id="example">\n        <div id="example-container">\n            <lightweight-chart id="example-chart"\n                autosize\n                type="line"\n            ></lightweight-chart>\n        </div>\n        <div id="buttons">\n            <button id="change-colours-button" type="button">Set Random Colors</button>\n            <button id="change-type-button" type="button">Change Chart Type</button>\n            <button id="change-data-button" type="button">Change Data</button>\n        </div>\n    </div>\n  ';const e=()=>Math.round(255*Math.random()),n={area:[["topColor",.4],["bottomColor",0],["lineColor",1]],bar:[["upColor",1],["downColor",1]],baseline:[["topFillColor1",.28],["topFillColor2",.05],["topLineColor",1],["bottomFillColor1",.28],["bottomFillColor2",.05],["bottomLineColor",1]],candlestick:[["upColor",1],["downColor",1],["borderUpColor",1],["borderDownColor",1],["wickUpColor",1],["wickDownColor",1]],histogram:[["color",1]],line:[["color",1]]},a=()=>"dark"===document.documentElement.getAttribute("data-theme");class i extends HTMLElement{constructor(){super(),this.chartElement=void 0}connectedCallback(){if(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.changeChartTheme(a()),window.MutationObserver){const t=t=>{this.changeChartTheme(a())};this.observer=new window.MutationObserver(t),this.observer.observe(document.documentElement,{attributes:!0})}this.chartElement=this.shadowRoot.querySelector("#example-chart"),this._changeData(),this.addButtonClickHandlers(),this.chartElement.chart.timeScale().fitContent()}addButtonClickHandlers(){this.changeColours=()=>this._changeColours(),this.changeType=()=>this._changeType(),this.changeData=()=>this._changeData(),this.shadowRoot.querySelector("#change-colours-button").addEventListener("click",this.changeColours),this.shadowRoot.querySelector("#change-type-button").addEventListener("click",this.changeType),this.shadowRoot.querySelector("#change-data-button").addEventListener("click",this.changeData)}removeButtonClickHandlers(){this.changeColours&&this.shadowRoot.querySelector("#change-colours-button").removeEventListener("click",this.changeColours),this.changeType&&this.shadowRoot.querySelector("#change-type-button").removeEventListener("click",this.changeType),this.changeData&&this.shadowRoot.querySelector("#change-data-button").removeEventListener("click",this.changeData)}_changeColours(){if(!this.chartElement)return;const t={};n[this.chartElement.type].forEach((n=>{var a;t[n[0]]=(void 0===(a=n[1])&&(a=1),`rgba(${e()}, ${e()}, ${e()}, ${a})`)})),this.chartElement.seriesOptions=t}_changeData(){if(!this.chartElement)return;const t=function(t){const e=25+25*Math.random(),n=t=>t*(.5+.2*Math.sin(t/10)+.4*Math.sin(t/20)+.8*Math.sin(t/e)+.5*Math.sin(t/500))+200,a=[],r=new Date(Date.UTC(2018,0,1,0,0,0,0)),i=t?100:500;for(let o=0;o<i;++o){const e=r.getTime()/1e3,i=n(o);if(t){const t=[-1*Math.random(),Math.random(),Math.random()].map((t=>10*t)),r=Math.sin(Math.random()-.5);a.push({time:e,low:i+t[0],high:i+t[1],open:i+r*t[2],close:n(o+1)})}else a.push({time:e,value:i});r.setUTCDate(r.getUTCDate()+1)}return a}(["candlestick","bar"].includes(this.chartElement.type));if(this.chartElement.data=t,"baseline"===this.chartElement.type){const e=t.reduce(((t,e)=>t+e.value),0)/t.length;this.chartElement.seriesOptions={baseValue:{type:"price",price:e}}}}_changeType(){if(!this.chartElement)return;const t=["line","area","baseline","histogram","candlestick","bar"].filter((t=>t!==this.chartElement.type)),e=Math.round(Math.random()*(t.length-1));this.chartElement.type=t[e],this._changeData(),this.chartElement.chart.timeScale().fitContent()}disconnectedCallback(){}changeChartTheme(t){if(!this.chartElement)return;const e=t?r.k.DARK:r.k.LIGHT,n=t?"#424F53":"#D6DCDE";this.chartElement.options={layout:{textColor:e.CHART_TEXT_COLOR,background:{color:e.CHART_BACKGROUND_COLOR}},grid:{vertLines:{color:n},horzLines:{color:n}}}}}window.customElements.define("lightweight-chart-example",i)}()},81380:(t,e,n)=>{n.d(e,{A:()=>a});const a=n.p+"460c4ed53e62477b8a8948d170151b13.js"},16577:(t,e,n)=>{n.d(e,{A:()=>a});const a=n.p+"703ec77a6e27e9e8617c2a560bc5f77f.js"},6715:t=>{t.exports=["4.1","4.0","3.8"]}}]);