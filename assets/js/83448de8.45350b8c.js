"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[44991,18401],{19490:(t,e,n)=>{n.d(e,{Ay:()=>l});var a=n(58168),r=(n(96540),n(15680));const i={toc:[]},o="wrapper";function l(t){let{components:e,...n}=t;return(0,r.yg)(o,(0,a.A)({},i,n,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("details",null,(0,r.yg)("summary",null,"How to use the code sample"),(0,r.yg)("strong",null,"The code presented below requires:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"That ",(0,r.yg)("inlineCode",{parentName:"li"},"createChart")," has already been imported. See ",(0,r.yg)("a",{parentName:"li",href:"/docs#creating-a-chart"},"Getting Started")," for more information,"),(0,r.yg)("li",{parentName:"ul"},"and that there is an html div element on the page with an ",(0,r.yg)("inlineCode",{parentName:"li"},"id")," of ",(0,r.yg)("inlineCode",{parentName:"li"},"container"),".")),(0,r.yg)("p",null,"Here is an example skeleton setup: ",(0,r.yg)("a",{parentName:"p",href:"https://codesandbox.io/s/lightweight-charts-skeleton-n67pm6"},"Code Sandbox"),".\nYou can paste the provided code below the ",(0,r.yg)("inlineCode",{parentName:"p"},"// REPLACE EVERYTHING BELOW HERE")," comment."),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},"Some code may be hidden to improve readability. Toggle the checkbox above the code block to reveal all the code."))))}l.isMDXComponent=!0},349:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>u,contentTitle:()=>c,default:()=>C,frontMatter:()=>s,metadata:()=>d,toc:()=>m});var a=n(58168),r=(n(96540),n(15680)),i=n(19490),o=n(5546);const l="// remove-start\n// Lightweight Charts\u2122 Example: Realtime updates\n// https://tradingview.github.io/lightweight-charts/tutorials/demos/realtime-updates\n\n// remove-end\n\n// hide-start\nlet randomFactor = 25 + Math.random() * 25;\nconst samplePoint = i =>\n\ti *\n\t\t(0.5 +\n\t\t\tMath.sin(i / 1) * 0.2 +\n\t\t\tMath.sin(i / 2) * 0.4 +\n\t\t\tMath.sin(i / randomFactor) * 0.8 +\n\t\t\tMath.sin(i / 50) * 0.5) +\n\t200 +\n\ti * 2;\n\nfunction generateData(\n\tnumberOfCandles = 500,\n\tupdatesPerCandle = 5,\n\tstartAt = 100\n) {\n\tconst createCandle = (val, time) => ({\n\t\ttime,\n\t\topen: val,\n\t\thigh: val,\n\t\tlow: val,\n\t\tclose: val,\n\t});\n\n\tconst updateCandle = (candle, val) => ({\n\t\ttime: candle.time,\n\t\tclose: val,\n\t\topen: candle.open,\n\t\tlow: Math.min(candle.low, val),\n\t\thigh: Math.max(candle.high, val),\n\t});\n\n\trandomFactor = 25 + Math.random() * 25;\n\tconst date = new Date(Date.UTC(2018, 0, 1, 12, 0, 0, 0));\n\tconst numberOfPoints = numberOfCandles * updatesPerCandle;\n\tconst initialData = [];\n\tconst realtimeUpdates = [];\n\tlet lastCandle;\n\tlet previousValue = samplePoint(-1);\n\tfor (let i = 0; i < numberOfPoints; ++i) {\n\t\tif (i % updatesPerCandle === 0) {\n\t\t\tdate.setUTCDate(date.getUTCDate() + 1);\n\t\t}\n\t\tconst time = date.getTime() / 1000;\n\t\tlet value = samplePoint(i);\n\t\tconst diff = (value - previousValue) * Math.random();\n\t\tvalue = previousValue + diff;\n\t\tpreviousValue = value;\n\t\tif (i % updatesPerCandle === 0) {\n\t\t\tconst candle = createCandle(value, time);\n\t\t\tlastCandle = candle;\n\t\t\tif (i >= startAt) {\n\t\t\t\trealtimeUpdates.push(candle);\n\t\t\t}\n\t\t} else {\n\t\t\tconst newCandle = updateCandle(lastCandle, value);\n\t\t\tlastCandle = newCandle;\n\t\t\tif (i >= startAt) {\n\t\t\t\trealtimeUpdates.push(newCandle);\n\t\t\t} else if ((i + 1) % updatesPerCandle === 0) {\n\t\t\t\tinitialData.push(newCandle);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\tinitialData,\n\t\trealtimeUpdates,\n\t};\n}\n\nconst chartOptions = {\n\tlayout: {\n\t\ttextColor: CHART_TEXT_COLOR,\n\t\tbackground: { type: 'solid', color: CHART_BACKGROUND_COLOR },\n\t},\n\theight: 200,\n};\n// hide-end\nconst container = document.getElementById('container');\n// remove-line\n/** @type {import('lightweight-charts').IChartApi} */\nconst chart = createChart(container, chartOptions);\n\n// remove-start\n// Only needed within demo page\n// eslint-disable-next-line no-undef\nwindow.addEventListener('resize', () => {\n\tchart.applyOptions({ height: 200 });\n});\n// remove-end\n\nconst series = chart.addCandlestickSeries({\n\tupColor: BAR_UP_COLOR,\n\tdownColor: BAR_DOWN_COLOR,\n\tborderVisible: false,\n\twickUpColor: BAR_UP_COLOR,\n\twickDownColor: BAR_DOWN_COLOR,\n});\n\nconst data = generateData(2500, 20, 1000);\n\nseries.setData(data.initialData);\nchart.timeScale().fitContent();\nchart.timeScale().scrollToPosition(5);\n\n// simulate real-time data\nfunction* getNextRealtimeUpdate(realtimeData) {\n\tfor (const dataPoint of realtimeData) {\n\t\tyield dataPoint;\n\t}\n\treturn null;\n}\nconst streamingDataProvider = getNextRealtimeUpdate(data.realtimeUpdates);\n\nconst intervalID = setInterval(() => {\n\tconst update = streamingDataProvider.next();\n\tif (update.done) {\n\t\tclearInterval(intervalID);\n\t\treturn;\n\t}\n\tseries.update(update.value);\n}, 100);\n\n// hide-start\nconst styles = `\n    .buttons-container {\n        display: flex;\n        flex-direction: row;\n        gap: 8px;\n    }\n    .buttons-container button {\n        all: initial;\n        font-family: -apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu,\n            sans-serif;\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 510;\n        line-height: 24px; /* 150% */\n        letter-spacing: -0.32px;\n        padding: 8px 24px;\n        color: rgba(19, 23, 34, 1);\n        background-color: rgba(240, 243, 250, 1);\n        border-radius: 8px;\n        cursor: pointer;\n    }\n\n    .buttons-container button:hover {\n        background-color: rgba(224, 227, 235, 1);\n    }\n\n    .buttons-container button:active {\n        background-color: rgba(209, 212, 220, 1);\n    }\n`;\n\nconst stylesElement = document.createElement('style');\nstylesElement.innerHTML = styles;\ncontainer.appendChild(stylesElement);\n\nconst buttonsContainer = document.createElement('div');\nbuttonsContainer.classList.add('buttons-container');\n// hide-end\nconst button = document.createElement('button');\nbutton.innerText = 'Go to realtime';\nbutton.addEventListener('click', () => chart.timeScale().scrollToRealTime());\nbuttonsContainer.appendChild(button);\n\ncontainer.appendChild(buttonsContainer);\n",s={title:"Realtime updates",sidebar_label:"Realtime updates",description:"An example of how to handle realtime updates",pagination_prev:null,pagination_next:null,keywords:["realtime updates"]},c=void 0,d={unversionedId:"demos/realtime-updates",id:"demos/realtime-updates",title:"Realtime updates",description:"An example of how to handle realtime updates",source:"@site/tutorials/demos/realtime-updates.mdx",sourceDirName:"demos",slug:"/demos/realtime-updates",permalink:"/lightweight-charts/tutorials/demos/realtime-updates",draft:!1,tags:[],version:"current",frontMatter:{title:"Realtime updates",sidebar_label:"Realtime updates",description:"An example of how to handle realtime updates",pagination_prev:null,pagination_next:null,keywords:["realtime updates"]},sidebar:"tutorialsSidebar"},u={},m=[],p={toc:m},h="wrapper";function C(t){let{components:e,...n}=t;return(0,r.yg)(h,(0,a.A)({},p,n,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"This sample demonstrates how to mimic real-time updates on a candlestick chart\nwith Lightweight Charts\u2122. The chart initially populates with some historical\ndata. By using ",(0,r.yg)("inlineCode",{parentName:"p"},"setInterval")," function, the chart then begins to receive\nsimulated real-time updates with the usage of ",(0,r.yg)("inlineCode",{parentName:"p"},"series.update(...)"),"."),(0,r.yg)("p",null,'Each real-time update represents a new data point or modifies the latest point,\nproviding the illusion of a live, updating chart. If you scroll the chart and\nwish to return to the latest data points then you can use the "Go to realtime"\nbutton provided which calls the\n',(0,r.yg)("a",{parentName:"p",href:"/docs/api/interfaces/ITimeScaleApi#scrolltorealtime"},(0,r.yg)("inlineCode",{parentName:"a"},"scrollToRealtime"))," method\non the timescale."),(0,r.yg)(o.Ay,{replaceThemeConstants:!0,chart:!0,className:"language-js",hideableCode:!0,chartOnTop:!0,codeUsage:(0,r.yg)(i.Ay,{mdxType:"UsageGuidePartial"}),mdxType:"CodeBlock"},l))}C.isMDXComponent=!0},5546:(t,e,n)=>{n.d(e,{Ay:()=>O});var a=n(96540),r=n(77964),i=n(78478),o=n(95293),l=n(55597),s=n(6715);function c(t,e,n){t.addEventListener("resize",(()=>{const t=e.getBoundingClientRect();n(t.width,t.height)}),!0)}const d={3.8:async t=>{const e=await n.e(73409).then(n.bind(n,73409));return{module:e,createChart:(n,a)=>{const r=e.createChart(n,a);return c(t,n,r.resize.bind(r)),r},createChartEx:void 0}},"4.0":async t=>{const e=await n.e(37476).then(n.bind(n,37476));return{module:e,createChart:(n,a)=>{const r=e.createChart(n,a);return c(t,n,r.resize.bind(r)),r},createChartEx:void 0}},4.1:async t=>{const e=await n.e(59631).then(n.bind(n,59631));return{module:e,createChart:(n,a)=>{const r=e.createChart(n,a);return c(t,n,r.resize.bind(r)),r},createChartEx:(n,a,r)=>{const i=e.createChartEx(n,a,r);return c(t,n,i.resize.bind(i)),i}}},4.2:async t=>{const e=await n.e(90142).then(n.bind(n,90142));return{module:e,createChart:(n,a)=>{const r=e.createChart(n,a);return c(t,n,r.resize.bind(r)),r},createChartEx:(n,a,r)=>{const i=e.createChartEx(n,a,r);return c(t,n,i.resize.bind(i)),i}}},current:async()=>{const t=await n.e(47839).then(n.bind(n,47839));return{module:t,createChart:(e,n)=>{const a=t.createChart(e,n);return c(window,e,a.resize.bind(a)),a},createChartEx:(e,n,a)=>{const r=t.createChartEx(e,n,a);return c(window,e,r.resize.bind(r)),r}}}},u="iframe_R_Fr";function m(t){const{script:e,iframeStyle:n}=t,{preferredVersion:r}=(0,l.g1)(),i=s&&s.length>0?s[0]:"",o=r?.name??i??"current",c=function(t){return`\n\t\t<style>\n\t\t\thtml,\n\t\t\tbody,\n\t\t\t#container {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\toverflow: hidden;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t</style>\n\t\t<div id="container"></div>\n\t\t<script>\n\t\t\twindow.run = () => {\n\t\t\t\t${t}\n\t\t\t};\n\t\t<\/script>\n\t`}(e),m=a.useRef(null);return a.useEffect((()=>{const t=m.current,e=t?.contentWindow,n=t?.contentDocument;if(null===t||!e||!n)return;const a=async()=>{try{const{module:t,createChart:n,createChartEx:a}=await d[o](e);Object.assign(e,t),e.createChart=n,e.createChartEx=a,e.run?.()}catch(t){console.error(t)}};if(void 0!==e.run)a();else{const e=()=>{a(),t.removeEventListener("load",e)};t.addEventListener("load",e)}}),[c]),a.createElement("iframe",{key:e,ref:m,srcDoc:c,className:u,style:n})}var p=n(82840);function h(){const[t,e]=(0,a.useState)("");return(0,a.useEffect)((()=>e(`${Math.random().toString(36).slice(2,11)}`)),[]),t}const C=Object.keys(p.k.DARK);const O=t=>{const{chart:e,replaceThemeConstants:n,hideableCode:l,chartOnly:s,chartOnTop:c=!1,iframeStyle:d,replaceTabs:O=!0,codeUsage:g,...L}=t;let{children:_}=t;const{colorMode:b}=(0,o.G)(),E="dark"===b,R="string"==typeof y?y:h();var y;if(n&&"string"==typeof _&&(_=function(t,e){const n=e?p.k.DARK:p.k.LIGHT;let a=t;for(const r of C)a=a.replace(new RegExp(r,"g"),`'${n[r]}'`);return a}(_,E)),O&&"string"==typeof _&&(_=_.replace(/\t/g,"    ")),_=_.replace(new RegExp(/\/\/ delete-start[\w\W]*?\/\/ delete-end/,"gm"),""),e||l){const t=!s&&a.createElement(r.A,L,_),n=e&&a.createElement(i.A,{fallback:a.createElement("div",{className:u},"\xa0")},(()=>a.createElement(m,{script:_,iframeStyle:d}))),o=l&&a.createElement(a.Fragment,null,a.createElement("input",{id:R,type:"checkbox",className:"toggle-hidden-lines"}),a.createElement("label",{className:"toggle-label",htmlFor:R},"Show all code"));return c?a.createElement(a.Fragment,null,n,g,o,t):a.createElement(a.Fragment,null,g,o,t,n)}return a.createElement(r.A,L,_)}},82840:(t,e,n)=>{n.d(e,{k:()=>a});const a={DARK:{CHART_BACKGROUND_COLOR:"black",CHART_BACKGROUND_RGB_COLOR:"0, 0, 0",LINE_LINE_COLOR:"#2962FF",LINE_LINE2_COLOR:"rgb(225, 87, 90)",LINE_LINE3_COLOR:"rgb(242, 142, 44)",LINE_LINE4_COLOR:"rgb(164, 89, 209)",LINE_LINE5_COLOR:"rgb(27, 156, 133)",AREA_TOP_COLOR:"#2962FF",AREA_BOTTOM_COLOR:"rgba(41, 98, 255, 0.28)",BAR_UP_COLOR:"#26a69a",BAR_DOWN_COLOR:"#ef5350",BASELINE_TOP_LINE_COLOR:"rgba( 38, 166, 154, 1)",BASELINE_TOP_FILL_COLOR1:"rgba( 38, 166, 154, 0.28)",BASELINE_TOP_FILL_COLOR2:"rgba( 38, 166, 154, 0.05)",BASELINE_BOTTOM_LINE_COLOR:"rgba( 239, 83, 80, 1)",BASELINE_BOTTOM_FILL_COLOR1:"rgba( 239, 83, 80, 0.05)",BASELINE_BOTTOM_FILL_COLOR2:"rgba( 239, 83, 80, 0.28)",HISTOGRAM_COLOR:"#26a69a",CHART_TEXT_COLOR:"white"},LIGHT:{CHART_BACKGROUND_COLOR:"white",CHART_BACKGROUND_RGB_COLOR:"255, 255, 255",LINE_LINE_COLOR:"#2962FF",LINE_LINE2_COLOR:"rgb(225, 87, 90)",LINE_LINE3_COLOR:"rgb(242, 142, 44)",LINE_LINE4_COLOR:"rgb(164, 89, 209)",LINE_LINE5_COLOR:"rgb(27, 156, 133)",AREA_TOP_COLOR:"#2962FF",AREA_BOTTOM_COLOR:"rgba(41, 98, 255, 0.28)",BAR_UP_COLOR:"#26a69a",BAR_DOWN_COLOR:"#ef5350",BASELINE_TOP_LINE_COLOR:"rgba( 38, 166, 154, 1)",BASELINE_TOP_FILL_COLOR1:"rgba( 38, 166, 154, 0.28)",BASELINE_TOP_FILL_COLOR2:"rgba( 38, 166, 154, 0.05)",BASELINE_BOTTOM_LINE_COLOR:"rgba( 239, 83, 80, 1)",BASELINE_BOTTOM_FILL_COLOR1:"rgba( 239, 83, 80, 0.05)",BASELINE_BOTTOM_FILL_COLOR2:"rgba( 239, 83, 80, 0.28)",HISTOGRAM_COLOR:"#26a69a",CHART_TEXT_COLOR:"black"}}},6715:t=>{t.exports=JSON.parse('["4.2","4.1","4.0","3.8"]')}}]);