import{q as u,n as f}from"./lightweight-charts.production-Co-rHmTL.js";import{g as x}from"./sample-data-x_8-FZm1.js";import{a as l}from"./positions-t2UKkghX.js";class P{_data;constructor(t){this._data=t}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._data.x===null||this._data.top===null)return;const a=e.context,i=l(this._data.x,this._data.x+this._data.width,e.horizontalPixelRatio),h=l(this._data.top,this._data.top-this._data.columnHeight*this._data.items.length,e.verticalPixelRatio);a.fillStyle="rgba(0, 0, 255, 0.2)",a.fillRect(i.position,h.position,i.length,h.length),a.fillStyle="rgba(80, 80, 255, 0.8)",this._data.items.forEach(n=>{if(n.y===null)return;const o=l(n.y,n.y-this._data.columnHeight,e.verticalPixelRatio),c=l(this._data.x,this._data.x+n.width,e.horizontalPixelRatio);a.fillRect(c.position,o.position,c.length,o.length-2)})})}}class g{_source;_x=null;_width=6;_columnHeight=0;_top=null;_items=[];constructor(t){this._source=t}update(){const t=this._source._vpData,e=this._source._series,a=this._source._chart.timeScale();this._x=a.timeToCoordinate(t.time),this._width=a.options().barSpacing*t.width;const i=e.priceToCoordinate(t.profile[0].price)??0,h=e.priceToCoordinate(t.profile[1].price)??a.height();this._columnHeight=Math.max(1,i-h);const n=t.profile.reduce((o,c)=>Math.max(o,c.vol),0);this._top=i,this._items=t.profile.map(o=>({y:e.priceToCoordinate(o.price),width:this._width*o.vol/n}))}renderer(){return new P({x:this._x,top:this._top,columnHeight:this._columnHeight,width:this._width,items:this._items})}}class w{_chart;_series;_vpData;_minPrice;_maxPrice;_paneViews;_vpIndex=null;constructor(t,e,a){this._chart=t,this._series=e,this._vpData=a,this._minPrice=1/0,this._maxPrice=-1/0,this._vpData.profile.forEach(i=>{i.price<this._minPrice&&(this._minPrice=i.price),i.price>this._maxPrice&&(this._maxPrice=i.price)}),this._paneViews=[new g(this)]}updateAllViews(){this._paneViews.forEach(t=>t.update())}autoscaleInfo(t,e){const a=this._chart.timeScale().timeToCoordinate(this._vpData.time);if(a===null)return null;const i=this._chart.timeScale().coordinateToLogical(a);return i===null||e<i||t>i+this._vpData.width?null:{priceRange:{minValue:this._minPrice,maxValue:this._maxPrice}}}paneViews(){return this._paneViews}}const m=window.chart=u("chart",{autoSize:!0}),_=m.addSeries(f),r=x();_.setData(r);const p=r[r.length-50].value,v=Math.round(p*.1),d=[];for(let s=0;s<15;s++)d.push({price:p+s*v,vol:Math.round(Math.random()*20)});const V={time:r[r.length-50].time,profile:d,width:10},S=new w(m,_,V);_.attachPrimitive(S);
