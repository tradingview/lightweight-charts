import{q as W,n as f}from"./lightweight-charts.production-BQu0Tfey.js";import{g as U}from"./sample-data-x_8-FZm1.js";const H=""+new URL("image-etYceiEU.svg",import.meta.url).href;class x{_source;_view;constructor(e,t){this._source=e,this._view=t}draw(e){e.useMediaCoordinateSpace(t=>{const s=t.context,i=this._view._placement;if(i){if(!this._source._imgElement)throw new Error("Image element missing.");s.globalAlpha=this._source._options.alpha??1,s.drawImage(this._source._imgElement,i.x,i.y,i.width,i.height)}})}}class q{_source;_placement=null;constructor(e){this._source=e}zOrder(){return"bottom"}update(){this._placement=this._determinePlacement()}renderer(){return new x(this._source,this)}_determinePlacement(){if(!this._source._chart)return null;const e=this._source._chart.priceScale("left").width(),t=this._source._chart.timeScale().width(),s=e,i=this._source._chart.chartElement().clientHeight-this._source._chart.timeScale().height(),u=Math.round(t/2)+s,d=Math.round(i/2)+0,h=this._source._options.padding??0;let a=t-2*h,r=i-2*h;this._source._options.maxHeight&&(r=Math.min(r,this._source._options.maxHeight)),this._source._options.maxWidth&&(a=Math.min(a,this._source._options.maxWidth));const g=a/this._source._imageWidth,p=r/this._source._imageHeight,o=Math.min(g,p),c=this._source._imageWidth*o,_=this._source._imageHeight*o,w=u-.5*c,E=d-.5*_;return{x:w,y:E,height:_,width:c}}}class S{_paneViews;_imgElement=null;_imageUrl;_options;_imageHeight=0;_imageWidth=0;_chart=null;_containerElement=null;_requestUpdate;constructor(e,t){this._imageUrl=e,this._options=t,this._paneViews=[new q(this)]}attached({chart:e,requestUpdate:t}){this._chart=e,this._requestUpdate=t,this._containerElement=e.chartElement(),this._imgElement=new Image,this._imgElement.onload=()=>{this._imageHeight=this._imgElement?.naturalHeight??1,this._imageWidth=this._imgElement?.naturalWidth??1,this._paneViews.forEach(s=>s.update()),this.requestUpdate()},this._imgElement.src=this._imageUrl}detached(){this._imgElement=null}requestUpdate(){this._requestUpdate&&this._requestUpdate()}updateAllViews(){this._paneViews.forEach(e=>e.update())}paneViews(){return this._paneViews}}const m=document.querySelector("#chart");if(!m)throw new Error("Unable to located container div element");const v=window.chart=W(m,{autoSize:!0}),V=new S(H,{maxHeight:400,maxWidth:400,padding:50,alpha:.4}),l=v.addSeries(f),I=U();l.setData(I);l.attachPrimitive(V);
