import{y,q as b}from"./lightweight-charts.production-Co-rHmTL.js";import{g as E}from"./sample-data-x_8-FZm1.js";import{a as M}from"./positions-t2UKkghX.js";const V={...y,color:"#D63864",widthPercent:50,radius:4};class B{_data=null;_options=null;draw(t,a){t.useBitmapCoordinateSpace(o=>this._drawImpl(o,a))}update(t,a){this._data=t,this._options=a}_drawImpl(t,a){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;const o=this._options,x=this._data.bars.map(n=>({x:n.x*t.horizontalPixelRatio,value:a(n.originalData.value),color:n.barColor??o.color})),_=a(0)??0,r=t.context;let u=null;r.beginPath();const d=Math.max(1,Math.round(.01*o.widthPercent*this._data.barSpacing*t.horizontalPixelRatio)),R=Math.floor(o.radius*t.horizontalPixelRatio);x.slice(this._data.visibleRange.from,this._data.visibleRange.to+1).forEach(n=>{const h=n.color;u!==null&&u!==h&&(r.fill(),r.beginPath()),r.fillStyle=h;const p=M(_,n.value,t.verticalPixelRatio),l=Math.floor(Math.min(R,d/2,Math.abs(p.length))),P=Math.round(n.x-d/2);r.roundRect(P,p.position,d,p.length,n.value<_?[l,l,0,0]:[0,0,l,l]),u=h}),r.fill()}}class S{_renderer;constructor(){this._renderer=new B}priceValueBuilder(t){return[t.value]}isWhitespace(t){return t.value===void 0}renderer(){return this._renderer}update(t,a){this._renderer.update(t,a)}defaultOptions(){return V}}const w=window.chart=b("chart",{autoSize:!0}),I=new S;let v=!0;const i={autoscaleInfoProvider:e=>{const t=e();if(!v)return t;if(!t?.priceRange)return{priceRange:{minValue:0,maxValue:0}};const a=Math.min(t.priceRange.minValue,0),o=Math.max(t.priceRange.maxValue,0);return{...t,priceRange:{minValue:a,maxValue:o}}},radius:6,widthPercent:50},s=w.addCustomSeries(I,i),c=E(6);c.forEach((e,t)=>{e.color=t%2?"#6438D6":void 0});s.setData(c);w.timeScale().fitContent();c.forEach((e,t)=>{const a=document.getElementById(`bar_${t+1}`);a.value=e.value.toFixed(2),a.onchange=()=>{const o=parseFloat(a.value);isNaN(o)||(e.value=o,s.setData(c))}});const m=document.getElementById("radius");m.value=i.radius.toString();m.onchange=()=>{const e=parseFloat(m.value);e>=0&&(i.radius=e,s.applyOptions(i))};const g=document.getElementById("width");g.value=i.widthPercent.toString();g.onchange=()=>{const e=parseFloat(g.value);e>=0&&e<=100&&(i.widthPercent=e,s.applyOptions(i))};const f=document.getElementById("autoscaleToZero");f.checked=v;f.onchange=()=>{v=f.checked,s.applyOptions(i)};
