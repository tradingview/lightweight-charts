import{I as u,q as d,n as p,N as _}from"./lightweight-charts.production-BQu0Tfey.js";import{g as P}from"./sample-data-x_8-FZm1.js";import{p as m}from"./positions-t2UKkghX.js";class f{_price=null;_x=null;_color="#000000";update(i,e,r){this._price=i,this._color=e,this._x=r}draw(i){i.useBitmapCoordinateSpace(e=>{if(this._price===null||this._x===null)return;const r=Math.round(this._x*e.horizontalPixelRatio),s=m(this._price,e.verticalPixelRatio,e.verticalPixelRatio),a=s.position+s.length/2,n=e.context;n.beginPath(),n.setLineDash([4*e.verticalPixelRatio,2*e.verticalPixelRatio]),n.moveTo(r,a),n.lineTo(e.bitmapSize.width,a),n.strokeStyle=this._color,n.lineWidth=e.verticalPixelRatio,n.stroke()})}}class w{_renderer;constructor(){this._renderer=new f}renderer(){return this._renderer}update(i,e,r){this._renderer.update(i,e,r)}}class v{_paneViews;_chart=null;_series=null;constructor(){this._paneViews=[new w]}attached({chart:i,series:e}){this._chart=i,this._series=e,this._series.applyOptions({priceLineVisible:!1})}detached(){this._chart=null,this._series=null}updateAllViews(){if(!this._series||!this._chart)return;const i=this._series.options();let e=i.priceLineColor||i.color||"#000000";const r=this._series.dataByIndex(1e5,u.NearestLeft);let s=null,a=null;r&&(r.color!==void 0&&(e=r.color),s=x(r),a=this._chart.timeScale().timeToCoordinate(r.time));const n=s!==null?this._series.priceToCoordinate(s):null;this._paneViews.forEach(h=>h.update(n,e,a))}paneViews(){return this._paneViews}}function x(t){return t.value!==void 0?t.value:t.close!==void 0?t.close:null}const o=window.chart=d("chart",{autoSize:!0}),l=o.addSeries(p,{lastPriceAnimation:_.OnDataUpdate}),c=P(),[V,L]=[c.slice(0,-100),c.slice(-100)];l.setData(V);l.attachPrimitive(new v);const S=o.timeScale().scrollPosition();o.timeScale().scrollToPosition(S+20,!1);function*R(t){for(const i of t)yield i;return null}const g=R(L),D=window.setInterval(()=>{const t=g.next();if(t.done){window.clearInterval(D);return}l.update(t.value)},200);
