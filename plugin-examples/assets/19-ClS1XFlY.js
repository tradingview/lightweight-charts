var C=Object.defineProperty;var x=(i,t,o)=>t in i?C(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o;var _=(i,t,o)=>x(i,typeof t!="symbol"?t+"":t,o);import{g as D,N as k}from"./lightweight-charts.production-DxDuMwk8.js";import{a as R}from"./sample-data-x_8-FZm1.js";import{g as S,c as Y}from"./candles-njcwq1Ro.js";import{a as g,p as w}from"./positions-t2UKkghX.js";class P{constructor(){_(this,"_data",null);_(this,"_options",null)}draw(t,o){t.useBitmapCoordinateSpace(s=>this._drawImpl(s,o))}update(t,o){this._data=t,this._options=o}_drawImpl(t,o){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;let s=-1/0;const c=this._data.bars.map(e=>{const h=e.originalData.close>=s;s=e.originalData.close??s;const d=o(e.originalData.open)??0,r=o(e.originalData.high)??0,a=o(e.originalData.low)??0,l=o(e.originalData.close)??0;return{openY:d,highY:r,lowY:a,closeY:l,x:e.x,isUp:h}}),n=this._options.radius(this._data.barSpacing);this._drawWicks(t,c,this._data.visibleRange),this._drawCandles(t,c,this._data.visibleRange,n)}_drawWicks(t,o,s){if(this._data===null||this._options===null)return;const{context:c,horizontalPixelRatio:n,verticalPixelRatio:e}=t,h=S(n);for(let d=s.from;d<s.to;d++){const r=o[d];c.fillStyle=r.isUp?this._options.wickUpColor:this._options.wickDownColor;const a=g(r.lowY,r.highY,e),l=w(r.x,n,h);c.fillRect(l.position,a.position,l.length,a.length)}}_drawCandles(t,o,s,c){if(this._data===null||this._options===null)return;const{context:n,horizontalPixelRatio:e,verticalPixelRatio:h}=t,d=Y(this._data.barSpacing,1);for(let r=s.from;r<s.to;r++){const a=o[r],l=g(Math.min(a.openY,a.closeY),Math.max(a.openY,a.closeY),h),p=w(a.x,e,d);n.fillStyle=a.isUp?this._options.upColor:this._options.downColor,n.roundRect?(n.beginPath(),n.roundRect(p.position,l.position,p.length,l.length,c),n.fill()):n.fillRect(p.position,l.position,p.length,l.length)}}}const b={...D,upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350",radius:function(i){return i<4?0:i/3}};class v{constructor(){_(this,"_renderer");this._renderer=new P}priceValueBuilder(t){return[t.high,t.low,t.close]}renderer(){return this._renderer}isWhitespace(t){return t.close===void 0}update(t,o){this._renderer.update(t,o)}defaultOptions(){return b}}const W=window.chart=k("chart",{autoSize:!0}),y=new v,m=W.addCustomSeries(y,{color:"#FF00FF"}),{upColor:U,downColor:V}=m.options();let f=-1/0;const u=R().map(i=>{const t=i.close>=f?U:V;return f=i.close,{...i,color:t}});u[u.length-2]={time:u[u.length-2].time};m.setData(u);
