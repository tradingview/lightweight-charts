var f=Object.defineProperty;var x=(s,t,i)=>t in s?f(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var e=(s,t,i)=>x(s,typeof t!="symbol"?t+"":t,i);import{N as P,G as g}from"./lightweight-charts.production-DxDuMwk8.js";import{g as w}from"./sample-data-x_8-FZm1.js";import{a as _}from"./positions-t2UKkghX.js";class v{constructor(t){e(this,"_data");this._data=t}draw(t){t.useBitmapCoordinateSpace(i=>{if(this._data.x===null||this._data.top===null)return;const o=i.context,a=_(this._data.x,this._data.x+this._data.width,i.horizontalPixelRatio),c=_(this._data.top,this._data.top-this._data.columnHeight*this._data.items.length,i.verticalPixelRatio);o.fillStyle="rgba(0, 0, 255, 0.2)",o.fillRect(a.position,c.position,a.length,c.length),o.fillStyle="rgba(80, 80, 255, 0.8)",this._data.items.forEach(r=>{if(r.y===null)return;const n=_(r.y,r.y-this._data.columnHeight,i.verticalPixelRatio),l=_(this._data.x,this._data.x+r.width,i.horizontalPixelRatio);o.fillRect(l.position,n.position,l.length,n.length-2)})})}}class V{constructor(t){e(this,"_source");e(this,"_x",null);e(this,"_width",6);e(this,"_columnHeight",0);e(this,"_top",null);e(this,"_items",[]);this._source=t}update(){const t=this._source._vpData,i=this._source._series,o=this._source._chart.timeScale();this._x=o.timeToCoordinate(t.time),this._width=o.options().barSpacing*t.width;const a=i.priceToCoordinate(t.profile[0].price)??0,c=i.priceToCoordinate(t.profile[1].price)??o.height();this._columnHeight=Math.max(1,a-c);const r=t.profile.reduce((n,l)=>Math.max(n,l.vol),0);this._top=a,this._items=t.profile.map(n=>({y:i.priceToCoordinate(n.price),width:this._width*n.vol/r}))}renderer(){return new v({x:this._x,top:this._top,columnHeight:this._columnHeight,width:this._width,items:this._items})}}class S{constructor(t,i,o){e(this,"_chart");e(this,"_series");e(this,"_vpData");e(this,"_minPrice");e(this,"_maxPrice");e(this,"_paneViews");e(this,"_vpIndex",null);this._chart=t,this._series=i,this._vpData=o,this._minPrice=1/0,this._maxPrice=-1/0,this._vpData.profile.forEach(a=>{a.price<this._minPrice&&(this._minPrice=a.price),a.price>this._maxPrice&&(this._maxPrice=a.price)}),this._paneViews=[new V(this)]}updateAllViews(){this._paneViews.forEach(t=>t.update())}autoscaleInfo(t,i){const o=this._chart.timeScale().timeToCoordinate(this._vpData.time);if(o===null)return null;const a=this._chart.timeScale().coordinateToLogical(o);return a===null||i<a||t>a+this._vpData.width?null:{priceRange:{minValue:this._minPrice,maxValue:this._maxPrice}}}paneViews(){return this._paneViews}}const p=window.chart=P("chart",{autoSize:!0}),m=p.addSeries(g),h=w();m.setData(h);const d=h[h.length-50].value,y=Math.round(d*.1),u=[];for(let s=0;s<15;s++)u.push({price:d+s*y,vol:Math.round(Math.random()*20)});const R={time:h[h.length-50].time,profile:u,width:10},C=new S(p,m,R);m.attachPrimitive(C);
