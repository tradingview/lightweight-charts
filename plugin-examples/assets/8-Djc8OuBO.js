var H=Object.defineProperty;var B=(e,a,t)=>a in e?H(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var p=(e,a,t)=>B(e,typeof a!="symbol"?a+"":a,t);import{b as T,W as L,p as w}from"./lightweight-charts.production-DiDv8rJD.js";import{c as O}from"./columns-CW5ezfZ5.js";import{a as W}from"./positions-t2UKkghX.js";import{m as A,s as C,g as E}from"./sample-data-x_8-FZm1.js";const I={...T,colors:["#ACE5DC","#42BDA8","#FCCACD","#F77C80"],borderRadius:[2,0,2,0],maxHeight:130};function j(e,a){return e.map(t=>t===0?t:t+a)}function _(e,a,t,i,n,s){if(e.beginPath(),e.roundRect){e.roundRect(a,t,i,n,s);return}e.lineTo(a+i-s[1],t),s[1]!==0&&e.arcTo(a+i,t,a+i,t+s[1],s[1]),e.lineTo(a+i,t+n-s[2]),s[2]!==0&&e.arcTo(a+i,t+n,a+i-s[2],t+n,s[2]),e.lineTo(a+s[3],t+n),s[3]!==0&&e.arcTo(a,t+n,a,t+n-s[3],s[3]),e.lineTo(a,t+s[0]),s[0]!==0&&e.arcTo(a,t,a+s[0],t,s[0])}function F(e,a,t,i,n,s,l=0,h=[0,0,0,0],c=""){if(e.save(),!l||!c||c===s){_(e,a,t,i,n,h),e.fillStyle=s,e.fill(),e.restore();return}const o=l/2,r=j(h,-o);_(e,a+o,t+o,i-l,n-l,r),s!=="transparent"&&(e.fillStyle=s,e.fill()),c!=="transparent"&&(e.lineWidth=l,e.strokeStyle=c,e.closePath(),e.stroke()),e.restore()}class Y{constructor(){p(this,"_data",null);p(this,"_options",null)}draw(a,t){a.useBitmapCoordinateSpace(i=>this._drawImpl(i,t))}update(a,t){this._data=a,this._options=t}_drawImpl(a,t){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;const i=this._options;let n=0;for(let o=this._data.visibleRange.from;o<this._data.visibleRange.to;o++){const r=this._data.bars[o].originalData.values;for(const u of r)Math.abs(u)>n&&(n=Math.abs(u))}const s=i.maxHeight/2,l=this._data.bars.map(o=>({x:o.x,ys:o.originalData.values.map(r=>Math.abs(r)/n*Math.sign(r)*s),positive:o.originalData.values.map(r=>r>=0)}));O(l,this._data.barSpacing,a.horizontalPixelRatio,this._data.visibleRange.from,this._data.visibleRange.to);const h=t(0)??0,c=this._data.barSpacing*a.horizontalPixelRatio<4?0:Math.max(1,.5*a.horizontalPixelRatio);for(let o=this._data.visibleRange.from;o<this._data.visibleRange.to;o++){const r=l[o],u=r.column;if(!u)continue;const d=Math.min(Math.max(a.horizontalPixelRatio,u.right-u.left),this._data.barSpacing*a.horizontalPixelRatio);r.ys.forEach((M,g)=>{const P=i.colors[g%i.colors.length],R=W(h,h-M,a.verticalPixelRatio),S=i.borderRadius[g%i.borderRadius.length]*a.verticalPixelRatio,V=r.positive[g],m=Math.floor(Math.min(S,d/2,Math.abs(R.length))),z=V?[m,m,0,0]:[0,0,m,m];F(a.context,u.left,R.position,d,R.length,P,c,z,"transparent")})}}}class k{constructor(){p(this,"_renderer");this._renderer=new Y}priceValueBuilder(){return[0]}isWhitespace(a){var t;return!((t=a.values)!=null&&t.length)}renderer(){return this._renderer}update(a,t){this._renderer.update(a,t)}defaultOptions(){return I}}function q(e){const a=e.map(l=>l.value),t=Math.min(...a),n=(Math.max(...a)-t)/2+t;return e.map(l=>({...l,value:l.value-n}))}function G(e){return A(4,e,20).map(a=>{const t=a.values.slice(0,2).sort().reverse();t[1]*=.5+Math.random()*.5;const i=a.values.slice(2).sort().map(n=>-1*n);return i[1]*=.5+Math.random()*.5,{...a,values:[...t,...i]}})}const b=200,f=window.chart=L("chart",{autoSize:!0,timeScale:{minBarSpacing:4,barSpacing:21}}),J=new k,v=f.addCustomSeries(J,{color:"black",priceLineVisible:!1,lastValueVisible:!1}),K=G(b);v.setData(K);const N=f.addSeries(w,{baseValue:{type:"price",price:0}}),Q=q(C(E(b),3));N.setData(Q);function D(){const{height:e}=f.paneSize(),a=v.options().maxHeight,t=Math.min(.3,a/2/e);v.priceScale().applyOptions({scaleMargins:{top:t,bottom:t}})}const U=new ResizeObserver(e=>{D()});U.observe(f.chartElement());D();
