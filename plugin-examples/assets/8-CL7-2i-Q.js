import{y as z,q as H,g as B}from"./lightweight-charts.production-BQu0Tfey.js";import{c as T}from"./columns-CW5ezfZ5.js";import{a as L}from"./positions-t2UKkghX.js";import{m as w,s as O,g as A}from"./sample-data-x_8-FZm1.js";const C={...z,colors:["#ACE5DC","#42BDA8","#FCCACD","#F77C80"],borderRadius:[2,0,2,0],maxHeight:130};function E(t,a){return t.map(e=>e===0?e:e+a)}function d(t,a,e,i,n,s){if(t.beginPath(),t.roundRect){t.roundRect(a,e,i,n,s);return}t.lineTo(a+i-s[1],e),s[1]!==0&&t.arcTo(a+i,e,a+i,e+s[1],s[1]),t.lineTo(a+i,e+n-s[2]),s[2]!==0&&t.arcTo(a+i,e+n,a+i-s[2],e+n,s[2]),t.lineTo(a+s[3],e+n),s[3]!==0&&t.arcTo(a,e+n,a,e+n-s[3],s[3]),t.lineTo(a,e+s[0]),s[0]!==0&&t.arcTo(a,e,a+s[0],e,s[0])}function I(t,a,e,i,n,s,l=0,h=[0,0,0,0],c=""){if(t.save(),!l||!c||c===s){d(t,a,e,i,n,h),t.fillStyle=s,t.fill(),t.restore();return}const o=l/2,r=E(h,-o);d(t,a+o,e+o,i-l,n-l,r),s!=="transparent"&&(t.fillStyle=s,t.fill()),c!=="transparent"&&(t.lineWidth=l,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}class j{_data=null;_options=null;draw(a,e){a.useBitmapCoordinateSpace(i=>this._drawImpl(i,e))}update(a,e){this._data=a,this._options=e}_drawImpl(a,e){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;const i=this._options;let n=0;for(let o=this._data.visibleRange.from;o<this._data.visibleRange.to;o++){const r=this._data.bars[o].originalData.values;for(const u of r)Math.abs(u)>n&&(n=Math.abs(u))}const s=i.maxHeight/2,l=this._data.bars.map(o=>({x:o.x,ys:o.originalData.values.map(r=>Math.abs(r)/n*Math.sign(r)*s),positive:o.originalData.values.map(r=>r>=0)}));T(l,this._data.barSpacing,a.horizontalPixelRatio,this._data.visibleRange.from,this._data.visibleRange.to);const h=e(0)??0,c=this._data.barSpacing*a.horizontalPixelRatio<4?0:Math.max(1,.5*a.horizontalPixelRatio);for(let o=this._data.visibleRange.from;o<this._data.visibleRange.to;o++){const r=l[o],u=r.column;if(!u)continue;const v=Math.min(Math.max(a.horizontalPixelRatio,u.right-u.left),this._data.barSpacing*a.horizontalPixelRatio);r.ys.forEach((D,f)=>{const M=i.colors[f%i.colors.length],g=L(h,h-D,a.verticalPixelRatio),P=i.borderRadius[f%i.borderRadius.length]*a.verticalPixelRatio,S=r.positive[f],m=Math.floor(Math.min(P,v/2,Math.abs(g.length))),V=S?[m,m,0,0]:[0,0,m,m];I(a.context,u.left,g.position,v,g.length,M,c,V,"transparent")})}}}class q{_renderer;constructor(){this._renderer=new j}priceValueBuilder(){return[0]}isWhitespace(a){return!a.values?.length}renderer(){return this._renderer}update(a,e){this._renderer.update(a,e)}defaultOptions(){return C}}function F(t){const a=t.map(l=>l.value),e=Math.min(...a),n=(Math.max(...a)-e)/2+e;return t.map(l=>({...l,value:l.value-n}))}function W(t){return w(4,t,20).map(a=>{const e=a.values.slice(0,2).sort().reverse();e[1]*=.5+Math.random()*.5;const i=a.values.slice(2).sort().map(n=>-1*n);return i[1]*=.5+Math.random()*.5,{...a,values:[...e,...i]}})}const _=200,p=window.chart=H("chart",{autoSize:!0,timeScale:{minBarSpacing:4,barSpacing:21}}),Y=new q,R=p.addCustomSeries(Y,{color:"black",priceLineVisible:!1,lastValueVisible:!1}),k=W(_);R.setData(k);const G=p.addSeries(B,{baseValue:{type:"price",price:0}}),J=F(O(A(_),3));G.setData(J);function b(){const{height:t}=p.paneSize(),a=R.options().maxHeight,e=Math.min(.3,a/2/t);R.priceScale().applyOptions({scaleMargins:{top:e,bottom:e}})}const K=new ResizeObserver(t=>{b()});K.observe(p.chartElement());b();
