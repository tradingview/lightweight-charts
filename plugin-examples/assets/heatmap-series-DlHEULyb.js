var p=Object.defineProperty;var m=(e,t,i)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var c=(e,t,i)=>m(e,typeof t!="symbol"?t+"":t,i);import{g as _}from"./lightweight-charts.production-DxDuMwk8.js";import{f as x}from"./full-width-DhW7rAVF.js";import{a as b}from"./positions-t2UKkghX.js";const g={..._,lastValueVisible:!1,priceLineVisible:!1,cellShader:e=>{const t=Math.min(Math.max(0,e),100);return`rgba(0, ${100+t*1.55}, ${0+t}, ${.2+t*.8})`},cellBorderWidth:1,cellBorderColor:"transparent"};class B{constructor(){c(this,"_data",null);c(this,"_options",null)}draw(t,i){t.useBitmapCoordinateSpace(l=>this._drawImpl(l,i))}update(t,i){this._data=t,this._options=i}_drawImpl(t,i){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;const l=this._options,u=this._data.bars.map(r=>({x:r.x,cells:r.originalData.cells.map(o=>({amount:o.amount,low:i(o.low),high:i(o.high)}))})),a=this._data.barSpacing>l.cellBorderWidth*3;for(let r=this._data.visibleRange.from;r<this._data.visibleRange.to;r++){const o=u[r],n=x(o.x,this._data.barSpacing/2,t.horizontalPixelRatio),s=a?l.cellBorderWidth*t.horizontalPixelRatio:0,h=a?l.cellBorderWidth*t.verticalPixelRatio:0;for(const f of o.cells){const d=b(f.low,f.high,t.verticalPixelRatio);t.context.fillStyle=l.cellShader(f.amount),t.context.fillRect(n.position+s,d.position+h,n.length-s*2,d.length-1-h*2),a&&l.cellBorderWidth&&l.cellBorderColor!=="transparent"&&(t.context.beginPath(),t.context.rect(n.position+s/2,d.position+h/2,n.length-s,d.length-1-h),t.context.strokeStyle=l.cellBorderColor,t.context.lineWidth=s,t.context.stroke())}}}}class P{constructor(){c(this,"_renderer");this._renderer=new B}priceValueBuilder(t){if(t.cells.length<1)return[NaN];let i=1/0,l=-1/0;t.cells.forEach(a=>{a.low<i&&(i=a.low),a.high>l&&(l=a.high)});const u=i+(l-i)/2;return[i,l,u]}isWhitespace(t){return t.cells===void 0||t.cells.length<1}renderer(){return this._renderer}update(t,i){this._renderer.update(t,i)}defaultOptions(){return g}}export{P as H};
