import{y as m,q as C}from"./lightweight-charts.production-Co-rHmTL.js";import{a as x}from"./sample-data-x_8-FZm1.js";import{g as D,c as k}from"./candles-njcwq1Ro.js";import{a as _,p as w}from"./positions-t2UKkghX.js";class R{_data=null;_options=null;draw(t,o){t.useBitmapCoordinateSpace(i=>this._drawImpl(i,o))}update(t,o){this._data=t,this._options=o}_drawImpl(t,o){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;let i=-1/0;const c=this._data.bars.map(n=>{const h=n.originalData.close>=i;i=n.originalData.close??i;const d=o(n.originalData.open)??0,a=o(n.originalData.high)??0,e=o(n.originalData.low)??0,r=o(n.originalData.close)??0;return{openY:d,highY:a,lowY:e,closeY:r,x:n.x,isUp:h}}),s=this._options.radius(this._data.barSpacing);this._drawWicks(t,c,this._data.visibleRange),this._drawCandles(t,c,this._data.visibleRange,s)}_drawWicks(t,o,i){if(this._data===null||this._options===null)return;const{context:c,horizontalPixelRatio:s,verticalPixelRatio:n}=t,h=D(s);for(let d=i.from;d<i.to;d++){const a=o[d];c.fillStyle=a.isUp?this._options.wickUpColor:this._options.wickDownColor;const e=_(a.lowY,a.highY,n),r=w(a.x,s,h);c.fillRect(r.position,e.position,r.length,e.length)}}_drawCandles(t,o,i,c){if(this._data===null||this._options===null)return;const{context:s,horizontalPixelRatio:n,verticalPixelRatio:h}=t,d=k(this._data.barSpacing,1);for(let a=i.from;a<i.to;a++){const e=o[a],r=_(Math.min(e.openY,e.closeY),Math.max(e.openY,e.closeY),h),p=w(e.x,n,d);s.fillStyle=e.isUp?this._options.upColor:this._options.downColor,s.roundRect?(s.beginPath(),s.roundRect(p.position,r.position,p.length,r.length,c),s.fill()):s.fillRect(p.position,r.position,p.length,r.length)}}}const S={...m,upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350",radius:function(l){return l<4?0:l/3}};class Y{_renderer;constructor(){this._renderer=new R}priceValueBuilder(t){return[t.high,t.low,t.close]}renderer(){return this._renderer}isWhitespace(t){return t.close===void 0}update(t,o){this._renderer.update(t,o)}defaultOptions(){return S}}const P=window.chart=C("chart",{autoSize:!0}),b=new Y,g=P.addCustomSeries(b,{color:"#FF00FF"}),{upColor:y,downColor:v}=g.options();let f=-1/0;const u=x().map(l=>{const t=l.close>=f?y:v;return f=l.close,{...l,color:t}});u[u.length-2]={time:u[u.length-2].time};g.setData(u);
