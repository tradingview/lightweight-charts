import{n as l,q as u,g as _,R as S,h as p}from"./sample-data-CWPQ6V8c.js";import{c as D}from"./percent-change-calculation-D2Kn2o6n.js";function m(i,e){class a{_baseSeries=null;_indicatorSeries=null;_chart=null;_options=null;attached(t){const{chart:s,series:o}=t;this._chart=s,this._baseSeries=o,this._indicatorSeries=this._chart.addSeries(l),this._options=e,o.subscribeDataChanged(this._updateData),this._updateData()}detached(){this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&this._chart?.removeSeries(this._indicatorSeries),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(t){this._options={...this._options||{},...t},this._updateData()}_updateData=()=>{if(!this._indicatorSeries)return;if(!this._baseSeries){this._indicatorSeries.setData([]);return}const t=this._baseSeries.data(),s=D(t,this._options||e);this._indicatorSeries.setData(s)}}const n=new a;return i.attachPrimitive(n),n.indicatorSeries()}const f={autoSize:!0},h=u("chart",f),c=_(150,new Date(2024,0,1)),[b,g]=[c.slice(0,100),c.slice(100)],r=h.addSeries(S,{});r.setData(b);const d=m(r,{offset:2});d.applyOptions({color:"purple",lineWidth:2,lineStyle:p.Solid});d.moveToPane(1);h.timeScale().fitContent();setTimeout(async()=>{function i(e){return new Promise(a=>{setTimeout(a,e)})}for(const e of g)r.update(e),await i(200)},2e3);
