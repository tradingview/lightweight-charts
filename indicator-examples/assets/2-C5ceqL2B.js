import{a as b,q as m,c as _,g as u,n as S}from"./sample-data-RBJYs_3z.js";import{c as f}from"./correlation-calculation-DU5DR2E8.js";import"./closest-index-Caghc_8Z.js";import"./timestamp-data-Dz1yihFk.js";function y(e,a,c){class p{_baseSeries=null;_secondarySeries=null;_indicatorSeries=null;_chart=null;_options=null;attached(t){const{chart:s,series:i}=t;this._chart=s,this._baseSeries=i,this._secondarySeries=a,this._indicatorSeries=this._chart.addSeries(b),this._options=c,i.subscribeDataChanged(this._updateData),this._secondarySeries.subscribeDataChanged(this._updateData),this._updateData()}detached(){this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._secondarySeries&&this._secondarySeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&this._chart?.removeSeries(this._indicatorSeries),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(t){this._options={...this._options||{},...t},this._updateData()}_updateData=()=>{if(!this._indicatorSeries)return;if(!this._baseSeries||!this._secondarySeries){this._indicatorSeries.setData([]);return}const t=this._baseSeries.data(),s=this._secondarySeries.data(),i=f(t,s,this._options||c);this._indicatorSeries.setData(i)}}const d=new p;return e.attachPrimitive(d),d.indicatorSeries()}const g={autoSize:!0},r=m("chart",g),h=_(u(250,new Date(2024,0,1))),l=_(u(250,new Date(2024,0,1))),[w,C]=[h.slice(0,150),h.slice(150)],[v,T]=[l.slice(0,150),l.slice(150)],n=r.addSeries(S,{color:"rgb(160, 0, 80)"});n.setData(w);const o=r.addSeries(S,{color:"rgb(80, 0, 160)"});o.setData(v);const I=y(n,o,{length:20});I.moveToPane(1);r.timeScale().fitContent();function D(e){return new Promise(a=>{setTimeout(a,e)})}setTimeout(async()=>{for(const e of C)n.update(e),await D(100)},2e3);setTimeout(async()=>{for(const e of T)o.update(e),await D(100)},3e3);
