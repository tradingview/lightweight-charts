import{n as d,q as l,g as u,R as _,h as S}from"./sample-data-RBJYs_3z.js";import{c as p}from"./momentum-calculation-D0CgdOK3.js";import"./timestamp-data-Dz1yihFk.js";function m(i,t){class a{_baseSeries=null;_indicatorSeries=null;_chart=null;_options=null;attached(e){const{chart:s,series:o}=e;this._chart=s,this._baseSeries=o,this._indicatorSeries=this._chart.addSeries(d),this._options=t,o.subscribeDataChanged(this._updateData),this._updateData()}detached(){this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&this._chart?.removeSeries(this._indicatorSeries),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(e){this._options={...this._options||{},...e},this._updateData()}_updateData=()=>{if(!this._indicatorSeries)return;if(!this._baseSeries){this._indicatorSeries.setData([]);return}const e=this._baseSeries.data(),s=p(e,this._options||t);this._indicatorSeries.setData(s)}}const n=new a;return i.attachPrimitive(n),n.indicatorSeries()}const D={autoSize:!0},h=l("chart",D),c=u(150,new Date(2024,0,1)),[b,f]=[c.slice(0,100),c.slice(100)],r=h.addSeries(_,{});r.setData(b);const y=m(r,{length:10,source:"close"});y.applyOptions({color:"orange",lineWidth:2,lineStyle:S.Dotted});h.timeScale().fitContent();setTimeout(async()=>{function i(t){return new Promise(a=>{setTimeout(a,t)})}for(const t of f)r.update(t),await i(200)},2e3);
