import{n as d,q as l,g as _,R as u,h as S}from"./sample-data-CWPQ6V8c.js";import{c as p}from"./average-price-calculation-yjpPmBih.js";function D(i,e){class a{_baseSeries=null;_indicatorSeries=null;_chart=null;_options=null;attached(t){const{chart:s,series:o}=t;this._chart=s,this._baseSeries=o,this._indicatorSeries=this._chart.addSeries(d),this._options=e,o.subscribeDataChanged(this._updateData),this._updateData()}detached(){this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&this._chart?.removeSeries(this._indicatorSeries),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(t){this._options={...this._options||{},...t},this._updateData()}_updateData=()=>{if(!this._indicatorSeries)return;if(!this._baseSeries){this._indicatorSeries.setData([]);return}const t=this._baseSeries.data(),s=p(t,this._options||e);this._indicatorSeries.setData(s)}}const n=new a;return i.attachPrimitive(n),n.indicatorSeries()}const m={autoSize:!0},h=l("chart",m),c=_(150,new Date(2024,0,1)),[f,b]=[c.slice(0,100),c.slice(100)],r=h.addSeries(u,{});r.setData(f);const v=D(r,{offset:2});v.applyOptions({color:"orange",lineWidth:2,lineStyle:S.Dotted});h.timeScale().fitContent();setTimeout(async()=>{function i(e){return new Promise(a=>{setTimeout(a,e)})}for(const e of b)r.update(e),await i(200)},2e3);
