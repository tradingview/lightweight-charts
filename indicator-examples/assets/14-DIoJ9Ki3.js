import{n as r,q as m,c as _,g as S,h as y}from"./sample-data-CWPQ6V8c.js";import{c as f}from"./product-calculation-D4_-0IqC.js";import"./closest-index-Caghc_8Z.js";import"./timestamp-data-Dz1yihFk.js";function w(t,s,d){class b{_baseSeries=null;_secondarySeries=null;_indicatorSeries=null;_chart=null;_options=null;attached(e){const{chart:a,series:i}=e;this._chart=a,this._baseSeries=i,this._secondarySeries=s,this._indicatorSeries=this._chart.addSeries(r),this._options=d,i.subscribeDataChanged(this._updateData),this._secondarySeries.subscribeDataChanged(this._updateData),this._updateData()}detached(){this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._secondarySeries&&this._secondarySeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&this._chart?.removeSeries(this._indicatorSeries),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(e){this._options={...this._options||{},...e},this._updateData()}_updateData=()=>{if(!this._indicatorSeries)return;if(!this._baseSeries||!this._secondarySeries){this._indicatorSeries.setData([]);return}const e=this._baseSeries.data(),a=this._secondarySeries.data(),i=f(e,a,this._options||d);this._indicatorSeries.setData(i)}}const h=new b;return t.attachPrimitive(h),h.indicatorSeries()}const g={autoSize:!0},o=m("chart",g),l=_(S(250,new Date(2024,0,1))),u=_(S(250,new Date(2024,0,1))),[v,P]=[l.slice(0,150),l.slice(150)],[T,C]=[u.slice(0,150),u.slice(150)],n=o.addSeries(r,{color:"rgb(160, 0, 80)"});n.setData(v);const c=o.addSeries(r,{color:"rgb(80, 0, 160)"});c.setData(T);const p=w(n,c,{allowMismatchedDates:!1});p.applyOptions({color:"black",lineStyle:y.Dotted,lineWidth:1});p.moveToPane(1);o.timeScale().fitContent();function D(t){return new Promise(s=>{setTimeout(s,t)})}setTimeout(async()=>{for(const t of P)n.update(t),await D(100)},2e3);setTimeout(async()=>{for(const t of C)c.update(t),await D(100)},3e3);
