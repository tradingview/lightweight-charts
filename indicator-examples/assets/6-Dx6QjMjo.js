var l=Object.defineProperty;var u=(t,i,e)=>i in t?l(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e;var s=(t,i,e)=>u(t,typeof i!="symbol"?i+"":i,e);import{J as _,F as S,g as p,C as D,h as m}from"./sample-data-Buw3x9FV.js";import{c as f}from"./median-price-calculation-B_oJYv0G.js";function b(t,i){class e{constructor(){s(this,"_baseSeries",null);s(this,"_indicatorSeries",null);s(this,"_chart",null);s(this,"_options",null);s(this,"_updateData",()=>{if(!this._indicatorSeries)return;if(!this._baseSeries){this._indicatorSeries.setData([]);return}const a=this._baseSeries.data(),r=f(a,this._options||i);this._indicatorSeries.setData(r)})}attached(a){const{chart:r,series:c}=a;this._chart=r,this._baseSeries=c,this._indicatorSeries=this._chart.addSeries(_),this._options=i,c.subscribeDataChanged(this._updateData),this._updateData()}detached(){var a;this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&((a=this._chart)==null||a.removeSeries(this._indicatorSeries)),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(a){this._options={...this._options||{},...a},this._updateData()}}const o=new e;return t.attachPrimitive(o),o.indicatorSeries()}const y={autoSize:!0},h=S("chart",y),d=p(150,new Date(2024,0,1)),[v,w]=[d.slice(0,100),d.slice(100)],n=h.addSeries(D,{});n.setData(v);const C=b(n,{offset:2});C.applyOptions({color:"purple",lineWidth:2,lineStyle:m.Solid});h.timeScale().fitContent();setTimeout(async()=>{function t(i){return new Promise(e=>{setTimeout(e,i)})}for(const i of w)n.update(i),await t(200)},2e3);
