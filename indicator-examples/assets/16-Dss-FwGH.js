import{n as r,q as b,c as u,g as S,h as m}from"./sample-data-CWPQ6V8c.js";import{c as y}from"./ratio-calculation-Bj-Y0Egd.js";import"./closest-index-Caghc_8Z.js";import"./timestamp-data-Dz1yihFk.js";function f(t,a,d){class p{_baseSeries=null;_secondarySeries=null;_indicatorSeries=null;_chart=null;_options=null;attached(e){const{chart:s,series:i}=e;this._chart=s,this._baseSeries=i,this._secondarySeries=a,this._indicatorSeries=this._chart.addSeries(r,{},1),this._options=d,i.subscribeDataChanged(this._updateData),this._secondarySeries.subscribeDataChanged(this._updateData),this._updateData()}detached(){this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._secondarySeries&&this._secondarySeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&this._chart?.removeSeries(this._indicatorSeries),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(e){this._options={...this._options||{},...e},this._updateData()}_updateData=()=>{if(!this._indicatorSeries)return;if(!this._baseSeries||!this._secondarySeries){this._indicatorSeries.setData([]);return}const e=this._baseSeries.data(),s=this._secondarySeries.data(),i=y(e,s,this._options||d);this._indicatorSeries.setData(i)}}const h=new p;return t.attachPrimitive(h),h.indicatorSeries()}const w={autoSize:!0},n=b("chart",w),l=u(S(250,new Date(2024,0,1))),_=u(S(250,new Date(2024,0,1))),[g,v]=[l.slice(0,150),l.slice(150)],[C,T]=[_.slice(0,150),_.slice(150)],o=n.addSeries(r,{color:"rgb(160, 0, 80)"});o.setData(g);const c=n.addSeries(r,{color:"rgb(80, 0, 160)"});c.setData(C);const O=f(o,c,{allowMismatchedDates:!1});O.applyOptions({color:"black",lineStyle:m.Dotted,lineWidth:1});n.timeScale().fitContent();function D(t){return new Promise(a=>{setTimeout(a,t)})}setTimeout(async()=>{for(const t of v)o.update(t),await D(100)},2e3);setTimeout(async()=>{for(const t of T)c.update(t),await D(100)},3e3);
