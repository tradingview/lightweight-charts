var y=Object.defineProperty;var f=(t,e,s)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var a=(t,e,s)=>f(t,typeof e!="symbol"?e+"":e,s);import{Q as n,W as w,c as S,g as p,h as g}from"./sample-data-DSyAT9PM.js";import{c as v}from"./product-calculation-RFsmjuH5.js";import"./closest-index-BUfzSX6X.js";import"./timestamp-data-Dz1yihFk.js";function P(t,e,s){class m{constructor(){a(this,"_baseSeries",null);a(this,"_secondarySeries",null);a(this,"_indicatorSeries",null);a(this,"_chart",null);a(this,"_options",null);a(this,"_updateData",()=>{if(!this._indicatorSeries)return;if(!this._baseSeries||!this._secondarySeries){this._indicatorSeries.setData([]);return}const i=this._baseSeries.data(),o=this._secondarySeries.data(),r=v(i,o,this._options||s);this._indicatorSeries.setData(r)})}attached(i){const{chart:o,series:r}=i;this._chart=o,this._baseSeries=r,this._secondarySeries=e,this._indicatorSeries=this._chart.addSeries(n),this._options=s,r.subscribeDataChanged(this._updateData),this._secondarySeries.subscribeDataChanged(this._updateData),this._updateData()}detached(){var i;this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._secondarySeries&&this._secondarySeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&((i=this._chart)==null||i.removeSeries(this._indicatorSeries)),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(i){this._options={...this._options||{},...i},this._updateData()}}const l=new m;return t.attachPrimitive(l),l.indicatorSeries()}const T={autoSize:!0},c=w("chart",T),u=S(p(250,new Date(2024,0,1))),_=S(p(250,new Date(2024,0,1))),[C,O]=[u.slice(0,150),u.slice(150)],[I,E]=[_.slice(0,150),_.slice(150)],d=c.addSeries(n,{color:"rgb(160, 0, 80)"});d.setData(C);const h=c.addSeries(n,{color:"rgb(80, 0, 160)"});h.setData(I);const D=P(d,h,{allowMismatchedDates:!1});D.applyOptions({color:"black",lineStyle:g.Dotted,lineWidth:1});D.moveToPane(1);c.timeScale().fitContent();function b(t){return new Promise(e=>{setTimeout(e,t)})}setTimeout(async()=>{for(const t of O)d.update(t),await b(100)},2e3);setTimeout(async()=>{for(const t of E)h.update(t),await b(100)},3e3);
