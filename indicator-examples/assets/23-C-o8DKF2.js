var _=Object.defineProperty;var S=(t,e,i)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var a=(t,e,i)=>S(t,typeof e!="symbol"?e+"":e,i);import{Q as m,W as f,g as D,P as b,h as g}from"./sample-data-DSyAT9PM.js";import{c as w}from"./weighted-close-calculation-BeWUi6qC.js";function v(t,e){class i{constructor(){a(this,"_baseSeries",null);a(this,"_indicatorSeries",null);a(this,"_chart",null);a(this,"_options",null);a(this,"_updateData",()=>{if(!this._indicatorSeries)return;if(!this._baseSeries){this._indicatorSeries.setData([]);return}const s=this._baseSeries.data(),n=w(s,this._options||e);this._indicatorSeries.setData(n)})}attached(s){const{chart:n,series:d}=s;this._chart=n,this._baseSeries=d,this._indicatorSeries=this._chart.addSeries(m),this._options=e,d.subscribeDataChanged(this._updateData),this._updateData()}detached(){var s;this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&((s=this._chart)==null||s.removeSeries(this._indicatorSeries)),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(s){this._options={...this._options||{},...s},this._updateData()}}const h=new i;return t.attachPrimitive(h),h}const y={autoSize:!0},u=f("chart",y),l=D(150,new Date(2024,0,1)),[C,I]=[l.slice(0,100),l.slice(100)],r=document.getElementById("weight");let o=2;r instanceof HTMLInputElement&&(o=Number.parseInt(r.value,10));const c=u.addSeries(b,{});c.setData(C);const p=v(c,{offset:2});p.indicatorSeries().applyOptions({color:"orange",lineWidth:2,lineStyle:g.Dotted});r instanceof HTMLInputElement&&r.addEventListener("input",()=>{o=Number.parseInt(r.value,10),p.applyOptions({weight:o})});u.timeScale().fitContent();setTimeout(async()=>{function t(e){return new Promise(i=>{setTimeout(i,e)})}for(const e of I)c.update(e),await t(200)},2e3);
