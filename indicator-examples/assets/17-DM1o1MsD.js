import{n,q as y,c as p,g as l,h as v}from"./sample-data-RBJYs_3z.js";import{C as w}from"./closest-index-Caghc_8Z.js";function I(o,...e){for(const s of e)for(const t in s)s[t]===void 0||!Object.prototype.hasOwnProperty.call(s,t)||["__proto__","constructor","prototype"].includes(t)||(typeof s[t]!="object"||o[t]===void 0||Array.isArray(s[t])?o[t]=s[t]:h(o[t],s[t]));return o}function h(o,...e){return I(o,...e)}function c(o){for(const e of o)if(typeof e.time!="number")throw new Error('All items must have a numeric "time" property.');return o}class b{_series;_options;_indicatorSeries=null;_chart=null;_closestIndex=null;constructor(e,s){this._series=e,this._options=s}applyOptions(e){this._options=h(this._options,e),this._updateData()}attach(e){return this._indicatorSeries=e.addSeries(n,this._options.seriesOptions),this._updateData(),this._indicatorSeries}detach(){this._chart&&this._indicatorSeries&&(this._chart.removeSeries(this._indicatorSeries),this._indicatorSeries=null)}_updateData(){this._closestIndex=new w(c(this._options.comparisonData));const s=c(this._series.data()).map(t=>{const d=this._closestIndex.findClosestIndex(t.time,"left"),i=this._options.comparisonData[d],a=this._options.mainSource??this._options.source,_=t[a]!==void 0,f=i[this._options.source]!==void 0;if(!i||!_||!f||!this._options.allowMismatchedDates&&i.time!==t.time)return{time:t.time};const D=i[this._options.source],S=t[a];return{time:t.time,value:S/D}});this._indicatorSeries?.setData(s)}}function O(o,e){return new b(o,e)}const g={autoSize:!0},r=y("chart",g),x=p(l(250,new Date(2024,0,1))),u=p(l(250,new Date(2024,0,1))),m=r.addSeries(n,{color:"rgb(160, 0, 80)"});m.setData(x);const C=r.addSeries(n,{color:"rgb(80, 0, 160)"});C.setData(u);const T=O(m,{comparisonData:u,source:"value",seriesOptions:{lineStyle:v.Dotted,color:"black",lineWidth:1}});T.attach(r);r.timeScale().fitContent();
